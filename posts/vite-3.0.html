<!DOCTYPE html><html lang="ja"><head><title>Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã™ã‚‹ | ã‚µã‚¤ãƒœã‚¦ã‚º ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒãƒ¼ãƒ </title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="description" content="Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã—ã¾ã™"/><link rel="icon" type="image/png" sizes="32x32" href="/frontend-expert/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/frontend-expert/icons/favicon-16x16.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã™ã‚‹ | ã‚µã‚¤ãƒœã‚¦ã‚º ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒãƒ¼ãƒ "/><meta name="twitter:description" content="Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã—ã¾ã™"/><meta name="twitter:image " content="https://cybozu.github.io/frontend-expert/ogp/posts/vite-3.0.jpg"/><meta property="og:type" content="article"/><meta property="og:title" content="Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã™ã‚‹ | ã‚µã‚¤ãƒœã‚¦ã‚º ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒãƒ¼ãƒ "/><meta property="og:site_name" content="ã‚µã‚¤ãƒœã‚¦ã‚º ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒãƒ¼ãƒ "/><meta property="og:description" content="Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã—ã¾ã™"/><meta property="og:image" content="https://cybozu.github.io/frontend-expert/ogp/posts/vite-3.0.jpg"/><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/frontend-expert/feeds/atom.xml"/><meta name="next-head-count" content="16"/><link rel="preload" href="/frontend-expert/_next/static/css/d15332f741e09aa2.css" as="style"/><link rel="stylesheet" href="/frontend-expert/_next/static/css/d15332f741e09aa2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/frontend-expert/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/frontend-expert/_next/static/chunks/webpack-b0f44a7ac00bf3cb.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/framework-742985a85518e1e1.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/main-242b1a0e32bf923c.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/_app-ff35bec35d2bc313.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/a9a7754c-e3ac32efe6bdfc47.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/247-c193c27d2f31cb66.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/814-0ba85a11642c687f.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/871-c552fdc3653c7625.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/836-51e1fdc43280f70f.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/posts/%5Bslug%5D-e05ee5cfb4acd47b.js" defer=""></script><script src="/frontend-expert/_next/static/lexGd3PcBj50c4MQ9j4U7/_buildManifest.js" defer=""></script><script src="/frontend-expert/_next/static/lexGd3PcBj50c4MQ9j4U7/_ssgManifest.js" defer=""></script><script src="/frontend-expert/_next/static/lexGd3PcBj50c4MQ9j4U7/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css ruypru">.css-ruypru{width:100%;}.css-ruypru .main{max-width:100%;background-color:white;}.css-ruypru .main .content{margin:0 auto;max-width:var(--content-width);box-sizing:border-box;padding:1rem 1rem 1.5rem;min-height:400px;}</style><div class="css-ruypru"><style data-emotion="css 14l5li6">.css-14l5li6{padding:1.2rem 0 1rem;background-color:var(--primary-color);}.css-14l5li6 .content{max-width:var(--content-width);margin:0 auto;padding:0 1rem;box-sizing:border-box;}.css-14l5li6 h1{font-size:1.6rem;}.css-14l5li6 .navigation ul{margin:0;list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-14l5li6 .navigation ul li{padding:0.2rem 0;font-size:1rem;}.css-14l5li6 .navigation ul li:not(:last-child)::after{content:"/";margin:0 0.4rem;color:var(--light-font-color);}.css-14l5li6 a{color:var(--light-font-color);}</style><header class="css-14l5li6"><div class="content"><h1><a href="/frontend-expert"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27200%27%20height=%2778%27/%3e"/></span><img alt="Frontend Expert Team Logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Frontend Expert Team Logo" src="/frontend-expert/logo.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></h1><nav class="navigation"><ul><li><a href="/frontend-expert/members">Members</a></li><li><a href="/frontend-expert/posts">Posts</a></li><li><a href="https://cybozu.co.jp/recruit/entry/career/front-end-expert.html" target="_blank" rel="noopener noreferrer">Recruiting</a></li></ul></nav></div></header><main class="main"><div class="content"><style data-emotion="css wv9xy9">.css-wv9xy9{margin-left:0;margin-right:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.8rem;line-height:1.5;}</style><h2 class="css-wv9xy9"><span style="word-break: keep-all; overflow-wrap: break-word;">Vite 3.0 ã®<wbr>å†…å®¹ã‚’<wbr>ãŠã•ã‚‰ã„ã™ã‚‹</span></h2><style data-emotion="css 30b2xt">.css-30b2xt{margin-top:0.6rem;font-size:0.8rem;font-weight:bold;}</style><div class="css-30b2xt">Published on<!-- --> <!-- --><time dateTime="2022-07-27" itemProp="datePublished">2022-07-27</time></div><style data-emotion="css 1yefgjn">.css-1yefgjn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:1.5rem 0;}.css-1yefgjn .editors{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:0.4rem;}.css-1yefgjn .author+.editors{margin-left:16px;padding-left:16px;border-left:1px solid #d3d3d3;}</style><div class="css-1yefgjn"><div class="author"><style data-emotion="css jzce96">.css-jzce96{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:60px;color:#333;}.css-jzce96 .label{width:100%;font-size:0.6rem;font-weight:bold;}.css-jzce96 .memberIcon img{border-radius:4px;}.css-jzce96 a{color:inherit;}.css-jzce96 .icon{display:block;}.css-jzce96 .icon svg{color:#444;width:18px;height:18px;font-size:1rem;}.css-jzce96 .authorName{font-size:0.9rem;line-height:1;margin-top:4px;}.css-jzce96 .authorInfo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-left:0.6rem;font-size:1rem;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.css-jzce96 .authorInfo ul{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:4px;}.css-jzce96 .authorInfo ul li:not(:last-of-type){margin-right:8px;}</style><div class="css-jzce96"><a class="memberIcon" href="/frontend-expert/members/mugi"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:60px;height:60px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="mugi" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="mugi" src="/frontend-expert//member-icons/mugi.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a><div class="authorInfo"><div class="label">Author</div><span class="authorName"><a href="/frontend-expert/members/mugi">mugi</a></span><ul><li><a href="https://twitter.com/mugi_uno" aria-label="twitter" class="icon" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="18" height="18"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li><a href="https://github.com/mugi-uno" aria-label="github" class="icon" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github-alt" class="svg-inline--fa fa-github-alt fa-w-15 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512" width="18" height="18"><path fill="currentColor" d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg></a></li></ul></div></div></div></div><style data-emotion="css 1nkwq6x">.css-1nkwq6x{margin:0 auto;}.css-1nkwq6x h1{margin-left:0;margin-right:0;margin-top:1.75rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}.css-1nkwq6x h2{margin-top:1rem;margin-bottom:1rem;font-size:1.6rem;border-bottom:1px solid #ccc;padding-bottom:0.2rem;}.css-1nkwq6x h3{margin-top:1rem;font-size:1.4rem;}.css-1nkwq6x h4{margin-top:1rem;font-size:1.2rem;}.css-1nkwq6x h5{margin-top:1rem;font-size:1.4rem;}.css-1nkwq6x h6{margin-top:1rem;font-size:1.2rem;}.css-1nkwq6x table{width:100%;font-size:1rem;}.css-1nkwq6x img{display:block;margin:0.5rem auto 0;max-width:80%;height:auto;}.css-1nkwq6x p{margin-top:0.8rem;line-height:1.75;font-size:1rem;}.css-1nkwq6x li{margin-left:1rem;font-size:1rem;}.css-1nkwq6x ul{margin-top:1.2rem;margin-bottom:1.2rem;box-sizing:border-box;line-height:2;margin-left:1rem;}.css-1nkwq6x ul ul{margin:0;}.css-1nkwq6x ol{margin-top:1rem;box-sizing:border-box;}.css-1nkwq6x hr{margin-top:1rem;}.css-1nkwq6x a{word-wrap:break-word;}.css-1nkwq6x code:not([class*="language-"]){padding:0.2em 0.4em;margin:0;font-size:0.8rem;background-color:rgba(27, 31, 35, 0.05);border-radius:3px;}.css-1nkwq6x .post table{margin-top:1rem;display:block;width:100%;overflow:auto;}.css-1nkwq6x .post table th{font-weight:600;}.css-1nkwq6x .post table td,.css-1nkwq6x .post table th{padding:6px 13px;border:1px solid #dfe2e5;}.css-1nkwq6x .post table tr{border-top:1px solid #c6cbd1;}.css-1nkwq6x blockquote{padding:0 1em;color:#777;border-left:0.25em solid #ddd;}</style><div class="css-1nkwq6x"><div><p>2022/7/13ã«ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ Vite ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 3.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸ ğŸ‰</p>
<ul>
<li><a href="https://vitejs.dev/blog/announcing-vite3.html">Vite 3.0 is out! | Vite</a></li>
<li><a href="https://github.com/vitejs/vite/blob/v3.0.0/packages/vite/CHANGELOG.md">CHANGELOG</a></li>
<li><a href="https://vitejs.dev/guide/migration.html">Migration from v2 | Vite</a></li>
</ul>
<p>ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«å…¬é–‹ã•ã‚ŒãŸã‚¢ãƒŠã‚¦ãƒ³ã‚¹(<a href="https://github.com/vitejs/vite/releases/tag/v3.0.0">Release v3.0.0 Â· vitejs/vite</a>)ã®å†…å®¹ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€å¤‰æ›´ç‚¹ã‚’æ”¹ã‚ã¦ï¼‘ã¤ãšã¤æ˜ã‚Šä¸‹ã’ã¦ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚</p>
<h3>New Documentation</h3>
<p>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ(<a href="https://ja.vitejs.dev/">vitejs.dev</a>)ãŒ <a href="https://vitepress.vuejs.org/">VitePress</a> ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ¼ãƒã‚’åˆ©ç”¨ã—ãŸå½¢ã§åˆ·æ–°ã•ã‚Œã¾ã—ãŸã€‚ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒè¡¨ç¤ºãªã©ãŒå¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<p>ã¾ãŸã€ã‚ã‚ã›ã¦æ¬¡ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã‚‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é–²è¦§ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<ul>
<li><a href="https://v2.vitejs.dev/">v2.vitejs.dev</a> - Vite 2.x ç³»ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</li>
<li><a href="https://main.vitejs.dev/">main.vitejs.dev</a> - Vite ã®ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒã®å†…å®¹</li>
</ul>
<h3>Create Vite Starter Templates</h3>
<p>Vite ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Scaffold ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§ã‚ã‚‹ <a href="https://github.com/vitejs/vite/tree/main/packages/create-vite"><code>create-vite</code></a> ã«ã¤ã„ã¦ã€Vite 3.x ãŒåˆ©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<h3>Dev Improvements</h3>
<h4>Vite CLI</h4>
<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆãŒ <code>5173</code>ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆãŒ <code>4173</code> ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã¯ä»¥å‰ã¯ <code>3000</code> ã¨ <code>5000</code> ã§ã—ãŸãŒã€MacOS ã§ãƒãƒ¼ãƒˆã®è¡çªãŒç™ºç”Ÿã™ã‚‹ãªã©ã®<a href="https://github.com/vitejs/vite/issues/5707">å•é¡ŒãŒã‚ã£ãŸ</a>ã‚ˆã†ã§ã™ã€‚</p>
<p>ã¡ãªã¿ã«ãªãœ <code>5173</code> ã¨ã„ã†ä¸­é€”åŠç«¯ãªæ•°å­—ãªã®ã ã‚ã†ï¼Ÿã¨æ€ã„èª¿ã¹ã¦ã¿ã¾ã—ãŸãŒã€ä»¥ä¸‹ã® Issue ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚</p>
<p><a href="https://github.com/vitejs/vite/pull/6330#issuecomment-1003405068">https://github.com/vitejs/vite/pull/6330#issuecomment-1003405068</a></p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">At a team meeting we thought about 5173
Like 5173 in leet for Vite | V I T Æ | V === Roman 5</code></pre></div>
<ul>
<li>V â€¦ 5</li>
<li>I â€¦ 1</li>
<li>T â€¦ 7</li>
<li>Æ â€¦ 3</li>
</ul>
<p>ã‚‰ã—ã„ã§ã™ã€‚cool</p>
<h4>Improved WebSocket Connection Strategy</h4>
<p>Vite 2.x ã¾ã§ã¯ã€Proxy ã‚’çµŒç”±ã—ãŸã‚µãƒ¼ãƒãƒ¼ç¢ºç«‹ã«èª²é¡ŒãŒã‚ã£ãŸã¨ã®ã“ã¨ã§ã€3.0 ã‹ã‚‰ã¯ãã‚ŒãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚</p>
<p><a href="https://github.com/sapphi-red/vite-setup-catalogue"><code>vite-setup-catalogue</code></a> ã¨ã„ã†ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒªå†…ã«ã‚‚è¿½åŠ ã•ã‚ŒãŸã“ã¨ã§ã€ä»Šå¾Œã¯åŒãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ CI ã§æ¤œè¨¼ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã¨ã®ã“ã¨ã§ã™ã€‚</p>
<h4>Cold Start Improvements</h4>
<p>ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã«ä¾å­˜é–¢ä¿‚ã‚’å¾Œã‹ã‚‰è§£æ±ºã™ã‚‹éš›ã«ã€ä¾å­˜ã®çŠ¶æ…‹ã«ã‚ˆã£ã¦ã¯ãƒ•ãƒ«ãƒªãƒ­ãƒ¼ãƒ‰ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã£ãŸã®ãŒã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¾å­˜ã‚’æ¸¡ã™ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ã§åŠ¹ç‡åŒ–ã•ã‚Œã€å›é¿å¯èƒ½ã«ãªã£ãŸã‚ˆã†ã§ã™ã€‚</p>
<p>è©³ç´°: <a href="https://github.com/vitejs/vite/pull/8869#issuecomment-1172902125">https://github.com/vitejs/vite/pull/8869#issuecomment-1172902125</a></p>
<h4>import.meta.glob</h4>
<p>Vite ã§ã¯ä»¥å‰ã‹ã‚‰ <a href="https://vitejs.dev/guide/features.html#glob-import"><code>Glob Import</code></a> ã¨å‘¼ã°ã‚Œã‚‹æ©Ÿèƒ½ãŒå­˜åœ¨ã—ã€ç‰¹åˆ¥ãªé–¢æ•° <code>import.meta.glob</code> ã‚’ä»‹ã—ã¦ glob å½¢å¼ã§è¨˜è¿°ã—ã¦ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå¯èƒ½ã§ã™ã€‚</p>
<p>Vite 3.0 ã§ã¯æ©Ÿèƒ½ãŒå¼·åŒ–ã•ã‚Œã€ã‚ˆã‚ŠæŸ”è»ŸãªæŒ‡å®šãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<ul>
<li>Multiple Patterns : è¤‡æ•°ã® glob ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜è¿°</li>
<li>Negative Patterns : é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜è¿°</li>
<li>Named Imports : ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸€éƒ¨ã®ã¿ã‚’æŒ‡å®šå¯èƒ½</li>
<li>Custom Queries : ã‚¯ã‚¨ãƒªã®ä»˜ä¸</li>
<li>Eager Imports : Dynamic import ã®å›é¿</li>
</ul>
<h4>Aligning WASM Import with Future Standards</h4>
<p>Vite 2.x ã‹ã‚‰ WebAssembly ã‚’</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports">init</span> <span class="token keyword module">from</span> <span class="token string">'./example.wasm'</span>
</code></pre></div>
<p>ã®å½¢ã§ import ã§ãã¾ã—ãŸãŒã€å°†æ¥çš„ã« ESM ã®ä»•æ§˜ã¨ã—ã¦ WebAssembly ãŒçµ±åˆã•ã‚ŒãŸå ´åˆã®ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’è€ƒæ…®ã—ã€</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports">init</span> <span class="token keyword module">from</span> <span class="token string">'./example.wasm?init'</span>
</code></pre></div>
<p>ã¨ã€<code>?init</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒä»˜ä¸ã•ã‚ŒãŸå ´åˆã« Vite 2.x ä»¥å‰ã¨åŒæ§˜ã®æŒ™å‹•ã«ãªã‚‹ã‚ˆã†å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚</p>
<p>ç¾çŠ¶ã§ <code>?init</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã›ãšã« ESM ã¨ã—ã¦å‡¦ç†ã™ã‚‹å ´åˆã«ã¯ <a href="https://github.com/Menci/vite-plugin-wasm"><code>vite-plugin-wasm</code></a>ã®ã‚ˆã†ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆ©ç”¨ãŒå¿…é ˆã¨ãªã‚Šã¾ã™ã€‚</p>
<h3>Build Improvements</h3>
<h4>ESM SSR Build by Default</h4>
<p>SSR ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å¤§åŠãŒ ESM ãƒ“ãƒ«ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸãŸã‚ã€
Vite3 ã§ã¯ SSR ãƒ“ãƒ«ãƒ‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå½¢å¼ãŒ ESM ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚</p>
<p>Vite ã§ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å½¢å¼(CommonJS/ESM)ãªã©ã«å¿œã˜ã¦ã€é©å®œ Vite ã®å¤‰æ›ã‹ã‚‰åˆ‡ã‚Šé›¢ã™ï¼ˆå¤–éƒ¨åŒ–ã™ã‚‹ï¼‰ã“ã¨ã§ SSR æ™‚ã®å‡¦ç†ã‚’åŠ¹ç‡åŒ–ã—ã¦ã„ã¾ã™ã€‚</p>
<p>å‚è€ƒ: <a href="https://v2.vitejs.dev/guide/ssr.html#ssr-externals">https://v2.vitejs.dev/guide/ssr.html#ssr-externals</a></p>
<p>ESM ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãªã£ãŸã“ã¨ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å¤–éƒ¨åŒ–ã•ã‚Œã‚‹ä¾å­˜ãŒå¢—ãˆã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã« SSR ãƒ“ãƒ«ãƒ‰ãŒå¯èƒ½ã«ãªã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<p>ãªãŠã€ESM ã«ãªã‚‹ã¨å›°ã‚‹ã‚±ãƒ¼ã‚¹ã®ãŸã‚ã« <code>legacy.buildSsrCjsExternalHeuristics: true</code> ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<h4>Improved Relative Base Support</h4>
<p><code>base</code> ã« <code>''</code> ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç›¸å¯¾çš„ãªãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ã®æŒ‡å®šãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãƒ“ãƒ«ãƒ‰ã®æ®µéšã§ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãŒä¸æ˜ãªã‚±ãƒ¼ã‚¹ãªã©ã§å½¹ã«ç«‹ã¤ã‚ˆã†ã§ã™ã€‚</p>
<h3>Experimental Features</h3>
<h4>Built Asset Paths fine-grained Control (Experimental)</h4>
<p><code>experimental.renderBuiltUrl</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒ Experimental æ©Ÿèƒ½ã¨ã—ã¦å°å…¥ã•ã‚Œã¾ã—ãŸã€‚</p>
<p>CDN ã§ã®é…å¸ƒãªã©ã‚’å‰æã¨ã—ãŸå ´åˆã€ãƒ“ãƒ«ãƒ‰ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸã‚¢ã‚»ãƒƒãƒˆã®ã†ã¡ä¸€éƒ¨ã®ã¿ URL ãŒç•°ãªã‚‹ã‚±ãƒ¼ã‚¹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p>
<p><code>experimental.renderBuiltUrl</code> ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ãªã©ã‚’åˆ©ç”¨ã—ã¦ URL ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<p>â€»å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Šã‚³ãƒ¼ãƒ‰ã‚’æŠœç²‹
<a href="https://vitejs.dev/guide/build.html#advanced-base-options">https://vitejs.dev/guide/build.html#advanced-base-options</a></p>
<div class="remark-highlight"><pre class="language-ts"><code class="language-ts">experimental<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">renderBuiltUrl</span><span class="token punctuation">(</span>filename<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> hostType<span class="token operator">:</span> <span class="token string">'js'</span> <span class="token operator">|</span> <span class="token string">'css'</span> <span class="token operator">|</span> <span class="token string">'html'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'public'</span> <span class="token operator">|</span> <span class="token string">'asset'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'public'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'https://www.domain.com/'</span> <span class="token operator">+</span> filename
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>importer<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'.js'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> runtime<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">window.__assetsPath(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'https://cdn.domain.com/assets/'</span> <span class="token operator">+</span> filename
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4>Esbuild Deps Optimization at Build Time (Experimental)</h4>
<p><code>optimizeDeps.disabled: false</code> æŒ‡å®šãŒ Experimental æ©Ÿèƒ½ã¨ã—ã¦å¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚
<a href="https://vitejs.dev/guide/migration.html#experimental">https://vitejs.dev/guide/migration.html#experimental</a></p>
<p>Vite ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯é–‹ç™ºæ™‚ã«ã¯ esbuild ã‚’ç”¨ã„ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ã¯ Rollup ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
é–‹ç™ºæ™‚ã¨ãƒ“ãƒ«ãƒ‰æ™‚ã§ç•°ãªã‚‹ãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€Vite ã‚’åˆ©ç”¨ã™ã‚‹éš›ã«è€ƒæ…®ã™ã¹ãå¤§ãã„è¦ç´ ã®ä¸€ã¤ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚</p>
<p>å‚è€ƒ: <a href="https://vitejs.dev/guide/why.html#why-not-bundle-with-esbuild">Why Not Bundle with esbuild?</a></p>
<p><code>optimizeDeps.disabled: false</code> ã‚’ç”¨ã„ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚‚ esbuild ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<p>CJS ã®ã¿ã®ä¾å­˜é–¢ä¿‚ã‚‚ ESM ã«å¤‰æ›ã•ã‚Œã‚‹ãŸã‚ã€<code>@rollup/plugin-commonjs</code> ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒä¸è¦ã¨ãªã‚Šã¾ã™ã€‚</p>
<h4>HMR Partial Accept (Experimental)</h4>
<p><code>experimental.hmrPartialAccept</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒ Experimental æ©Ÿèƒ½ã¨ã—ã¦å°å…¥ã•ã‚Œã¾ã—ãŸã€‚</p>
<p>Vite ã§ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„ãƒ„ãƒ¼ãƒ«ã®ä½œæˆè€…å‘ã‘ã« HMR ç”¨ã® API ã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚
<a href="https://vitejs.dev/guide/api-hmr.html">https://vitejs.dev/guide/api-hmr.html</a></p>
<p>ç¾çŠ¶ã® HMR API ã®ä»•çµ„ã¿ã§ã¯ã€HMR å¯èƒ½ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ãã†ã§ãªã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ··åœ¨ã—ã¦ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆã€
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’éƒ¨åˆ†çš„ã«å·®ã—æ›¿ãˆã‚‹ã“ã¨ãŒã§ããšã€éåŠ¹ç‡ãªæ›´æ–°ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>å‚è€ƒ: <a href="https://github.com/vitejs/vite/discussions/7309">HMR partial accept Â· Discussion #7309 Â· vitejs/vite</a></p>
<p>æ–°ã—ã„ API ã§ã‚ã‚‹ <code>import.meta.hot.acceptExports</code> ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€
export ã•ã‚Œã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¤ã„ã¦ã‚ˆã‚Šè©³ç´°ã‹ã¤åŠ¹ç‡çš„ã« HMR ã®åˆ¶å¾¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>
<h3>Bundle Size Reduction</h3>
<p>Vite è‡ªä½“ã®ã‚µã‚¤ã‚ºãŒå°ã•ããªã‚Šã¾ã—ãŸã€‚30%ã»ã©è»½é‡åŒ–ã•ã‚ŒãŸãã†ã§ã™ã€‚</p>
<p>Minify ç”¨ã® Terser ãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ãªã£ãŸã“ã¨ã‚„ã€ <code>node-forge</code> ãŒ <code>vitejs/plugin-basic-ssl</code> ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ç½®ãæ›ã‚ã£ãŸã“ã¨ã«èµ·å› ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<h3>Compatibility Notes</h3>
<ul>
<li>Node.js ã®ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ 14.18+ / 16+ ã«ãªã‚Šã¾ã—ãŸ</li>
<li>Vite è‡ªä½“ãŒ ESM ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚CJSçµŒç”±ã§åˆ©ç”¨ã™ã‚‹å ´åˆã¯ CJS Proxy çµŒç”±ã¨ãªã‚Šã¾ã™
<ul>
<li>å‚è€ƒ: teppeis/<a href="https://zenn.dev/teppeis/articles/2022-07-npm-dual-pacakge-cjs-proxy">Vite 3 ãŒæ¡ç”¨ã—ãŸ CJS Proxy ã«ã‚ˆã‚‹ Dual Package æ§‹æˆ</a></li>
</ul>
</li>
<li>ã‚µãƒãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ã®åŸºæº–ãŒ <code>"Native ESM"</code> <code>"Native ESM dynamic import"</code> <code>"import.meta"</code> ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã«ãªã‚Šã¾ã—ãŸ</li>
<li>SSR ãŠã‚ˆã³ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¢ãƒ¼ãƒ‰ã«ãŠã„ã¦ã€JS ã®æ‹¡å¼µå­ã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦é©åˆ‡ãªæ‹¡å¼µå­ãŒé¸æŠã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li>
</ul>
<p>ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ãŸç‚¹ã¯æ³¨æ„ãŒå¿…è¦ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
Migration Guide ã«ã‚ˆã‚‹ã¨ã€ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã«ãªã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<ul>
<li>Chrome >=87</li>
<li>Firefox >=78</li>
<li>Safari >=13</li>
<li>Edge >=88</li>
</ul>
<hr>
<p>ã¨ã„ã†ã‚ã‘ã§ç°¡å˜ãª Vite 3.0 ã®å†…å®¹ã®ãŠã•ã‚‰ã„ã§ã—ãŸã€‚</p>
<p>Vite ã¯ã‚‚ã¨ã‚‚ã¨ Native ESM ã‚’å‰æã¨ã—ãŸä»•çµ„ã¿ã‚’ãƒ•ãƒ«æ´»ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã£ã¦ã‹ã€
ä»Šå›ã®å¤‰æ›´ç‚¹ã§ã‚‚ ESM ã‚’è€ƒæ…®ã—ãŸå¤‰æ›´ãŒå¤šãå…¥ã£ãŸå°è±¡ã‚’å—ã‘ã¾ã™ã€‚</p>
<p>å€‹äººçš„ã«ã¯ã€ã¾ã  Experimental ã§ã¯ã‚ã‚Šã¾ã™ãŒ <code>Esbuild Deps Optimization at Build Time</code> ã«ã‚ã‚‹ã€
ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚‚ esbuild ã‚’åˆ©ç”¨å¯èƒ½ã«ãªã‚‹æœªæ¥ãŒæ¥½ã—ã¿ã§ã™ã€‚</p>
</div></div><style data-emotion="css xjpton">.css-xjpton{margin-top:1.6rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:flex-end;}.css-xjpton .tag{font-size:0.8rem;border:1px solid #888;color:#444;padding:0.2rem 0.4rem;cursor:pointer;margin-right:0.8rem;border-radius:2px;}.css-xjpton .tag:link,.css-xjpton .tag:visited{color:#444;}</style><div class="css-xjpton"><a class="tag" href="/frontend-expert/tags/Vite">Vite</a></div><style data-emotion="css 1ees6rw">.css-1ees6rw{margin-top:32px;}.css-1ees6rw .tweetButton{width:88px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:4px;font-size:12px;background-color:#1d9bf0;position:relative;height:20px;box-sizing:border-box;padding:1px 12px 1px 12px;color:#fff;border-radius:9999px;font-weight:500;cursor:pointer;vertical-align:top;}.css-1ees6rw .tweetButton:hover{background-color:#0c7abf;}.css-1ees6rw .tweetButton svg{display:inline-block;width:12px;height:12px;margin-right:4px;}</style><p class="css-1ees6rw"><a href="" class="tweetButton" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>ãƒ„ã‚¤ãƒ¼ãƒˆ<!-- --></a></p><style data-emotion="css 12fmiz3">.css-12fmiz3{font-size:0.9rem;text-align:center;margin-top:16px;padding-top:16px;border-top:1px solid #ccc;}</style><div class="css-12fmiz3">è¨˜äº‹ã«é–¢ã™ã‚‹å ±å‘Šãªã©ã¯<!-- --><a href="https://github.com/cybozu/frontend-expert/issues" target="_blank" rel="noopener noreferrer">ã“ã¡ã‚‰</a>ã‹ã‚‰<!-- --></div></div></main><style data-emotion="css 1n88omd">.css-1n88omd{padding:2.4rem 0;background-color:var(--primary-color);color:white;}.css-1n88omd .content{max-width:var(--content-width);padding:0 1.2rem;box-sizing:border-box;margin:0 auto;}.css-1n88omd a{color:white;}.css-1n88omd ul{list-style:none;margin-bottom:2.5rem;}.css-1n88omd ul li{font-size:1.2rem;margin-bottom:0.5rem;}.css-1n88omd small{font-size:1rem;}</style><footer class="css-1n88omd"><div class="content"><ul><li><a href="https://cybozu.co.jp/" target="_blank" rel="noreferrer">ã‚µã‚¤ãƒœã‚¦ã‚º ä¼æ¥­æƒ…å ±</a></li><li><a href="https://www.cybozu.com/jp/" target="_blank" rel="noreferrer">cybozu.com</a></li><li><a href="https://blog.cybozu.io/" target="_blank" rel="noreferrer">ã‚µã‚¤ãƒœã‚¦ã‚ºã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ–ãƒ­ã‚° Cybozu Inside Out</a></li><li><a href="https://tech.cybozu.io/" target="_blank" rel="noreferrer">Cybozu Tech</a></li><li><a href="https://cybozu.co.jp/recruit/" target="_blank" rel="noreferrer">æ¡ç”¨æƒ…å ±</a></li></ul><small>Copyright Â© Cybozu, Inc.</small></div></footer></div>;<!-- --></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"type":"markdown","href":"/posts/vite-3.0","slug":"vite-3.0","content":"\u003cp\u003e2022/7/13ã«ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ Vite ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 3.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸ ğŸ‰\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://vitejs.dev/blog/announcing-vite3.html\"\u003eVite 3.0 is out! | Vite\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/vitejs/vite/blob/v3.0.0/packages/vite/CHANGELOG.md\"\u003eCHANGELOG\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://vitejs.dev/guide/migration.html\"\u003eMigration from v2 | Vite\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«å…¬é–‹ã•ã‚ŒãŸã‚¢ãƒŠã‚¦ãƒ³ã‚¹(\u003ca href=\"https://github.com/vitejs/vite/releases/tag/v3.0.0\"\u003eRelease v3.0.0 Â· vitejs/vite\u003c/a\u003e)ã®å†…å®¹ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€å¤‰æ›´ç‚¹ã‚’æ”¹ã‚ã¦ï¼‘ã¤ãšã¤æ˜ã‚Šä¸‹ã’ã¦ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚\u003c/p\u003e\n\u003ch3\u003eNew Documentation\u003c/h3\u003e\n\u003cp\u003eå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ(\u003ca href=\"https://ja.vitejs.dev/\"\u003evitejs.dev\u003c/a\u003e)ãŒ \u003ca href=\"https://vitepress.vuejs.org/\"\u003eVitePress\u003c/a\u003e ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ¼ãƒã‚’åˆ©ç”¨ã—ãŸå½¢ã§åˆ·æ–°ã•ã‚Œã¾ã—ãŸã€‚ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒè¡¨ç¤ºãªã©ãŒå¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003eã¾ãŸã€ã‚ã‚ã›ã¦æ¬¡ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã‚‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é–²è¦§ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://v2.vitejs.dev/\"\u003ev2.vitejs.dev\u003c/a\u003e - Vite 2.x ç³»ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://main.vitejs.dev/\"\u003emain.vitejs.dev\u003c/a\u003e - Vite ã®ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒã®å†…å®¹\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eCreate Vite Starter Templates\u003c/h3\u003e\n\u003cp\u003eVite ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Scaffold ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§ã‚ã‚‹ \u003ca href=\"https://github.com/vitejs/vite/tree/main/packages/create-vite\"\u003e\u003ccode\u003ecreate-vite\u003c/code\u003e\u003c/a\u003e ã«ã¤ã„ã¦ã€Vite 3.x ãŒåˆ©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\u003ch3\u003eDev Improvements\u003c/h3\u003e\n\u003ch4\u003eVite CLI\u003c/h4\u003e\n\u003cp\u003eãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆãŒ \u003ccode\u003e5173\u003c/code\u003eã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆãŒ \u003ccode\u003e4173\u003c/code\u003e ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã¯ä»¥å‰ã¯ \u003ccode\u003e3000\u003c/code\u003e ã¨ \u003ccode\u003e5000\u003c/code\u003e ã§ã—ãŸãŒã€MacOS ã§ãƒãƒ¼ãƒˆã®è¡çªãŒç™ºç”Ÿã™ã‚‹ãªã©ã®\u003ca href=\"https://github.com/vitejs/vite/issues/5707\"\u003eå•é¡ŒãŒã‚ã£ãŸ\u003c/a\u003eã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\u003cp\u003eã¡ãªã¿ã«ãªãœ \u003ccode\u003e5173\u003c/code\u003e ã¨ã„ã†ä¸­é€”åŠç«¯ãªæ•°å­—ãªã®ã ã‚ã†ï¼Ÿã¨æ€ã„èª¿ã¹ã¦ã¿ã¾ã—ãŸãŒã€ä»¥ä¸‹ã® Issue ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/vitejs/vite/pull/6330#issuecomment-1003405068\"\u003ehttps://github.com/vitejs/vite/pull/6330#issuecomment-1003405068\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eAt a team meeting we thought about 5173\nLike 5173 in leet for Vite | V I T Æ | V === Roman 5\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eV â€¦ 5\u003c/li\u003e\n\u003cli\u003eI â€¦ 1\u003c/li\u003e\n\u003cli\u003eT â€¦ 7\u003c/li\u003e\n\u003cli\u003eÆ â€¦ 3\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eã‚‰ã—ã„ã§ã™ã€‚cool\u003c/p\u003e\n\u003ch4\u003eImproved WebSocket Connection Strategy\u003c/h4\u003e\n\u003cp\u003eVite 2.x ã¾ã§ã¯ã€Proxy ã‚’çµŒç”±ã—ãŸã‚µãƒ¼ãƒãƒ¼ç¢ºç«‹ã«èª²é¡ŒãŒã‚ã£ãŸã¨ã®ã“ã¨ã§ã€3.0 ã‹ã‚‰ã¯ãã‚ŒãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/sapphi-red/vite-setup-catalogue\"\u003e\u003ccode\u003evite-setup-catalogue\u003c/code\u003e\u003c/a\u003e ã¨ã„ã†ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒªå†…ã«ã‚‚è¿½åŠ ã•ã‚ŒãŸã“ã¨ã§ã€ä»Šå¾Œã¯åŒãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ CI ã§æ¤œè¨¼ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã¨ã®ã“ã¨ã§ã™ã€‚\u003c/p\u003e\n\u003ch4\u003eCold Start Improvements\u003c/h4\u003e\n\u003cp\u003eã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã«ä¾å­˜é–¢ä¿‚ã‚’å¾Œã‹ã‚‰è§£æ±ºã™ã‚‹éš›ã«ã€ä¾å­˜ã®çŠ¶æ…‹ã«ã‚ˆã£ã¦ã¯ãƒ•ãƒ«ãƒªãƒ­ãƒ¼ãƒ‰ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã£ãŸã®ãŒã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¾å­˜ã‚’æ¸¡ã™ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ã§åŠ¹ç‡åŒ–ã•ã‚Œã€å›é¿å¯èƒ½ã«ãªã£ãŸã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\u003cp\u003eè©³ç´°: \u003ca href=\"https://github.com/vitejs/vite/pull/8869#issuecomment-1172902125\"\u003ehttps://github.com/vitejs/vite/pull/8869#issuecomment-1172902125\u003c/a\u003e\u003c/p\u003e\n\u003ch4\u003eimport.meta.glob\u003c/h4\u003e\n\u003cp\u003eVite ã§ã¯ä»¥å‰ã‹ã‚‰ \u003ca href=\"https://vitejs.dev/guide/features.html#glob-import\"\u003e\u003ccode\u003eGlob Import\u003c/code\u003e\u003c/a\u003e ã¨å‘¼ã°ã‚Œã‚‹æ©Ÿèƒ½ãŒå­˜åœ¨ã—ã€ç‰¹åˆ¥ãªé–¢æ•° \u003ccode\u003eimport.meta.glob\u003c/code\u003e ã‚’ä»‹ã—ã¦ glob å½¢å¼ã§è¨˜è¿°ã—ã¦ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå¯èƒ½ã§ã™ã€‚\u003c/p\u003e\n\u003cp\u003eVite 3.0 ã§ã¯æ©Ÿèƒ½ãŒå¼·åŒ–ã•ã‚Œã€ã‚ˆã‚ŠæŸ”è»ŸãªæŒ‡å®šãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMultiple Patterns : è¤‡æ•°ã® glob ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜è¿°\u003c/li\u003e\n\u003cli\u003eNegative Patterns : é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜è¿°\u003c/li\u003e\n\u003cli\u003eNamed Imports : ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸€éƒ¨ã®ã¿ã‚’æŒ‡å®šå¯èƒ½\u003c/li\u003e\n\u003cli\u003eCustom Queries : ã‚¯ã‚¨ãƒªã®ä»˜ä¸\u003c/li\u003e\n\u003cli\u003eEager Imports : Dynamic import ã®å›é¿\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003eAligning WASM Import with Future Standards\u003c/h4\u003e\n\u003cp\u003eVite 2.x ã‹ã‚‰ WebAssembly ã‚’\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003einit\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./example.wasm'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eã®å½¢ã§ import ã§ãã¾ã—ãŸãŒã€å°†æ¥çš„ã« ESM ã®ä»•æ§˜ã¨ã—ã¦ WebAssembly ãŒçµ±åˆã•ã‚ŒãŸå ´åˆã®ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’è€ƒæ…®ã—ã€\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003einit\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./example.wasm?init'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eã¨ã€\u003ccode\u003e?init\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒä»˜ä¸ã•ã‚ŒãŸå ´åˆã« Vite 2.x ä»¥å‰ã¨åŒæ§˜ã®æŒ™å‹•ã«ãªã‚‹ã‚ˆã†å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003eç¾çŠ¶ã§ \u003ccode\u003e?init\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã›ãšã« ESM ã¨ã—ã¦å‡¦ç†ã™ã‚‹å ´åˆã«ã¯ \u003ca href=\"https://github.com/Menci/vite-plugin-wasm\"\u003e\u003ccode\u003evite-plugin-wasm\u003c/code\u003e\u003c/a\u003eã®ã‚ˆã†ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆ©ç”¨ãŒå¿…é ˆã¨ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\u003ch3\u003eBuild Improvements\u003c/h3\u003e\n\u003ch4\u003eESM SSR Build by Default\u003c/h4\u003e\n\u003cp\u003eSSR ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å¤§åŠãŒ ESM ãƒ“ãƒ«ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸãŸã‚ã€\nVite3 ã§ã¯ SSR ãƒ“ãƒ«ãƒ‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå½¢å¼ãŒ ESM ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003eVite ã§ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å½¢å¼(CommonJS/ESM)ãªã©ã«å¿œã˜ã¦ã€é©å®œ Vite ã®å¤‰æ›ã‹ã‚‰åˆ‡ã‚Šé›¢ã™ï¼ˆå¤–éƒ¨åŒ–ã™ã‚‹ï¼‰ã“ã¨ã§ SSR æ™‚ã®å‡¦ç†ã‚’åŠ¹ç‡åŒ–ã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003eå‚è€ƒ: \u003ca href=\"https://v2.vitejs.dev/guide/ssr.html#ssr-externals\"\u003ehttps://v2.vitejs.dev/guide/ssr.html#ssr-externals\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eESM ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãªã£ãŸã“ã¨ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å¤–éƒ¨åŒ–ã•ã‚Œã‚‹ä¾å­˜ãŒå¢—ãˆã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã« SSR ãƒ“ãƒ«ãƒ‰ãŒå¯èƒ½ã«ãªã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\u003cp\u003eãªãŠã€ESM ã«ãªã‚‹ã¨å›°ã‚‹ã‚±ãƒ¼ã‚¹ã®ãŸã‚ã« \u003ccode\u003elegacy.buildSsrCjsExternalHeuristics: true\u003c/code\u003e ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\u003ch4\u003eImproved Relative Base Support\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003ebase\u003c/code\u003e ã« \u003ccode\u003e''\u003c/code\u003e ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç›¸å¯¾çš„ãªãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ã®æŒ‡å®šãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\nãƒ“ãƒ«ãƒ‰ã®æ®µéšã§ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãŒä¸æ˜ãªã‚±ãƒ¼ã‚¹ãªã©ã§å½¹ã«ç«‹ã¤ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\u003ch3\u003eExperimental Features\u003c/h3\u003e\n\u003ch4\u003eBuilt Asset Paths fine-grained Control (Experimental)\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eexperimental.renderBuiltUrl\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒ Experimental æ©Ÿèƒ½ã¨ã—ã¦å°å…¥ã•ã‚Œã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003eCDN ã§ã®é…å¸ƒãªã©ã‚’å‰æã¨ã—ãŸå ´åˆã€ãƒ“ãƒ«ãƒ‰ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸã‚¢ã‚»ãƒƒãƒˆã®ã†ã¡ä¸€éƒ¨ã®ã¿ URL ãŒç•°ãªã‚‹ã‚±ãƒ¼ã‚¹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eexperimental.renderBuiltUrl\u003c/code\u003e ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ãªã©ã‚’åˆ©ç”¨ã—ã¦ URL ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003eâ€»å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Šã‚³ãƒ¼ãƒ‰ã‚’æŠœç²‹\n\u003ca href=\"https://vitejs.dev/guide/build.html#advanced-base-options\"\u003ehttps://vitejs.dev/guide/build.html#advanced-base-options\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003eexperimental\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003erenderBuiltUrl\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilename\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e hostType\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'js'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'css'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'html'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'public'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'asset'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etype \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e'public'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token string\"\u003e'https://www.domain.com/'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e filename\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eextname\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eimporter\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e'.js'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e runtime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003ewindow.__assetsPath(\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e)\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token string\"\u003e'https://cdn.domain.com/assets/'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e filename\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch4\u003eEsbuild Deps Optimization at Build Time (Experimental)\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eoptimizeDeps.disabled: false\u003c/code\u003e æŒ‡å®šãŒ Experimental æ©Ÿèƒ½ã¨ã—ã¦å¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚\n\u003ca href=\"https://vitejs.dev/guide/migration.html#experimental\"\u003ehttps://vitejs.dev/guide/migration.html#experimental\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eVite ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯é–‹ç™ºæ™‚ã«ã¯ esbuild ã‚’ç”¨ã„ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ã¯ Rollup ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚\né–‹ç™ºæ™‚ã¨ãƒ“ãƒ«ãƒ‰æ™‚ã§ç•°ãªã‚‹ãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€Vite ã‚’åˆ©ç”¨ã™ã‚‹éš›ã«è€ƒæ…®ã™ã¹ãå¤§ãã„è¦ç´ ã®ä¸€ã¤ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003eå‚è€ƒ: \u003ca href=\"https://vitejs.dev/guide/why.html#why-not-bundle-with-esbuild\"\u003eWhy Not Bundle with esbuild?\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eoptimizeDeps.disabled: false\u003c/code\u003e ã‚’ç”¨ã„ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚‚ esbuild ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003eCJS ã®ã¿ã®ä¾å­˜é–¢ä¿‚ã‚‚ ESM ã«å¤‰æ›ã•ã‚Œã‚‹ãŸã‚ã€\u003ccode\u003e@rollup/plugin-commonjs\u003c/code\u003e ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒä¸è¦ã¨ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\u003ch4\u003eHMR Partial Accept (Experimental)\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eexperimental.hmrPartialAccept\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒ Experimental æ©Ÿèƒ½ã¨ã—ã¦å°å…¥ã•ã‚Œã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003eVite ã§ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„ãƒ„ãƒ¼ãƒ«ã®ä½œæˆè€…å‘ã‘ã« HMR ç”¨ã® API ã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚\n\u003ca href=\"https://vitejs.dev/guide/api-hmr.html\"\u003ehttps://vitejs.dev/guide/api-hmr.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eç¾çŠ¶ã® HMR API ã®ä»•çµ„ã¿ã§ã¯ã€HMR å¯èƒ½ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ãã†ã§ãªã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ··åœ¨ã—ã¦ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆã€\nãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’éƒ¨åˆ†çš„ã«å·®ã—æ›¿ãˆã‚‹ã“ã¨ãŒã§ããšã€éåŠ¹ç‡ãªæ›´æ–°ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003eå‚è€ƒ: \u003ca href=\"https://github.com/vitejs/vite/discussions/7309\"\u003eHMR partial accept Â· Discussion #7309 Â· vitejs/vite\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eæ–°ã—ã„ API ã§ã‚ã‚‹ \u003ccode\u003eimport.meta.hot.acceptExports\u003c/code\u003e ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€\nexport ã•ã‚Œã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¤ã„ã¦ã‚ˆã‚Šè©³ç´°ã‹ã¤åŠ¹ç‡çš„ã« HMR ã®åˆ¶å¾¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\u003ch3\u003eBundle Size Reduction\u003c/h3\u003e\n\u003cp\u003eVite è‡ªä½“ã®ã‚µã‚¤ã‚ºãŒå°ã•ããªã‚Šã¾ã—ãŸã€‚30%ã»ã©è»½é‡åŒ–ã•ã‚ŒãŸãã†ã§ã™ã€‚\u003c/p\u003e\n\u003cp\u003eMinify ç”¨ã® Terser ãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ãªã£ãŸã“ã¨ã‚„ã€ \u003ccode\u003enode-forge\u003c/code\u003e ãŒ \u003ccode\u003evitejs/plugin-basic-ssl\u003c/code\u003e ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ç½®ãæ›ã‚ã£ãŸã“ã¨ã«èµ·å› ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\u003ch3\u003eCompatibility Notes\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eNode.js ã®ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ 14.18+ / 16+ ã«ãªã‚Šã¾ã—ãŸ\u003c/li\u003e\n\u003cli\u003eVite è‡ªä½“ãŒ ESM ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚CJSçµŒç”±ã§åˆ©ç”¨ã™ã‚‹å ´åˆã¯ CJS Proxy çµŒç”±ã¨ãªã‚Šã¾ã™\n\u003cul\u003e\n\u003cli\u003eå‚è€ƒ: teppeis/\u003ca href=\"https://zenn.dev/teppeis/articles/2022-07-npm-dual-pacakge-cjs-proxy\"\u003eVite 3 ãŒæ¡ç”¨ã—ãŸ CJS Proxy ã«ã‚ˆã‚‹ Dual Package æ§‹æˆ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eã‚µãƒãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ã®åŸºæº–ãŒ \u003ccode\u003e\"Native ESM\"\u003c/code\u003e \u003ccode\u003e\"Native ESM dynamic import\"\u003c/code\u003e \u003ccode\u003e\"import.meta\"\u003c/code\u003e ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã«ãªã‚Šã¾ã—ãŸ\u003c/li\u003e\n\u003cli\u003eSSR ãŠã‚ˆã³ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¢ãƒ¼ãƒ‰ã«ãŠã„ã¦ã€JS ã®æ‹¡å¼µå­ã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦é©åˆ‡ãªæ‹¡å¼µå­ãŒé¸æŠã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ãŸç‚¹ã¯æ³¨æ„ãŒå¿…è¦ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\nMigration Guide ã«ã‚ˆã‚‹ã¨ã€ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã«ãªã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eChrome \u003e=87\u003c/li\u003e\n\u003cli\u003eFirefox \u003e=78\u003c/li\u003e\n\u003cli\u003eSafari \u003e=13\u003c/li\u003e\n\u003cli\u003eEdge \u003e=88\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eã¨ã„ã†ã‚ã‘ã§ç°¡å˜ãª Vite 3.0 ã®å†…å®¹ã®ãŠã•ã‚‰ã„ã§ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003eVite ã¯ã‚‚ã¨ã‚‚ã¨ Native ESM ã‚’å‰æã¨ã—ãŸä»•çµ„ã¿ã‚’ãƒ•ãƒ«æ´»ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã£ã¦ã‹ã€\nä»Šå›ã®å¤‰æ›´ç‚¹ã§ã‚‚ ESM ã‚’è€ƒæ…®ã—ãŸå¤‰æ›´ãŒå¤šãå…¥ã£ãŸå°è±¡ã‚’å—ã‘ã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003eå€‹äººçš„ã«ã¯ã€ã¾ã  Experimental ã§ã¯ã‚ã‚Šã¾ã™ãŒ \u003ccode\u003eEsbuild Deps Optimization at Build Time\u003c/code\u003e ã«ã‚ã‚‹ã€\nãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚‚ esbuild ã‚’åˆ©ç”¨å¯èƒ½ã«ãªã‚‹æœªæ¥ãŒæ¥½ã—ã¿ã§ã™ã€‚\u003c/p\u003e\n","metaData":{"title":"Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã™ã‚‹","author":"mugi","createdAt":"2022-07-27","summary":"Vite 3.0 ã®å†…å®¹ã‚’ãŠã•ã‚‰ã„ã—ã¾ã™","tags":["Vite"],"updatedAt":"2022-07-27"}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"vite-3.0"},"buildId":"lexGd3PcBj50c4MQ9j4U7","assetPrefix":"/frontend-expert","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>