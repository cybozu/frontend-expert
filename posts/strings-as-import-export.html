<!DOCTYPE html><html lang="ja"><head><title>なぜ ES2022 で文字列リテラルを使った import/export ができるようになるのか | サイボウズ フロントエンドエキスパートチーム</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="description" content="ES2022 に含まれる予定の、識別子ではなく文字列リテラルを使って import/export できるようになる ECMAScript の仕様変更について解説します"/><link rel="icon" type="image/png" sizes="32x32" href="/frontend-expert/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/frontend-expert/icons/favicon-16x16.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="なぜ ES2022 で文字列リテラルを使った import/export ができるようになるのか | サイボウズ フロントエンドエキスパートチーム"/><meta name="twitter:description" content="ES2022 に含まれる予定の、識別子ではなく文字列リテラルを使って import/export できるようになる ECMAScript の仕様変更について解説します"/><meta name="twitter:image " content="https://cybozu.github.io/frontend-expert/ogp/posts/strings-as-import-export.jpg"/><meta property="og:type" content="article"/><meta property="og:title" content="なぜ ES2022 で文字列リテラルを使った import/export ができるようになるのか | サイボウズ フロントエンドエキスパートチーム"/><meta property="og:site_name" content="サイボウズ フロントエンドエキスパートチーム"/><meta property="og:description" content="ES2022 に含まれる予定の、識別子ではなく文字列リテラルを使って import/export できるようになる ECMAScript の仕様変更について解説します"/><meta property="og:image" content="https://cybozu.github.io/frontend-expert/ogp/posts/strings-as-import-export.jpg"/><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/frontend-expert/feeds/atom.xml"/><meta name="next-head-count" content="16"/><link rel="preload" href="/frontend-expert/_next/static/css/76ea63cd4865a048.css" as="style"/><link rel="stylesheet" href="/frontend-expert/_next/static/css/76ea63cd4865a048.css" data-n-g=""/><link rel="preload" href="/frontend-expert/_next/static/css/c09a317f13b9466c.css" as="style"/><link rel="stylesheet" href="/frontend-expert/_next/static/css/c09a317f13b9466c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/frontend-expert/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/frontend-expert/_next/static/chunks/webpack-729603c643508a46.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/framework-46c1838cec3c6950.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/main-e4d3653ad74fa65d.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/_app-7e325b03054f9a77.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/a9a7754c-8a0c949a3a0bc36e.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/247-11af9d0831f37191.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/43-fcd2a5e3bfcce006.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/posts/%5Bslug%5D-7e69b582971b06aa.js" defer=""></script><script src="/frontend-expert/_next/static/wtnTllHw_yL6P5GXfqR59/_buildManifest.js" defer=""></script><script src="/frontend-expert/_next/static/wtnTllHw_yL6P5GXfqR59/_ssgManifest.js" defer=""></script><script src="/frontend-expert/_next/static/wtnTllHw_yL6P5GXfqR59/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout_layout__3Ma1v"><header class="Header_header__91Nua"><div class="Header_content__JIbnm"><h1><a href="/frontend-expert"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9Ijc4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></span><img alt="Frontend Expert Team Logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Frontend Expert Team Logo" src="/frontend-expert/logo.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></h1><nav class="Header_navigation__2pqVF"><ul><li><a href="/frontend-expert/members">Members</a></li><li><a href="/frontend-expert/posts">Posts</a></li><li><a href="https://cybozu.co.jp/company/job/recruitment/list/front_end_expert.html" target="_blank" rel="noopener noreferrer">Recruiting</a></li></ul></nav></div></header><main class="Layout_main__3t9q9"><div class="Layout_content__2clJn"><h1 class="post_title__3XN0E"><span style="word-break: keep-all; overflow-wrap: break-word;">なぜ ES2022 で<wbr>文字列リテラルを<wbr>使った<wbr> import/export が<wbr>できるようになるのか</span></h1><div class="post_publishedOn__21gUy">Published on<!-- --> <time dateTime="2021-12-06" itemProp="datePublished">2021-12-06</time></div><div class="post_authors__1qHCs"><div class="post_author__247MG"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:60px;height:60px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="sosukesuzuki" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="sosukesuzuki" src="/frontend-expert//member-icons/sosukesuzuki.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><div class="post_authorInfo__3EEyk"><div class="post_label__20GSj">Author</div><span class="post_authorName__2uB4F"><a href="/frontend-expert/members/sosukesuzuki">sosukesuzuki</a></span><ul><li><a href="https://twitter.com/__sosukesuzuki" aria-label="twitter" class="post_icon__3gvmY" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li><a href="https://github.com/sosukesuzuki" aria-label="github" class="post_icon__3gvmY" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github-alt" class="svg-inline--fa fa-github-alt fa-w-15 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path fill="currentColor" d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg></a></li></ul></div></div></div><div class="PostContent_post__1E6BI"><div><p>11 月 11 日に、以前から一部で注目されていた<a href="https://github.com/tc39/ecma262/pull/2154">ある Pull Request</a> が <a href="https://github.com/tc39/ecma262">tc39/ecma262</a> にマージされました。</p>
<p>この Pull Request がマージされたことで、識別子ではなく文字列リテラルを使った import/export が可能になりました。</p>
<p>この仕様変更はプロポーザルという形で扱われてはいませんが、構文上の影響があるので、JavaScript ユーザーとして知っておくに越したことはないものになります。</p>
<h2>概要</h2>
<p>まず具体例を示します。</p>
<p>今回の変更によって、次のように import/export する際の名前として文字列リテラルを使えるようになります。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token punctuation">{</span> foo <span class="token keyword module">as</span> <span class="token string">"😃 hey hey"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token punctuation">{</span> <span class="token string">"😃 hey hey"</span> <span class="token keyword module">as</span> foo <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"./module.js"</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo</span>
</code></pre></div>
<p>基本的にはこれだけです。</p>
<h2>詳解</h2>
<p>ここからは仕様上の用語を使って解説をします。</p>
<p>この変更が入る前の ECMAScript では <a href="https://tc39.es/ecma262/#prod-ImportSpecifier"><code>ImportSpecifier</code></a> で <code>as</code> を使う場合 <code>as</code> の左側は <a href="https://tc39.es/ecma262/#prod-IdentifierName"><code>IdentifierName</code></a> でなければいけませんでした。
また <a href="https://tc39.es/ecma262/#prod-ExportSpecifier"><code>ExportSpecifier</code></a> は、単一の <code>IdentifierName</code> もしくは、<code>as</code> を使う場合は <code>as</code> の左側と右側は両方とも <code>IdentifierName</code> でなければいけませんでした。</p>
<p>今回の変更によって、新たに <a href="https://tc39.es/ecma262/#prod-ModuleExportName"><code>ModuleExportName</code></a> という構文が追加されました。<code>ModuleExportName</code> は、<code>IdentifierName</code> もしくは <a href="https://tc39.es/ecma262/#prod-StringLiteral"><code>StringLiteral</code></a> の形をとります。
たとえば、識別子 <code>foo</code> や 文字列リテラル <code>"😃 hey hey"</code> は <code>ModuleExportName</code> です。</p>
<p>そして、<code>ImportSpecifier</code> で <code>as</code> を使う場合 <code>as</code> の左側は <code>ModuleExportName</code> の形をとるようになりました。したがって、次の例の <code>import</code> 文はすべて構文として妥当です。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> foo <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> foo <span class="token keyword module">as</span> bar <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token punctuation">{</span> <span class="token string">"😃 hey hey"</span> <span class="token keyword module">as</span> baz <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
</code></pre></div>
<p><code>ExportSpecifier</code> は、単一の <code>ModuleExportName</code> もしくは、 <code>as</code> を使う場合 <code>as</code> の左側と右側は両方とも <code>ModuleExportName</code> の形をとるようになりました。したがって、次の例の <code>export</code> 文はすべて構文として妥当です。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span> foo <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token punctuation">{</span> <span class="token string">"😃 hey hey"</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span> foo <span class="token keyword module">as</span> foo <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token punctuation">{</span> foo <span class="token keyword module">as</span> <span class="token string">"😃 hey hey"</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token punctuation">{</span> <span class="token string">"😃 hey hey"</span> <span class="token keyword module">as</span> foo <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token punctuation">{</span> <span class="token string">"😃 hey hey"</span> <span class="token keyword module">as</span> <span class="token string">"😃 hey hey"</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
</code></pre></div>
<p>ただし <code>ExportSpecifier</code> の <code>ModuleExportName</code> を <code>StringLiteral</code> にできるのは、その <code>ExportSpecifier</code> を含む <a href="https://tc39.es/ecma262/#prod-ExportDeclaration"><code>ExportDeclaration</code></a> に <a href="https://tc39.es/ecma262/#prod-FromClause"><code>FromClause</code></a> が存在する場合のみです。</p>
<p>たとえば、次のコードは <code>ExportDeclaration</code> に <code>FromClause</code> が存在しないので <code>ExportSpecifier</code> で <code>StringLiteral</code> を使うことはできません。</p>
<!-- prettier-ignore -->
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// できない</span>
<span class="token keyword module">export</span> <span class="token punctuation">{</span> <span class="token string">"😃 hey hey"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p>一方で、次のコードは <code>FromClause</code> が存在するので、<code>ExportSpecifier</code> で <code>StringLiteral</code> を使うことができます。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// できる</span>
<span class="token keyword module">export</span> <span class="token punctuation">{</span> <span class="token string">"😃 hey hey"</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"mod"</span><span class="token punctuation">;</span>
</code></pre></div>
<h2>文字列の制約</h2>
<p><code>StringLiteral</code> は通常の JavaScript の文字列リテラルです。たとえば <code>"foo"</code> とか <code>"bar"</code> みたいな形をしたものです。</p>
<p><code>ModuleExportName</code> は <code>StringLiteral</code> を含むので、全ての文字列リテラルを <code>ModuleExportName</code> として使えるようにみえますが、実際には少々異なります。<code>ModuleExportName</code> として使える <code>StringLiteral</code> には制限があります。</p>
<p><strong><code>ModuleExportName</code> として使える <code>StringLiteral</code> は、<a href="https://www.unicode.org/glossary/#well_formed_code_unit_sequence">Well-Formed Code Unit Sequence</a> でなければいけません。</strong>
このことは、<a href="https://tc39.es/ecma262/#sec-module-semantics">Module Semantics</a> の Eary Errros 内の <a href="https://tc39.es/ecma262/#_ref_6583">https://tc39.es/ecma262/#_ref_6583</a> に記載されています。</p>
<h3>Well-Formed Code Unit Sequence とは</h3>
<p>JavaScript の文字列は UTF-16 でエンコードされます。そのため、実際には JavaScript の文字列というのは 16 ビットの整数で表現される Unicode のコードユニットの並びでしかありません。</p>
<p>UTF-16 では基本的に 1 文字につき 16 ビットで表現されます。しかし、Unicode の BMP(基本多言語面)に収まらない文字は 16 ビットのコードユニットを二つ並べたペアで表現します。</p>
<p>たとえば、ひらがなの <code>あ</code> は BMP に含まれており、一つのコードユニット(<code>0x3042</code>)で表されます。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"\u3042"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// あ</span>
</code></pre></div>
<p>一方で、<code>𠮟</code>(<code>叱</code> ではないことに注意) は BMP に含まれないので、二つのコードユニット(<code>0xD842</code> と <code>0xDF9F</code>)で表されます。このようなコードユニットのペアを、サロゲートペアといいます。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"\uD842\uDF9F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 𠮟</span>
</code></pre></div>
<p>前述のとおり、JavaScript の文字列は 16 ビットの整数で表現されるコードユニットの並びでしかありません。したがって、<code>𠮟</code> を構成する二つのコードユニットである <code>0xD842</code> と <code>0xDF9F</code> のうち一つだけを含む文字列も作ることができます。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"\uD842"</span><span class="token punctuation">;</span>
</code></pre></div>
<p>しかし、<code>0xD842</code> 単体に対応する文字は Unicode には存在しません。</p>
<p>このような、<strong>対になっていないサロゲートペアを含むような文字列は Well-Formed Code Unit Sequence ではありません。</strong></p>
<p>逆に、対になっていないサロゲートペアを許容しないような文字列を <strong>Well-Formed Code Unit Sequence</strong> といいます。つまり、大雑把にいえば「ちゃんと文字になっているコードユニットで構成された文字列」ということです。</p>
<p>ちなみに、このような Well-Formed な文字列は WebIDL では <a href="https://developer.mozilla.org/ja/docs/Web/API/USVString">USVString</a> と呼ばれています。</p>
<h3>新しい Abstract Operation <code>IsStringWellFormedUnicode</code></h3>
<p>この仕様の変更に伴って、<a href="https://tc39.es/ecma262/#sec-isstringwellformedunicode"><code>IsStringWellFormedUnicode</code></a> という新しい Abstract Operation が追加されました。</p>
<p>この Abstract Operation は、引数の文字列が Well-Formed Code Unit Sequence かどうかを判定します。</p>
<p>前述した <code>ModuleExportName</code> のための Early Errors では、この <code>IsStringWellFormedUnicode</code> Abstract Operation を使って <code>StringLiteral</code> が Well-Formed Code Unit Sequence かどうかの判定を行います。そしてもし Well-Formed Code Unit Sequence でなければ Syntax Error になります。</p>
<h2>仕様変更のモチベーション</h2>
<p>実はこの仕様の変更は、今の Web の仕様ではほとんど役に立つことはありません。</p>
<p>この変更が行われたモチベーションは、<strong>将来的に</strong> WebAssembly の Module との相互運用性を向上させるためです。</p>
<p>この背景を理解するために、おさえておくべき前提が二つあります。</p>
<p>１つ目は、WebAssembly の Module では関数を export するときに文字列で名前をつけるということです。
たとえば次の例では <code>$add</code> という関数を <code>"add"</code> という名前で export しています。</p>
<div class="remark-highlight"><pre class="language-wasm"><code class="language-wasm"><span class="token punctuation">(</span><span class="token keyword">module</span>
  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token variable">$add</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token variable">$lhs</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token variable">$rhs</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">result</span> <span class="token keyword">i32</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span>.get <span class="token variable">$lhs</span>
    <span class="token keyword">local</span>.get <span class="token variable">$rhs</span>
    <span class="token keyword">i32<span class="token punctuation">.</span>add</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">"add"</span> <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token variable">$add</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div>
<p>２つ目は、WebAssembly の Module を JavaScript から import できるようにしたい、という動きがあるということです。<a href="https://github.com/WebAssembly/esm-integration">WebAsembly/esm-integration</a> などで、その動きを見ることができます。</p>
<p>簡単にいえば、次のようにして簡単に WebAssembly の Module を JavaScript から扱えるようにしたいということです。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> add <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"foo.wasm"</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div>
<p>現在の WebAssembly および ECMAScript の仕様では、このような形で JavaScript 側から WebAssembly の Module を読み込むことはできません。</p>
<p>これらを前提として上で、次の例について考えます。</p>
<p>この例は前述したものとほとんど変わりませんが、<code>export</code> の後ろが <code>"add"</code> ではなく <code>"+"</code> になっています。<code>export</code> の後ろには文字列を置くことができるので、これは妥当な Module です。</p>
<div class="remark-highlight"><pre class="language-wasm"><code class="language-wasm"><span class="token punctuation">(</span><span class="token keyword">module</span>
  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token variable">$add</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token variable">$lhs</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token variable">$rhs</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">result</span> <span class="token keyword">i32</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span>.get <span class="token variable">$lhs</span>
    <span class="token keyword">local</span>.get <span class="token variable">$rhs</span>
    <span class="token keyword">i32<span class="token punctuation">.</span>add</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token variable">$add</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div>
<p>将来、WebAssembly の Module を JavaScript から import できるようになったときに、このモジュールから <code>+</code> 関数を named import したいとします。
<strong>しかし、<code>+</code> は <code>IdentifierName</code> ではないので、今までの ECMAScript の仕様では named import できませんでした。</strong></p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// できない</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token operator">+</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"foo.wasm"</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// できない</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token operator">+</span> <span class="token keyword module">as</span> add <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"foo.wasm"</span><span class="token punctuation">;</span>
</code></pre></div>
<p>今回の変更によって <code>ImportSpecifier</code> の <code>as</code> の左側に <code>StringLiteral</code> を置けるようになったことで、次のように書るようになりました。</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// ES2022 でできる</span>
<span class="token keyword module">import</span> <span class="token punctuation">{</span> <span class="token string">"+"</span> <span class="token keyword module">as</span> add <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"foo.wasm"</span><span class="token punctuation">;</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div>
<p>このような書き方は ES2022 では構文上は妥当ですが、実際にはまだ WebAssembly の import はできません。</p>
<p>また、<code>ModuleExportName</code> の <code>StringLiteral</code> が Well-Formed Code Unit Sequence でなければならないという制約が存在するのも、WebAssembly との相互運用のためです。
WebAssembly のテキストフォーマットで <code>export</code> の後に続く文字列は Well-Formed Code Unit Sequence でなければいけないので、それと統一させたのでしょう。</p>
<h2>参考リンク</h2>
<ul>
<li>TC39
<ul>
<li><a href="https://github.com/tc39/ecma262/pull/2154">Normative: Arbitrary module namespace identifier names by bmeck · Pull Request #2154 · tc39/ecma262</a></li>
<li><a href="https://github.com/tc39/notes/blob/master/meetings/2020-09/sept-21.md#arbitrary-strings-as-exportimport-names">Arbitrary module namespace identifier names · tc39/notes/notes/sept-21.md</a></li>
<li><a href="https://github.com/tc39/proposal-import-reflection">tc39/proposal-import-reflection</a></li>
</ul>
</li>
<li>Babel
<ul>
<li><a href="https://github.com/babel/babel/pull/13195">Parse string export names by default (<code>moduleStringNames</code>) by nicolo-ribaudo · Pull Request #13195 · babel/babel</a></li>
<li><a href="https://babeljs.io/blog/2020/10/15/7.12.0#imports-and-exports-with-string-names-12091httpsgithubcombabelbabelpull12091">7.12.0 Released: TypeScript 4.1, strings as import/export names, and class static blocks · Babel</a></li>
</ul>
</li>
<li>MDN
<ul>
<li><a href="https://developer.mozilla.org/ja/docs/Glossary/Identifier">Identifier (識別子) - MDN Web Docs 用語集: ウェブ関連用語の定義</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/API/USVString">USVString - Web API | MDN</a></li>
</ul>
</li>
<li>ECMA262
<ul>
<li><a href="https://tc39.es/ecma262/#prod-ImportSpecifier">ImportSpecifier · ECMAScript® 2022 Language Specification</a></li>
<li><a href="https://tc39.es/ecma262/#prod-ExportSpecifier">ExportSpecifier · ECMAScript® 2022 Language Specification</a></li>
<li><a href="https://tc39.es/ecma262/#prod-ModuleExportName">ModuleExportName · ECMAScript® 2022 Language Specification</a></li>
<li><a href="https://tc39.es/ecma262/#sec-isstringwellformedunicode">IsStringWellFormedUnicode · ECMAScript® 2022 Language Specification</a></li>
</ul>
</li>
<li>Unicode
<ul>
<li><a href="https://www.unicode.org/glossary/#well_formed_code_unit_sequence">Well-Formed Code Unit Sequence · Glossary of Unicode Terms</a></li>
</ul>
</li>
<li>WebAssembly
<ul>
<li><a href="https://github.com/WebAssembly/esm-integration">WebAssembly/esm-integration: ECMAScript module integration</a></li>
<li><a href="https://webassembly.github.io/spec/core/text/values.html#names">Values — WebAssembly 1.1 (Draft 2021-12-02)</a></li>
<li><a href="https://github.com/WebAssembly/esm-integration/issues/39">ESM isn't suited for importing objects containing non-JavaScript identifiers · Issue #39 · WebAssembly/esm-integration</a></li>
</ul>
</li>
</ul>
</div></div><div class="Tags_tags__10UE-"><a class="Tags_tag__2cotv" href="/frontend-expert/tags/ECMAScript">ECMAScript</a></div><p class="TweetButton_tweetButton__3RBiP"><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false" data-lang="ja">Tweet</a></p><div class="PostContact_postContact__1BrFU">記事に関する報告などは<a href="https://github.com/cybozu/frontend-expert/issues" target="_blank" rel="noopener noreferrer">こちら</a>から</div></div></main><footer class="Footer_footer__2epqf"><div class="Footer_content__3ovcH"><ul><li><a href="https://cybozu.co.jp/">サイボウズ 企業情報</a></li><li><a href="https://www.cybozu.com/jp/">cybozu.com</a></li><li><a href="https://blog.cybozu.io/">サイボウズエンジニアのブログ Cybozu Inside Out</a></li><li><a href="https://tech.cybozu.io/">Cybozu Tech</a></li><li><a href="https://cybozu.co.jp/company/job/recruitment/">採用情報</a></li></ul><small>Copyright © Cybozu, Inc.</small></div></footer></div>;</div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"strings-as-import-export","content":"\u003cp\u003e11 月 11 日に、以前から一部で注目されていた\u003ca href=\"https://github.com/tc39/ecma262/pull/2154\"\u003eある Pull Request\u003c/a\u003e が \u003ca href=\"https://github.com/tc39/ecma262\"\u003etc39/ecma262\u003c/a\u003e にマージされました。\u003c/p\u003e\n\u003cp\u003eこの Pull Request がマージされたことで、識別子ではなく文字列リテラルを使った import/export が可能になりました。\u003c/p\u003e\n\u003cp\u003eこの仕様変更はプロポーザルという形で扱われてはいませんが、構文上の影響があるので、JavaScript ユーザーとして知っておくに越したことはないものになります。\u003c/p\u003e\n\u003ch2\u003e概要\u003c/h2\u003e\n\u003cp\u003eまず具体例を示します。\u003c/p\u003e\n\u003cp\u003e今回の変更によって、次のように import/export する際の名前として文字列リテラルを使えるようになります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e foo \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e foo \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./module.js\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efoo\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// foo\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e基本的にはこれだけです。\u003c/p\u003e\n\u003ch2\u003e詳解\u003c/h2\u003e\n\u003cp\u003eここからは仕様上の用語を使って解説をします。\u003c/p\u003e\n\u003cp\u003eこの変更が入る前の ECMAScript では \u003ca href=\"https://tc39.es/ecma262/#prod-ImportSpecifier\"\u003e\u003ccode\u003eImportSpecifier\u003c/code\u003e\u003c/a\u003e で \u003ccode\u003eas\u003c/code\u003e を使う場合 \u003ccode\u003eas\u003c/code\u003e の左側は \u003ca href=\"https://tc39.es/ecma262/#prod-IdentifierName\"\u003e\u003ccode\u003eIdentifierName\u003c/code\u003e\u003c/a\u003e でなければいけませんでした。\nまた \u003ca href=\"https://tc39.es/ecma262/#prod-ExportSpecifier\"\u003e\u003ccode\u003eExportSpecifier\u003c/code\u003e\u003c/a\u003e は、単一の \u003ccode\u003eIdentifierName\u003c/code\u003e もしくは、\u003ccode\u003eas\u003c/code\u003e を使う場合は \u003ccode\u003eas\u003c/code\u003e の左側と右側は両方とも \u003ccode\u003eIdentifierName\u003c/code\u003e でなければいけませんでした。\u003c/p\u003e\n\u003cp\u003e今回の変更によって、新たに \u003ca href=\"https://tc39.es/ecma262/#prod-ModuleExportName\"\u003e\u003ccode\u003eModuleExportName\u003c/code\u003e\u003c/a\u003e という構文が追加されました。\u003ccode\u003eModuleExportName\u003c/code\u003e は、\u003ccode\u003eIdentifierName\u003c/code\u003e もしくは \u003ca href=\"https://tc39.es/ecma262/#prod-StringLiteral\"\u003e\u003ccode\u003eStringLiteral\u003c/code\u003e\u003c/a\u003e の形をとります。\nたとえば、識別子 \u003ccode\u003efoo\u003c/code\u003e や 文字列リテラル \u003ccode\u003e\"😃 hey hey\"\u003c/code\u003e は \u003ccode\u003eModuleExportName\u003c/code\u003e です。\u003c/p\u003e\n\u003cp\u003eそして、\u003ccode\u003eImportSpecifier\u003c/code\u003e で \u003ccode\u003eas\u003c/code\u003e を使う場合 \u003ccode\u003eas\u003c/code\u003e の左側は \u003ccode\u003eModuleExportName\u003c/code\u003e の形をとるようになりました。したがって、次の例の \u003ccode\u003eimport\u003c/code\u003e 文はすべて構文として妥当です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e bar \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e baz \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eExportSpecifier\u003c/code\u003e は、単一の \u003ccode\u003eModuleExportName\u003c/code\u003e もしくは、 \u003ccode\u003eas\u003c/code\u003e を使う場合 \u003ccode\u003eas\u003c/code\u003e の左側と右側は両方とも \u003ccode\u003eModuleExportName\u003c/code\u003e の形をとるようになりました。したがって、次の例の \u003ccode\u003eexport\u003c/code\u003e 文はすべて構文として妥当です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token exports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e foo \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e foo \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eただし \u003ccode\u003eExportSpecifier\u003c/code\u003e の \u003ccode\u003eModuleExportName\u003c/code\u003e を \u003ccode\u003eStringLiteral\u003c/code\u003e にできるのは、その \u003ccode\u003eExportSpecifier\u003c/code\u003e を含む \u003ca href=\"https://tc39.es/ecma262/#prod-ExportDeclaration\"\u003e\u003ccode\u003eExportDeclaration\u003c/code\u003e\u003c/a\u003e に \u003ca href=\"https://tc39.es/ecma262/#prod-FromClause\"\u003e\u003ccode\u003eFromClause\u003c/code\u003e\u003c/a\u003e が存在する場合のみです。\u003c/p\u003e\n\u003cp\u003eたとえば、次のコードは \u003ccode\u003eExportDeclaration\u003c/code\u003e に \u003ccode\u003eFromClause\u003c/code\u003e が存在しないので \u003ccode\u003eExportSpecifier\u003c/code\u003e で \u003ccode\u003eStringLiteral\u003c/code\u003e を使うことはできません。\u003c/p\u003e\n\u003c!-- prettier-ignore --\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// できない\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e一方で、次のコードは \u003ccode\u003eFromClause\u003c/code\u003e が存在するので、\u003ccode\u003eExportSpecifier\u003c/code\u003e で \u003ccode\u003eStringLiteral\u003c/code\u003e を使うことができます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// できる\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"😃 hey hey\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"mod\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003e文字列の制約\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eStringLiteral\u003c/code\u003e は通常の JavaScript の文字列リテラルです。たとえば \u003ccode\u003e\"foo\"\u003c/code\u003e とか \u003ccode\u003e\"bar\"\u003c/code\u003e みたいな形をしたものです。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eModuleExportName\u003c/code\u003e は \u003ccode\u003eStringLiteral\u003c/code\u003e を含むので、全ての文字列リテラルを \u003ccode\u003eModuleExportName\u003c/code\u003e として使えるようにみえますが、実際には少々異なります。\u003ccode\u003eModuleExportName\u003c/code\u003e として使える \u003ccode\u003eStringLiteral\u003c/code\u003e には制限があります。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003eModuleExportName\u003c/code\u003e として使える \u003ccode\u003eStringLiteral\u003c/code\u003e は、\u003ca href=\"https://www.unicode.org/glossary/#well_formed_code_unit_sequence\"\u003eWell-Formed Code Unit Sequence\u003c/a\u003e でなければいけません。\u003c/strong\u003e\nこのことは、\u003ca href=\"https://tc39.es/ecma262/#sec-module-semantics\"\u003eModule Semantics\u003c/a\u003e の Eary Errros 内の \u003ca href=\"https://tc39.es/ecma262/#_ref_6583\"\u003ehttps://tc39.es/ecma262/#_ref_6583\u003c/a\u003e に記載されています。\u003c/p\u003e\n\u003ch3\u003eWell-Formed Code Unit Sequence とは\u003c/h3\u003e\n\u003cp\u003eJavaScript の文字列は UTF-16 でエンコードされます。そのため、実際には JavaScript の文字列というのは 16 ビットの整数で表現される Unicode のコードユニットの並びでしかありません。\u003c/p\u003e\n\u003cp\u003eUTF-16 では基本的に 1 文字につき 16 ビットで表現されます。しかし、Unicode の BMP(基本多言語面)に収まらない文字は 16 ビットのコードユニットを二つ並べたペアで表現します。\u003c/p\u003e\n\u003cp\u003eたとえば、ひらがなの \u003ccode\u003eあ\u003c/code\u003e は BMP に含まれており、一つのコードユニット(\u003ccode\u003e0x3042\u003c/code\u003e)で表されます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\\u3042\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// あ\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e一方で、\u003ccode\u003e𠮟\u003c/code\u003e(\u003ccode\u003e叱\u003c/code\u003e ではないことに注意) は BMP に含まれないので、二つのコードユニット(\u003ccode\u003e0xD842\u003c/code\u003e と \u003ccode\u003e0xDF9F\u003c/code\u003e)で表されます。このようなコードユニットのペアを、サロゲートペアといいます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\\uD842\\uDF9F\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 𠮟\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e前述のとおり、JavaScript の文字列は 16 ビットの整数で表現されるコードユニットの並びでしかありません。したがって、\u003ccode\u003e𠮟\u003c/code\u003e を構成する二つのコードユニットである \u003ccode\u003e0xD842\u003c/code\u003e と \u003ccode\u003e0xDF9F\u003c/code\u003e のうち一つだけを含む文字列も作ることができます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e str \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\\uD842\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eしかし、\u003ccode\u003e0xD842\u003c/code\u003e 単体に対応する文字は Unicode には存在しません。\u003c/p\u003e\n\u003cp\u003eこのような、\u003cstrong\u003e対になっていないサロゲートペアを含むような文字列は Well-Formed Code Unit Sequence ではありません。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e逆に、対になっていないサロゲートペアを許容しないような文字列を \u003cstrong\u003eWell-Formed Code Unit Sequence\u003c/strong\u003e といいます。つまり、大雑把にいえば「ちゃんと文字になっているコードユニットで構成された文字列」ということです。\u003c/p\u003e\n\u003cp\u003eちなみに、このような Well-Formed な文字列は WebIDL では \u003ca href=\"https://developer.mozilla.org/ja/docs/Web/API/USVString\"\u003eUSVString\u003c/a\u003e と呼ばれています。\u003c/p\u003e\n\u003ch3\u003e新しい Abstract Operation \u003ccode\u003eIsStringWellFormedUnicode\u003c/code\u003e\u003c/h3\u003e\n\u003cp\u003eこの仕様の変更に伴って、\u003ca href=\"https://tc39.es/ecma262/#sec-isstringwellformedunicode\"\u003e\u003ccode\u003eIsStringWellFormedUnicode\u003c/code\u003e\u003c/a\u003e という新しい Abstract Operation が追加されました。\u003c/p\u003e\n\u003cp\u003eこの Abstract Operation は、引数の文字列が Well-Formed Code Unit Sequence かどうかを判定します。\u003c/p\u003e\n\u003cp\u003e前述した \u003ccode\u003eModuleExportName\u003c/code\u003e のための Early Errors では、この \u003ccode\u003eIsStringWellFormedUnicode\u003c/code\u003e Abstract Operation を使って \u003ccode\u003eStringLiteral\u003c/code\u003e が Well-Formed Code Unit Sequence かどうかの判定を行います。そしてもし Well-Formed Code Unit Sequence でなければ Syntax Error になります。\u003c/p\u003e\n\u003ch2\u003e仕様変更のモチベーション\u003c/h2\u003e\n\u003cp\u003e実はこの仕様の変更は、今の Web の仕様ではほとんど役に立つことはありません。\u003c/p\u003e\n\u003cp\u003eこの変更が行われたモチベーションは、\u003cstrong\u003e将来的に\u003c/strong\u003e WebAssembly の Module との相互運用性を向上させるためです。\u003c/p\u003e\n\u003cp\u003eこの背景を理解するために、おさえておくべき前提が二つあります。\u003c/p\u003e\n\u003cp\u003e１つ目は、WebAssembly の Module では関数を export するときに文字列で名前をつけるということです。\nたとえば次の例では \u003ccode\u003e$add\u003c/code\u003e という関数を \u003ccode\u003e\"add\"\u003c/code\u003e という名前で export しています。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-wasm\"\u003e\u003ccode class=\"language-wasm\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emodule\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$add\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eparam\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$lhs\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ei32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eparam\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$rhs\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ei32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eresult\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ei32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elocal\u003c/span\u003e.get \u003cspan class=\"token variable\"\u003e$lhs\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elocal\u003c/span\u003e.get \u003cspan class=\"token variable\"\u003e$rhs\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ei32\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"add\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$add\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e２つ目は、WebAssembly の Module を JavaScript から import できるようにしたい、という動きがあるということです。\u003ca href=\"https://github.com/WebAssembly/esm-integration\"\u003eWebAsembly/esm-integration\u003c/a\u003e などで、その動きを見ることができます。\u003c/p\u003e\n\u003cp\u003e簡単にいえば、次のようにして簡単に WebAssembly の Module を JavaScript から扱えるようにしたいということです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e add \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo.wasm\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e現在の WebAssembly および ECMAScript の仕様では、このような形で JavaScript 側から WebAssembly の Module を読み込むことはできません。\u003c/p\u003e\n\u003cp\u003eこれらを前提として上で、次の例について考えます。\u003c/p\u003e\n\u003cp\u003eこの例は前述したものとほとんど変わりませんが、\u003ccode\u003eexport\u003c/code\u003e の後ろが \u003ccode\u003e\"add\"\u003c/code\u003e ではなく \u003ccode\u003e\"+\"\u003c/code\u003e になっています。\u003ccode\u003eexport\u003c/code\u003e の後ろには文字列を置くことができるので、これは妥当な Module です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-wasm\"\u003e\u003ccode class=\"language-wasm\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emodule\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$add\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eparam\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$lhs\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ei32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eparam\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$rhs\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ei32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eresult\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ei32\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elocal\u003c/span\u003e.get \u003cspan class=\"token variable\"\u003e$lhs\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elocal\u003c/span\u003e.get \u003cspan class=\"token variable\"\u003e$rhs\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ei32\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"+\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$add\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e将来、WebAssembly の Module を JavaScript から import できるようになったときに、このモジュールから \u003ccode\u003e+\u003c/code\u003e 関数を named import したいとします。\n\u003cstrong\u003eしかし、\u003ccode\u003e+\u003c/code\u003e は \u003ccode\u003eIdentifierName\u003c/code\u003e ではないので、今までの ECMAScript の仕様では named import できませんでした。\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// できない\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo.wasm\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// できない\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e add \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo.wasm\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e今回の変更によって \u003ccode\u003eImportSpecifier\u003c/code\u003e の \u003ccode\u003eas\u003c/code\u003e の左側に \u003ccode\u003eStringLiteral\u003c/code\u003e を置けるようになったことで、次のように書るようになりました。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// ES2022 でできる\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"+\"\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e add \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo.wasm\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのような書き方は ES2022 では構文上は妥当ですが、実際にはまだ WebAssembly の import はできません。\u003c/p\u003e\n\u003cp\u003eまた、\u003ccode\u003eModuleExportName\u003c/code\u003e の \u003ccode\u003eStringLiteral\u003c/code\u003e が Well-Formed Code Unit Sequence でなければならないという制約が存在するのも、WebAssembly との相互運用のためです。\nWebAssembly のテキストフォーマットで \u003ccode\u003eexport\u003c/code\u003e の後に続く文字列は Well-Formed Code Unit Sequence でなければいけないので、それと統一させたのでしょう。\u003c/p\u003e\n\u003ch2\u003e参考リンク\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTC39\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/ecma262/pull/2154\"\u003eNormative: Arbitrary module namespace identifier names by bmeck · Pull Request #2154 · tc39/ecma262\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/master/meetings/2020-09/sept-21.md#arbitrary-strings-as-exportimport-names\"\u003eArbitrary module namespace identifier names · tc39/notes/notes/sept-21.md\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-import-reflection\"\u003etc39/proposal-import-reflection\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eBabel\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/babel/babel/pull/13195\"\u003eParse string export names by default (\u003ccode\u003emoduleStringNames\u003c/code\u003e) by nicolo-ribaudo · Pull Request #13195 · babel/babel\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://babeljs.io/blog/2020/10/15/7.12.0#imports-and-exports-with-string-names-12091httpsgithubcombabelbabelpull12091\"\u003e7.12.0 Released: TypeScript 4.1, strings as import/export names, and class static blocks · Babel\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMDN\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Glossary/Identifier\"\u003eIdentifier (識別子) - MDN Web Docs 用語集: ウェブ関連用語の定義\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/API/USVString\"\u003eUSVString - Web API | MDN\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eECMA262\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.es/ecma262/#prod-ImportSpecifier\"\u003eImportSpecifier · ECMAScript® 2022 Language Specification\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.es/ecma262/#prod-ExportSpecifier\"\u003eExportSpecifier · ECMAScript® 2022 Language Specification\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.es/ecma262/#prod-ModuleExportName\"\u003eModuleExportName · ECMAScript® 2022 Language Specification\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.es/ecma262/#sec-isstringwellformedunicode\"\u003eIsStringWellFormedUnicode · ECMAScript® 2022 Language Specification\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eUnicode\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.unicode.org/glossary/#well_formed_code_unit_sequence\"\u003eWell-Formed Code Unit Sequence · Glossary of Unicode Terms\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eWebAssembly\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/WebAssembly/esm-integration\"\u003eWebAssembly/esm-integration: ECMAScript module integration\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://webassembly.github.io/spec/core/text/values.html#names\"\u003eValues — WebAssembly 1.1 (Draft 2021-12-02)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/WebAssembly/esm-integration/issues/39\"\u003eESM isn't suited for importing objects containing non-JavaScript identifiers · Issue #39 · WebAssembly/esm-integration\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","metaData":{"title":"なぜ ES2022 で文字列リテラルを使った import/export ができるようになるのか","author":"sosukesuzuki","createdAt":"2021-12-06","summary":"ES2022 に含まれる予定の、識別子ではなく文字列リテラルを使って import/export できるようになる ECMAScript の仕様変更について解説します","tags":["ECMAScript"],"updatedAt":"2021-12-06"}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"strings-as-import-export"},"buildId":"wtnTllHw_yL6P5GXfqR59","assetPrefix":"/frontend-expert","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>