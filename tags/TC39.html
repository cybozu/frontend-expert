<!DOCTYPE html><html lang="ja"><head><title>TC39 | サイボウズ フロントエンドエキスパートチーム</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="description" content="サイボウズ フロントエンドエキスパートチームのウェブサイトです"/><link rel="icon" type="image/png" sizes="32x32" href="/frontend-expert/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/frontend-expert/icons/favicon-16x16.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="TC39 | サイボウズ フロントエンドエキスパートチーム"/><meta name="twitter:description" content="サイボウズ フロントエンドエキスパートチームのウェブサイトです"/><meta name="twitter:image " content="https://cybozu.github.io/frontend-expert/ogp/ogp.jpg"/><meta property="og:type" content="article"/><meta property="og:title" content="TC39 | サイボウズ フロントエンドエキスパートチーム"/><meta property="og:site_name" content="サイボウズ フロントエンドエキスパートチーム"/><meta property="og:description" content="サイボウズ フロントエンドエキスパートチームのウェブサイトです"/><meta property="og:image" content="https://cybozu.github.io/frontend-expert/ogp/ogp.jpg"/><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/frontend-expert/feeds/atom.xml"/><meta name="next-head-count" content="16"/><link rel="preload" href="/frontend-expert/_next/static/css/d15332f741e09aa2.css" as="style"/><link rel="stylesheet" href="/frontend-expert/_next/static/css/d15332f741e09aa2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/frontend-expert/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/frontend-expert/_next/static/chunks/webpack-b0f44a7ac00bf3cb.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/framework-742985a85518e1e1.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/main-242b1a0e32bf923c.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/_app-ff35bec35d2bc313.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/247-c193c27d2f31cb66.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/836-a8ade638b2eac21f.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/tags/%5Btag%5D-30bc45de8d6c8183.js" defer=""></script><script src="/frontend-expert/_next/static/iynSChS7iaz43C6uR7NMp/_buildManifest.js" defer=""></script><script src="/frontend-expert/_next/static/iynSChS7iaz43C6uR7NMp/_ssgManifest.js" defer=""></script><script src="/frontend-expert/_next/static/iynSChS7iaz43C6uR7NMp/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css ruypru">.css-ruypru{width:100%;}.css-ruypru .main{max-width:100%;background-color:white;}.css-ruypru .main .content{margin:0 auto;max-width:var(--content-width);box-sizing:border-box;padding:1rem 1rem 1.5rem;min-height:400px;}</style><div class="css-ruypru"><style data-emotion="css 14l5li6">.css-14l5li6{padding:1.2rem 0 1rem;background-color:var(--primary-color);}.css-14l5li6 .content{max-width:var(--content-width);margin:0 auto;padding:0 1rem;box-sizing:border-box;}.css-14l5li6 h1{font-size:1.6rem;}.css-14l5li6 .navigation ul{margin:0;list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-14l5li6 .navigation ul li{padding:0.2rem 0;font-size:1rem;}.css-14l5li6 .navigation ul li:not(:last-child)::after{content:"/";margin:0 0.4rem;color:var(--light-font-color);}.css-14l5li6 a{color:var(--light-font-color);}</style><header class="css-14l5li6"><div class="content"><h1><a href="/frontend-expert"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27200%27%20height=%2778%27/%3e"/></span><img alt="Frontend Expert Team Logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Frontend Expert Team Logo" src="/frontend-expert/logo.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></h1><nav class="navigation"><ul><li><a href="/frontend-expert/members">Members</a></li><li><a href="/frontend-expert/posts">Posts</a></li><li><a href="https://cybozu.co.jp/company/job/recruitment/list/front_end_expert.html" target="_blank" rel="noopener noreferrer">Recruiting</a></li></ul></nav></div></header><main class="main"><div class="content"><h2>TC39</h2><style data-emotion="css 3x8wln">.css-3x8wln .item{font-size:1.1rem;padding:12px 4px 8px;}.css-3x8wln .item+.item{margin-top:8px;border-top:1px solid #ebebeb;}.css-3x8wln .title{font-size:1.2em;}.css-3x8wln .tags{margin-top:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:8px;}.css-3x8wln .tag{font-size:0.5em;border:1px solid;padding:2px 4px;border-radius:2px;color:currentColor;}.css-3x8wln .date{font-size:0.8em;}.css-3x8wln .author{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:8px;padding-top:8px;}.css-3x8wln .author img{border-radius:4px;}</style><div class="css-3x8wln"><div class="item"><a href="/frontend-expert/posts/tc39-meeting-2022-06"><div class="title">ECMAScriptの最新動向 2022年06月版</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="sosukesuzuki" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="sosukesuzuki" src="/frontend-expert//member-icons/sosukesuzuki.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2022-07-11</span></div><div class="tags"><span class="tag">TC39</span><span class="tag">ECMAScript</span></div></a></div><div class="item"><a href="/frontend-expert/posts/tc39-meeting-2022-03"><div class="title">ECMAScriptの最新動向 2022年03月版</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="sosukesuzuki" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="sosukesuzuki" src="/frontend-expert//member-icons/sosukesuzuki.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2022-06-13</span></div><div class="tags"><span class="tag">TC39</span><span class="tag">ECMAScript</span></div></a></div><div class="item"><a href="/frontend-expert/posts/tc39-meeting-2022-01"><div class="title">ECMAScriptの最新動向 2022年01月版</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="sosukesuzuki" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="sosukesuzuki" src="/frontend-expert//member-icons/sosukesuzuki.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2022-03-09</span></div><div class="tags"><span class="tag">TC39</span><span class="tag">ECMAScript</span></div></a></div><div class="item"><a href="/frontend-expert/posts/tc39-meeting-2021-12"><div class="title">ECMAScriptの最新動向 2021年12月版</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="sosukesuzuki" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="sosukesuzuki" src="/frontend-expert//member-icons/sosukesuzuki.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2022-01-24</span></div><div class="tags"><span class="tag">TC39</span><span class="tag">ECMAScript</span></div></a></div><div class="item"><a href="/frontend-expert/posts/tc39-meeting-2021-10"><div class="title">ECMAScriptの最新動向 2021年11月版</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="sosukesuzuki" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="sosukesuzuki" src="/frontend-expert//member-icons/sosukesuzuki.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2021-11-02</span></div><div class="tags"><span class="tag">TC39</span><span class="tag">ECMAScript</span></div></a></div></div></div></main><style data-emotion="css 1n88omd">.css-1n88omd{padding:2.4rem 0;background-color:var(--primary-color);color:white;}.css-1n88omd .content{max-width:var(--content-width);padding:0 1.2rem;box-sizing:border-box;margin:0 auto;}.css-1n88omd a{color:white;}.css-1n88omd ul{list-style:none;margin-bottom:2.5rem;}.css-1n88omd ul li{font-size:1.2rem;margin-bottom:0.5rem;}.css-1n88omd small{font-size:1rem;}</style><footer class="css-1n88omd"><div class="content"><ul><li><a href="https://cybozu.co.jp/">サイボウズ 企業情報</a></li><li><a href="https://www.cybozu.com/jp/">cybozu.com</a></li><li><a href="https://blog.cybozu.io/">サイボウズエンジニアのブログ Cybozu Inside Out</a></li><li><a href="https://tech.cybozu.io/">Cybozu Tech</a></li><li><a href="https://cybozu.co.jp/company/job/recruitment/">採用情報</a></li></ul><small>Copyright © Cybozu, Inc.</small></div></footer></div>;<!-- --></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"type":"markdown","href":"/posts/tc39-meeting-2022-06","slug":"tc39-meeting-2022-06","content":"\u003cp\u003eこの記事では2022年06月06日~09日に開催された TC39 meeting 90th で議題に上がったプロポーザルを紹介します。\u003c/p\u003e\n\u003ch3\u003eFor Stage 4\u003c/h3\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-array-find-from-last/\"\u003e\u003ccode\u003efindLast\u003c/code\u003e / \u003ccode\u003efindLastIndex\u003c/code\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 4 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003efindLast\u003c/code\u003e と \u003ccode\u003efindLastIndex\u003c/code\u003e は、\u003ccode\u003eArray.prototype.find\u003c/code\u003e と \u003ccode\u003eArray.prototype.findIndex\u003c/code\u003e の逆から走査するバージョンです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e arr \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eprop1\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eprop2\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eprop1\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eprops2\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"bar\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e obj1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e arr\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eelement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e element\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprop1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprop2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// \"foo\"\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e obj2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e arr\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efindLast\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eelement\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e element\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprop1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprops\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// \"bar\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのミーティングの時点で V8、JavaScriptCore(フラグ付き)、ChakraCore(フラグ付き) にはすでに実装されており、\u003ca href=\"https://spidermonkey.dev/blog/2022/06/30/newsletter-firefox-102-103.html\"\u003eSpiderMonkey でも後日実装されたようです\u003c/a\u003e。\u003c/p\u003e\n\u003cp\u003e(余談ですが筆者は、このプロポーザルのスライド資料を読んで ChakraCore の開発が未だに継続されていることと TC39 プロセスにおける実装の一つとして数えられていることをはじめて知りました。)\u003c/p\u003e\n\u003ch2\u003eFor Stage 3\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-symbols-as-weakmap-keys\"\u003eSymbols as WeakMap keys\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 3 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eSymbols as WeakMap keys は WeakMap のキーとして Symbol を使えるようにするプロポーザルです。\u003c/p\u003e\n\u003cp\u003e提案の概要については\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://sosukesuzuki.dev/posts/symbols-as-weakmap-keys\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eを見てください。\u003c/p\u003e\n\u003cp\u003eこれまでの流れについては\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://cybozu.github.io/frontend-expert/posts/tc39-meeting-2022-01\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eを見てください。\u003c/p\u003e\n\u003cp\u003eSymbols as WeakMap keys が一見シンプルながらこれまで Stage 2 のままだったのは、グローバルシンボルレジストリに登録された symbol や well-known symbols などのいわゆる eternal symbol を WeakMap のキーとして許容するかどうか、という論点のためでした。\u003c/p\u003e\n\u003cp\u003eスライド( \u003ca href=\"http://www.rricard.me/serve/tc39-jun2022-symbols-as-wm-keys.pdf\"\u003ehttp://www.rricard.me/serve/tc39-jun2022-symbols-as-wm-keys.pdf\u003c/a\u003e ) 上では次のように書かれています。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e通常の Symbol コンストラクタで作られる unique symbols は WeakMap のキーとして許容する\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSymbol.for(\"...\")\u003c/code\u003e で作られるグローバルシンボルレジストリに登録された registered symbols は WeakMap のキーとして許容しない\u003c/li\u003e\n\u003cli\u003ewell-known symbols は WeakMap のキーとして許容する\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e実際 \u003ca href=\"https://tc39.es/proposal-symbols-as-weakmap-keys/\"\u003ehttps://tc39.es/proposal-symbols-as-weakmap-keys/\u003c/a\u003e を見る限り WeakMap のキーとして妥当かどうかを判断するために使われている abstract operation \u003ca href=\"https://tc39.es/proposal-symbols-as-weakmap-keys/#sec-canbeheldweakly-abstract-operation\"\u003e\u003ccode\u003eCanBeHeldWeakly\u003c/code\u003e\u003c/a\u003e では registerd symbols を許容していないようです。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-modifiers\"\u003eRegExp Modifiers\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 3 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eRegExp Modifiers は正規表現パターンの中でのフラグの変更を可能にするプロポーザルです。\u003c/p\u003e\n\u003cp\u003e概要については 2021 年 12 月の記事を見てください。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://cybozu.github.io/frontend-expert/posts/tc39-meeting-2021-12\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-json-parse-with-source\"\u003e\u003ccode\u003eJSON.parse\u003c/code\u003e source text access\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e仕様のテキストの修正を待って条件付き Stage 3 にるようです\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eJSON.parse\u003c/code\u003e source text access は、\u003ccode\u003eJSON.parse\u003c/code\u003e の第２引数として渡すことができる関数(reviver)の中でもとのテキストにアクセスできるようにするためのプロポーザルです。\u003c/p\u003e\n\u003cp\u003ereviver ではパースした JSON のそれぞれのメンバーのキーとバリューにアクセスし、結果のオブジェクトを返す前になんらかの変換を施すことができます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e{ \"foo\": 3 }\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ekey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e value\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e value \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"number\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e value \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// { \"foo\": 5 }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこの reviver の引数としてキーとバリューが渡ってきた時点ですでにもとのテキストには存在する情報が失われていることがあります。\u003c/p\u003e\n\u003cp\u003eたとえば \u003ccode\u003e{ \"key\": 999999999999999999 }\u003c/code\u003e という JSON を \u003ccode\u003eJSON.parse\u003c/code\u003e でパースするときに、reviver で受け取った引数をそのまま出力する例を考えてみましょう。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e{ \"key\": 999999999999999999 }\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ekey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e value\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// 1000000000000000000\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eもとの値は \u003ccode\u003e999999999999999999\u003c/code\u003e なのに実際に出力された値は \u003ccode\u003e1000000000000000000\u003c/code\u003e になっています。つまり、reviver の引数として受け取った時点でですでに \u003ccode\u003e999999999999999999\u003c/code\u003e ではなく \u003ccode\u003e1000000000000000000\u003c/code\u003e になってしまっています。\u003c/p\u003e\n\u003cp\u003eなので、渡されたメンバーのバリューが \u003ccode\u003e999999999999999999\u003c/code\u003e なのかそれとも \u003ccode\u003e1000000000000000000\u003c/code\u003e なのか、reviver 側からは判断ができません。\u003c/p\u003e\n\u003cp\u003eこれでは困るので \u003ccode\u003eJSON.parse\u003c/code\u003e source text access では、次のようなインターフェースでもとのソーステキストにアクセスできます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token known-class-name class-name\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e{ \"key\": 999999999999999999 }\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ekey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e source \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  　　\u003cspan class=\"token comment\"\u003e// ここで source には '999999999999999999' という文字列が入ってる\u003c/span\u003e\n    \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eFor Stage 2\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-string-dedent\"\u003e\u003ccode\u003eString.dedent\u003c/code\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eString.dedent\u003c/code\u003e はテンプレートリテラルの内部のインデントを適切に除去するためのタグ付きテンプレートリテラルを追加するプロポーザルです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMyClass\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e      create table student(\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e        id int primary key,\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e        name text\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e      )\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    \u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのようなコードを書くと、実際に出力される文字列には、通常プログラマーが期待するものとは異なるスペースが含まれることになります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMyClass\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\ninstance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e/*\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e      create table student(\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        id int primary key,\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        name text\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e      )\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    \u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e*/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこういうときのために適切にインデントを取り除いてくれるのが \u003ccode\u003eString.dedent\u003c/code\u003e です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMyClass\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token known-class-name class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ededent\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e      create table student(\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e        id int primary key,\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e        name text\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e      )\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    \u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMyClass\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\ninstance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e/*\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003ecreate table student(\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e  id int primary key,\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e  name text\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e*/\u003c/span\u003e     \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-grouped-and-auto-accessors\"\u003eGrouped and Auto-Accessors\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 に到達しませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eGrouped and Auto-Accessors はクラスのアクセサを定義する新しい方法を導入するプロポーザルです。\u003c/p\u003e\n\u003cp\u003eまず Grouped は次のようにして一つのプロパティのアクセサをまとめて定義できます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eC\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  accessor x \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  accessor x \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eそして Auto-Accessors は Grouped に対するシンタックスシュガーのようなものです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eC\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  accessor a \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// `accessor a { get; set; } = 1` と同じ\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eプロポーザルに README では様々なパターンが紹介されているので興味がある人はそちらを参照してください。\u003c/p\u003e\n\u003ch2\u003eFor Stage 1\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/bakkot/proposal-duplicate-named-capturing-groups\"\u003eDuplicate named capture groups\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eこの提案はもともと Stage 0 でしたが、アジェンダ上の議題は\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDuplicate named capture groups for stage 1, 2, or 3 reaches Stage 2\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eでした。そして実際に Stage 1 をスキップして Stage 2 に到達しました。\u003c/p\u003e\n\u003cp\u003eDuplicate named capture groups は正規表現の中で同名の名前付きグループを複数記述可能にするためのプロポーザルです。\u003c/p\u003e\n\u003cp\u003e次のコードを見てください。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003estr\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ematch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token regex\"\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-source language-regex\"\u003e\u003cspan class=\"token group punctuation\"\u003e(?\u0026#x3C;\u003cspan class=\"token group-name variable\"\u003eyear\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"token char-class\"\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token range\"\u003e0\u003cspan class=\"token range-punctuation operator\"\u003e-\u003c/span\u003e9\u003c/span\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token quantifier number\"\u003e{4}\u003c/span\u003e\u003cspan class=\"token group punctuation\"\u003e)\u003c/span\u003e-\u003cspan class=\"token char-class\"\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token range\"\u003e0\u003cspan class=\"token range-punctuation operator\"\u003e-\u003c/span\u003e9\u003c/span\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token quantifier number\"\u003e{2}\u003c/span\u003e\u003cspan class=\"token alternation keyword\"\u003e|\u003c/span\u003e\u003cspan class=\"token char-class\"\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token range\"\u003e0\u003cspan class=\"token range-punctuation operator\"\u003e-\u003c/span\u003e9\u003c/span\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token quantifier number\"\u003e{2}\u003c/span\u003e-\u003cspan class=\"token group punctuation\"\u003e(?\u0026#x3C;\u003cspan class=\"token group-name variable\"\u003eyear\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"token char-class\"\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token range\"\u003e0\u003cspan class=\"token range-punctuation operator\"\u003e-\u003c/span\u003e9\u003c/span\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token quantifier number\"\u003e{4}\u003c/span\u003e\u003cspan class=\"token group punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれは yyyy-MM もしくは MM-yyyy の形をした文字列のマッチする正規表現ですが、現在の ECMAScript としてはインバリッドです。なぜなら同じ正規表現の中で同名の名前付きキャプチャグループが複数存在するからです。\u003c/p\u003e\n\u003cp\u003eこのようなケースでは、同じ正規表現の中に同名の名前付きキャプチャグループを複数記述できると便利です。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/hax/proposal-this-parameter\"\u003e\u003ccode\u003ethis\u003c/code\u003e parameter\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 に到達しませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ethis\u003c/code\u003e parameter は、TypeScript の \u003ccode\u003ethis\u003c/code\u003e parameter のような構文を JavaScript に導入するためのプロポーザルです。\u003c/p\u003e\n\u003cp\u003e次のようなモチベーションがあるようです。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e様々なツールチェインのために TypeScript の \u003ccode\u003ethis\u003c/code\u003e parameter を標準化すること\u003c/li\u003e\n\u003cli\u003eJavaScript と TypeScript の間のギャップを埋めることで初学者にとって易しくなるため\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-type-annotations\"\u003eType Annotations\u003c/a\u003e によってもたらされる負担をへらすため\u003c/li\u003e\n\u003cli\u003eメソッドの構文を提供するため\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e現在 Stage 1 の \u003ca href=\"https://github.com/tc39/proposal-call-this\"\u003ecall-this\u003c/a\u003e においては、this を明示できるほうがわかりやすいのかもしれません。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003etoHex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etoString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e16\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token number\"\u003e42\u003c/span\u003e\u003cspan class=\"token operator\"\u003e~\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token function\"\u003etoHex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/rbuckton/proposal-regexp-atomic-operators\"\u003eRegExp Atomic Operators\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eRegExp Atomic Operators はバックトラックを制御するための新しい構文を正規表現に追加するプロポーザルです。\u003c/p\u003e\n\u003cp\u003eたとえば \u003ccode\u003e/a(bc|b)c/\u003c/code\u003e という正規表現は \u003ccode\u003e\"abcc\"\u003c/code\u003e にも \u003ccode\u003e\"abc\"\u003c/code\u003e にもマッチします。\n\u003ccode\u003e\"abcc\"\u003c/code\u003e のときは単純で、まず先頭の \u003ccode\u003ea\u003c/code\u003e がマッチし、次に \u003ccode\u003e(bc|b)\u003c/code\u003e の \u003ccode\u003ebc\u003c/code\u003e にマッチして、最後に \u003ccode\u003ec\u003c/code\u003e がマッチします。\n一方で \u003ccode\u003e\"abc\"\u003c/code\u003e のときはやや複雑です。まず先頭の \u003ccode\u003ea\u003c/code\u003e がマッチし、次に \u003ccode\u003e(bc|b)\u003c/code\u003e の \u003ccode\u003ebc\u003c/code\u003e にマッチしますが、そうすると最後の \u003ccode\u003ec\u003c/code\u003e にはマッチできません。そこで \u003ccode\u003e(bc|b)\u003c/code\u003e までもどります。前回のマッチングにおいて \u003ccode\u003ebc\u003c/code\u003e ではマッチできなかったので、もう一つの選択肢である \u003ccode\u003eb\u003c/code\u003e にマッチさせます。そして最後の \u003ccode\u003ec\u003c/code\u003e にマッチします。\u003c/p\u003e\n\u003cp\u003eこのような後続のパターンがマッチしない場合に一つ前のパターンに戻ってマッチを試みることをバックトラックといいます。RegExp Atomic Operators はこのようなバックトラックを制御するための構文を追加します。\u003c/p\u003e\n\u003cp\u003eたとえば前述の \u003ccode\u003e/a(bc|b)c\u003c/code\u003e というパターンでバックトラックが発生しないように Atomic Operators を使って書くと \u003ccode\u003e/a(?\u003e(bc|b))c\u003c/code\u003e になります。このパターンでは \u003ccode\u003e\"abcc\"\u003c/code\u003e にはマッチしますが、\u003ccode\u003e(bc|c)\u003c/code\u003e へのバックトラックが発生しないため \u003ccode\u003e\"abc\"\u003c/code\u003e にはマッチしません。\u003c/p\u003e\n\u003cp\u003e他にもいくつかの新しい構文があるみたいなので興味がある人はプロポーザルの README かスペックテキストを参照してください。\u003c/p\u003e\n\u003ch2\u003eUpdates\u003c/h2\u003e\n\u003cp\u003eステージの移動はないものの更新が紹介された提案を列挙します。ここでは詳細については説明しませんがスライドや関連するIssueへのリンクを貼ったので興味のある人は参照してください。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-array-grouping\"\u003eArray Grouping\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eArray Grouping は \u003ca href=\"https://lodash.com/docs/4.17.15#groupBy\"\u003eLodash の \u003ccode\u003egroupBy\u003c/code\u003e\u003c/a\u003e のように配列をグルーピングするメソッドを導入するプロポーザルです。\u003c/p\u003e\n\u003cp\u003e今回の変更で \u003ccode\u003egroupBy\u003c/code\u003e と \u003ccode\u003egroupByToMap\u003c/code\u003e から \u003ccode\u003egroup\u003c/code\u003e と \u003ccode\u003egroupToMap\u003c/code\u003e へとメソッドの名前が変更されました。\u003c/p\u003e\n\u003cp\u003e詳細は該当の Pull Request( \u003ca href=\"https://github.com/tc39/proposal-array-grouping/pull/39\"\u003ehttps://github.com/tc39/proposal-array-grouping/pull/39\u003c/a\u003e )を見てください。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-decorators\"\u003eDecorators\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://slides.com/pzuraq/decorators-normative-changes-2022-06\"\u003ehttps://slides.com/pzuraq/decorators-normative-changes-2022-06\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-shadowrealm\"\u003eShadow Realms\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-shadowrealm/issues/365\"\u003ehttps://github.com/tc39/proposal-shadowrealm/issues/365\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://tc39.es/proposal-temporal/\"\u003eTemporal\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://ptomato.name/talks/tc39-2022-06/\"\u003ehttp://ptomato.name/talks/tc39-2022-06/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-function.sent\"\u003e\u003ccode\u003efunction.sent\u003c/code\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://johnhax.net/2022/function-sent/slide#0\"\u003ehttps://johnhax.net/2022/function-sent/slide#0\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-import-reflection\"\u003eImport Reflection\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.google.com/presentation/d/1y0MAo7ymIWzyyrU9o3oKLiHc4BtQwLtqlU4Z_8_XYjU/edit#slide=id.p\"\u003ehttps://docs.google.com/presentation/d/1y0MAo7ymIWzyyrU9o3oKLiHc4BtQwLtqlU4Z_8_XYjU/edit#slide=id.p\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e参考リンク\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTC39\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/agendas/blob/main/2022/06.md\"\u003eagendas/06.md at main · tc39/agendas\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-06/jun-06.md\"\u003enotes/jun-06.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-06/jun-07.md\"\u003enotes/jun-07.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-06/jun-08.md\"\u003enotes/jun-08.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eBabel\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/babel/proposals/issues/82\"\u003eJun 2022 · Issue #82 · babel/proposals\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eSpiderMonkey\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://spidermonkey.dev/blog/2022/06/30/newsletter-firefox-102-103.html\"\u003eSpiderMonkey Newsletter (Firefox 102-103) | SpiderMonkey JavaScript/WebAssembly Engine\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","metaData":{"title":"ECMAScriptの最新動向 2022年06月版","author":"sosukesuzuki","createdAt":"2022-07-11","summary":"2022年06月06日~09日に開催された TC39 meeting 90th の内容を紹介します","tags":["TC39","ECMAScript"],"updatedAt":"2022-07-11"}},{"type":"markdown","href":"/posts/tc39-meeting-2022-03","slug":"tc39-meeting-2022-03","content":"\u003cp\u003eこの記事では2022年03月28日~31日に開催された TC39 meeting 89th で議題に上がったプロポーザルを紹介します。\u003c/p\u003e\n\u003ch2\u003eFor Stage 4\u003c/h2\u003e\n\u003cp\u003eFor Stage 4 の提案はありませんでした。\u003c/p\u003e\n\u003ch2\u003eFor Stage 3\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-v-flag\"\u003eRegExp set notation + Unicode properties of strings\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 3 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eこのプロポーザルは正規表現に新しく\u003ccode\u003ev\u003c/code\u003eフラグを導入し、その中で set notation と Unicode properties of strings を使えるようにします。\n(翻訳するとしたら set notation は「集合の表記」、properties of strings は「文字列プロパティ」でしょうか。定訳がわからないのでこの記事ではこれらの用語を英語のまま表記します。)\u003c/p\u003e\n\u003cp\u003eまず、set notation とは次のような記法のことです。\n(\u003ccode\u003eA\u003c/code\u003e や \u003ccode\u003eB\u003c/code\u003e は character class (\u003ccode\u003e[a-z]\u003c/code\u003eなど) もしくは Unicode property escape (\u003ccode\u003e\\p{ASCII}\u003c/code\u003eなど) とします)\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e// 差(difference/subtraction)\n[A--B]\n\n// 共通部分(intersection)\n[A\u0026#x26;amp;\u0026#x26;amp;B]\n\n// nested character class\n[A--[0-9]]\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-v-flag#illustrative-examples\"\u003eプロポーザルのリポジトリでは実用的なユースケースが紹介されています。\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e次に Unicode properties of strings は、domain が character や code point ではなく string (character の sequence) であるような Unicode property のことです。\n(Unicode の property については Unicode の \u003ca href=\"https://www.unicode.org/reports/tr18/#Categories\"\u003eUTS18\u003c/a\u003e の Properties を読むのがわかりやすいと思います)\u003c/p\u003e\n\u003cp\u003eこのプロポーザルの中では次の property of string がサポートされるようです。(ref: \u003ca href=\"https://github.com/tc39/ecma262/pull/2418/files#diff-00f81a4e81713d00d0ebd710c18a798b699d244361ceb04fecbb06db6b32e8ba\"\u003ehttps://github.com/tc39/ecma262/pull/2418/files#diff-00f81a4e81713d00d0ebd710c18a798b699d244361ceb04fecbb06db6b32e8ba\u003c/a\u003e)\u003cbr\u003e\n(見たところどれも Binary のものしかありませんが、今後他の datatype のものも追加されるかどうかはわかりません)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eBasic_Emoji\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eEmoji_Keycap_Sequence\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRGI_Emoji_Modifier_Sequence\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRGI_Emoji_Flag_Sequence\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRGI_Emoji_Tag_Sequence\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRGI_Emoji_ZWJ_Sequence\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRGI_Emoji\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eこれによって複数の code point からなる Emoji に対して Unicode property escape を使ってマッチさせられるようです。\u003c/p\u003e\n\u003cp\u003e(Unicode についてはあまり詳しくないので記述について誤りを見つけた人は教えてほしいです。)\u003c/p\u003e\n\u003cp\u003eちなみに Unicode properties of strings はもともとは\u003ca href=\"https://github.com/tc39/proposal-regexp-unicode-sequence-properties\"\u003e別のプロポーザル\u003c/a\u003eでしたが、2021年5月にこのプロポーザルにマージされました。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-change-array-by-copy\"\u003eChange Array by Copy\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 3 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eChange Array by Copy は Array と TypedArray にいくつかのイミュータブルなメソッドを追加するプロポーザルです。\u003c/p\u003e\n\u003cp\u003e以前この提案について記事を書いたのでより深く知りたい場合はそちらも参照してください(この記事は約1年前に書かれたものなので、現在提案されている仕様とは異なる部分があります)。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://sosukesuzuki.dev/posts/change-array-by-copy\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eこのプロポーザルについての議論では、新たに追加されるメソッドをどのように命名するかが主な論点にあがっていました。\u003c/p\u003e\n\u003cp\u003e現在では次のような \u003ccode\u003ewith\u003c/code\u003e + \u003ccode\u003eメソッド名の過去形(過去分詞形?)\u003c/code\u003e という形で落ち着いたようです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// ミュータブルなメソッド\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"a\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"b\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"c\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ereverse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// イミュータブルなメソッド\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"a\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"b\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"c\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ewithReversed\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれらのメソッドは便利な一方、配列をコピーして返すため配列の要素数に応じて発生するオーバーヘッドを考慮して使う必要があります。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-decorators\"\u003eDecorators\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 3 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eDecorators はクラスを拡張するための構文を導入するプロポーザルです。\u003c/p\u003e\n\u003cp\u003eこのプロポーザルは5年以上に渡って議論が行われてきた上、TypeScript によって早期からサポートされていたため開発者に広く認知されています。\u003c/p\u003e\n\u003cp\u003eミーティングで使われたスライドの冒頭では\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat is a decorator?\nDecorators are \u003cem\u003efunctions\u003c/em\u003e which have four main capabilities when applied to a class or class element\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReplacement\u003c/li\u003e\n\u003cli\u003eInitialization\u003c/li\u003e\n\u003cli\u003eMetadata\u003c/li\u003e\n\u003cli\u003eAccess\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eと説明されています。\u003c/p\u003e\n\u003cp\u003eちなみに現在 TypeScript に実装されている Decorators は現在の TC39 の Decorators とは異なるものです。\u003ca href=\"https://github.com/microsoft/TypeScript/issues/49074\"\u003eTypeScript 4.8 で TC39 の Decorators を実装することが検討されています。\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e筆者としては、Decorators はコードを書くときの体験を大きく変えうる機能である一方で、複雑で厄介なコードを生み出す可能性も高い機能だと考えています。\nしたがって一般的な Web アプリケーション開発にとっては、ライブラリが提供する Decorators を使用する程度にとどめておくのが、適切な関わり方なのではないかと思っています。\u003c/p\u003e\n\u003cp\u003eこの新しい Decorators に対してコミュニティがどのように向き合っていくのか、動向が気になるところです。\u003c/p\u003e\n\u003ch2\u003eFor Stage 2\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-pattern-matching\"\u003ePattern Matcing\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 に到達しませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003ePattern Matching は名前の通りパターンマッチを導入するためのプロポーザルです。\u003c/p\u003e\n\u003cp\u003e現在の ECMAScript では正規表現を除き値のマッチングを行うことができません。\nまた、\u003ccode\u003eswitch\u003c/code\u003e 文にはよく知られたいくつかの問題があります。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e式として使えない\u003c/li\u003e\n\u003cli\u003e各 \u003ccode\u003ecase\u003c/code\u003e に明示的な \u003ccode\u003ebreak\u003c/code\u003e で必要である\u003c/li\u003e\n\u003cli\u003e各 \u003ccode\u003ecase\u003c/code\u003e でスコープが曖昧である\u003c/li\u003e\n\u003cli\u003eなど\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePattern Matching ではこれらの問題に対処するための新しい構文を導入します。\u003c/p\u003e\n\u003cp\u003e例を示します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token function\"\u003ematch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eres\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003ewhen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e status\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e200\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e body\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e...\u003c/span\u003erest \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ehandleData\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ebody\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e rest\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003ewhen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e status\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e destination\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e url \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e300\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e status \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e status \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003ehandleRedirect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eurl\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003ewhen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e status\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e500\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehasRetried\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edo\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eretry\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereq\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehasRetried \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ethrowSomething\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ematch\u003c/code\u003e からはじまるブロック全体は match construct と呼ばれます。match construct 全体で一つの式として振る舞います。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ematch(res)\u003c/code\u003e の \u003ccode\u003eres\u003c/code\u003e は matchable と呼ばれます。matchable は任意の式です。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewhen\u003c/code\u003e や \u003ccode\u003edefault\u003c/code\u003e で始まる部分を clause (句) と呼びます。clause は \u003ccode\u003e:\u003c/code\u003e で LHS と RHS に区切られます。\n\u003cul\u003e\n\u003cli\u003eclause の LHS は \u003ccode\u003ewhen\u003c/code\u003e もしくは \u003ccode\u003edefault\u003c/code\u003e で始まる必要があります。\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ewhen\u003c/code\u003e clause は、\u003ccode\u003ewhen\u003c/code\u003e というキーワードのあとにカッコで囲まれた pattern を記述します。\n\u003cul\u003e\n\u003cli\u003eカッコで囲まれた pattern のあとには \u003ccode\u003eif\u003c/code\u003e と条件式で構成された guard を記述することができます。pattern の表現力では不十分だった場合に guard を使ってさらなるロジックを記述できます。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edefault\u003c/code\u003e clause は他のどの clause にもマッチしなかった場合にマッチします。\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edefault\u003c/code\u003e clause はなくても問題ありませんが、使う場合はからなず最後に置かなければいけません。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eclause の RHS は任意の式です。ブロックステートメント(\u003ccode\u003e{ }\u003c/code\u003e)を書くことはできません。なので、複雑なロジックを記述したいときは現在では即時実行関数を使う必要があります。将来的には、現在提案されている \u003ca href=\"\"\u003edo expression\u003c/a\u003e がここで役に立つでしょう。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003ewhen\u003c/code\u003e clause に続く pattern では、実際にはもっと複雑なパターンを記述できます。(ref: \u003ca href=\"https://github.com/tc39/proposal-pattern-matching#pattern\"\u003ehttps://github.com/tc39/proposal-pattern-matching#pattern\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003ePattern Mathcing は JavaScript のコーディングスタイルを大きく変えうる強力な機能です。\u003c/p\u003e\n\u003cp\u003e今回のミーティングでは仕様のテキストに懸念があり、時間内に Stage 2 に到達する合意は得られなかったようです。\u003c/p\u003e\n\u003ch2\u003eFor Stage 1\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-function-once\"\u003eFunction.prototype.once\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.google.com/presentation/d/1M0bzEEBZGfb_gIDVjIytbfYnLUhG7EN9iUTx6KJE2po/edit#slide=id.gfacc5909b0_0_5\"\u003ehttps://docs.google.com/presentation/d/1M0bzEEBZGfb_gIDVjIytbfYnLUhG7EN9iUTx6KJE2po/edit#slide=id.gfacc5909b0_0_5\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eFunction.prototype.once\u003c/code\u003e は、\u003ccode\u003eFunction\u003c/code\u003e に一度だけ呼び出されるような関数を作るためのインスタンスメソッドを導入するプロポーザルです。\u003c/p\u003e\n\u003cp\u003e例を示します。関数 \u003ccode\u003ef\u003c/code\u003e は受け取った引数を出力し、それに2をかけた数を返す関数です。\nこのとき \u003ccode\u003ef.once()\u003c/code\u003e は、一度だけ \u003ccode\u003ef\u003c/code\u003e を呼び出す関数を返します。\u003ccode\u003ef.once()\u003c/code\u003e の返り値の関数を二度以上呼び出しても \u003ccode\u003ef\u003c/code\u003e が再度呼び出されることはなく、その返り値は最初の\u003ccode\u003ef\u003c/code\u003eの返り値となります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ef\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e fOnce \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e f\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eonce\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003efOnce\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// `3` が出力され、`6` が返される\u003c/span\u003e\n\u003cspan class=\"token function\"\u003efOnce\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 何も出力されず、`6` が返される\u003c/span\u003e\n\u003cspan class=\"token function\"\u003efOnce\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 何も出力されず、`6` が返される\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/tc39/proposal-function-once/tree/15c443d07d65fc0f20d4b17f3c11a78086029bc7#real-world-examples\"\u003eプロポーザルのリポジトリでは実用的なユースケースが紹介されています。\u003c/a\u003e\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-type-annotations\"\u003eType Annotations\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 に到達しました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eType Annotations プロポーザルは、ECMAScript の仕様に TypeScript や Flow のような型の構文を導入するプロポーザルです。\u003c/p\u003e\n\u003cp\u003eたとえば、次に示すような型注釈を含むコードが JavaScript のプログラムとして妥当になります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e foo\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ebar\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eparam\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e param\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eisNaN\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのプロポーザルでは ECMAScript に型チェックを導入するのではなく、あくまで型の構文だけを導入します。つまり型による静的チェックを行う場合はこれまで通り統合開発環境やTypeScript Compilerなどを使う必要があります。\u003c/p\u003e\n\u003cp\u003eこのプロポーザルについて以前記事を書いたので興味のある人はそちらも参照してください。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://sosukesuzuki.dev/posts/stage-1-type-annotations\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eまた、過去に Harajuku.ts という勉強会で \u003ca href=\"https://twitter.com/uhyo_\"\u003e@uhyo_\u003c/a\u003e さんと \u003ca href=\"https://twitter.com/okunokentaro\"\u003e@okunokentaro\u003c/a\u003e さんと議論したので興味のある人はそのときのアーカイブも御覧ください。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://youtu.be/eS51szIxGTQ\"\u003ehttps://youtu.be/eS51szIxGTQ\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eUpdates\u003c/h2\u003e\n\u003cp\u003eステージの移動はないものの更新が紹介された提案を列挙します。ここでは詳細については説明しませんがスライドや関連するIssueへのリンクを貼ったので興味のある人は参照してください。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-array-grouping\"\u003eArray Grouping\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-array-grouping/issues/37\"\u003ehttps://github.com/tc39/proposal-array-grouping/issues/37\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-resizablearraybuffer\"\u003eResizable Array Buffer\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.google.com/presentation/d/1QBbEnfWn9QAn48J1SAm3l5xJARE5wcKt3MlTlcVKIek/edit#slide=id.p\"\u003ehttps://docs.google.com/presentation/d/1QBbEnfWn9QAn48J1SAm3l5xJARE5wcKt3MlTlcVKIek/edit#slide=id.p\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-temporal\"\u003eTemporal\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://ptomato.name/talks/tc39-2022-03/\"\u003ehttp://ptomato.name/talks/tc39-2022-03/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-shadowrealm\"\u003eShadow Realms\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.google.com/presentation/d/1Juv36nUTfcvb_E2NUeAPGuToCCBWIX0NLObx_h5qDYU/edit#slide=id.p\"\u003ehttps://docs.google.com/presentation/d/1Juv36nUTfcvb_E2NUeAPGuToCCBWIX0NLObx_h5qDYU/edit#slide=id.p\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-pipeline-operator\"\u003ePipe Operator\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.google.com/presentation/d/1dDucwsW8qM22yWLr_NHFmAiAltQSht3AXYW00kET4GA/edit#slide=id.gfacc5909b0_0_5\"\u003ehttps://docs.google.com/presentation/d/1dDucwsW8qM22yWLr_NHFmAiAltQSht3AXYW00kET4GA/edit#slide=id.gfacc5909b0_0_5\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-call-this\"\u003eCall-this operator\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.google.com/presentation/d/1-MLGCibETPX8NiIvNJ1xOxiMS-NB8GCbDGNcB5patiU/edit#slide=id.gfacc5909b0_0_5\"\u003ehttps://docs.google.com/presentation/d/1-MLGCibETPX8NiIvNJ1xOxiMS-NB8GCbDGNcB5patiU/edit#slide=id.gfacc5909b0_0_5\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-string-dedent\"\u003eString.dedent\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.google.com/presentation/d/1fF4TqU6eLcj74s0wa1VSq5wGORSY1m1naekTNF9JAz4/edit#slide=id.gc6f73a04f_0_0\"\u003ehttps://docs.google.com/presentation/d/1fF4TqU6eLcj74s0wa1VSq5wGORSY1m1naekTNF9JAz4/edit#slide=id.gc6f73a04f_0_0\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e参考リンク\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTC39\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/agendas/blob/main/2022/03.md\"\u003eagendas/03.md at main · tc39/agendas\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-03/mar-28.md\"\u003enotes/mar-28.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-03/mar-29.md\"\u003enotes/mar-29.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-03/mar-30.md\"\u003enotes/mar-30.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-03/mar-31.md\"\u003enotes/mar-31.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eBabel\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/babel/proposals/issues/81\"\u003eMarch 2022 · Issue #81 · babel/proposals\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTypeScript\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/microsoft/TypeScript/issues/49074\"\u003eTypeScript 4.8 Iteration Plan · Issue #49074 · microsoft/TypeScript\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/microsoft/TypeScript/issues/48885\"\u003eImplement the updated JS decorators proposal · Issue #48885 · microsoft/TypeScript\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eUnicode\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.unicode.org/reports/tr18/\"\u003eUTS #18: Unicode Regular Expressions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://util.unicode.org/UnicodeJsps/properties.jsp\"\u003eUnicode Utilities: Character Property Index\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","metaData":{"title":"ECMAScriptの最新動向 2022年03月版","author":"sosukesuzuki","createdAt":"2022-06-13","summary":"2022年03月28日~31日に開催された TC39 meeting 89th の内容を紹介します","tags":["TC39","ECMAScript"],"updatedAt":"2022-06-13"}},{"type":"markdown","href":"/posts/tc39-meeting-2022-01","slug":"tc39-meeting-2022-01","content":"\u003cp\u003eこの記事では2021年01月24日~27日に開催された TC39 meeting 88th で議題に上がったプロポーザルについて紹介します。\u003c/p\u003e\n\u003ch2\u003eFor Stage 4\u003c/h2\u003e\n\u003cp\u003eFor Stage 4 の提案はありませんでした。\u003c/p\u003e\n\u003ch2\u003eFor Stage 3\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-array-from-async/\"\u003eArray.fromAsync\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 3 にはなりませんでした。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eArray.fromAsync\u003c/code\u003e は次のようにして非同期イテラブルから配列を生成するスタティックメソッドを追加するプロポーザルです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token function\"\u003easyncGen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003en\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003eyield\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e arr \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efromAsync\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003easyncGen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/tc39/proposal-array-from-async/issues/19\"\u003ehttps://github.com/tc39/proposal-array-from-async/issues/19\u003c/a\u003e で指摘された問題のため、Stage 3 にはなりませんでした。\u003c/p\u003e\n\u003ch2\u003eFor Stage 2\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-class-brand-check\"\u003eClass brand checks\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 にはなりませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eClass brand checks は brand check のための新しい構文を導入するプロポーザルです。\u003c/p\u003e\n\u003cp\u003ebrand check は TC39 内で使われる用語で、\u003ca href=\"https://github.com/tc39/how-we-work/blob/master/terminology.md#brand-check\"\u003ehttps://github.com/tc39/how-we-work/blob/master/terminology.md#brand-check\u003c/a\u003e で説明されています。\u003c/p\u003e\n\u003cp\u003ebrand check とは、雑に言えば「ある値があるデータ型であることを検証すること」です。たとえば \u003ccode\u003eArray.isArray\u003c/code\u003e は brand check です(\u003ca href=\"https://zenn.dev/sosukesuzuki/articles/e0516a3d4c424e\"\u003e\u003ccode\u003einstanceof\u003c/code\u003e は厳密ではない\u003c/a\u003eため brand check ではありません)。\u003c/p\u003e\n\u003cp\u003e以前 brand check の方法の一つである \u003ca href=\"https://github.com/tc39/proposal-private-fields-in-in\"\u003eErgonomic brand checks for private fields\u003c/a\u003e についての記事を書いたので興味のある方はそちらもご覧ください。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://cybozu.github.io/frontend-expert/posts/ergonomic-brand-checks-for-private-fields\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eClass branc check プロポーザルでは \u003ccode\u003eclass.hasInstance(x)\u003c/code\u003e という新しい Meta Property を追加します。これはクラスの中でのみ使うことができ、引数として渡された値が今いるクラスのインスタンスかどうかをチェックします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFoo\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token function\"\u003eisFoo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ehasInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eo\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e foo \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFoo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eFoo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eisFoo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efoo\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eFoo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eisFoo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// false\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eFor Stage 1\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/rbuckton/proposal-enum\"\u003eenum\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 にはなりませんでした。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eenum は列挙型を実現するためのプロポーザルです。このプロポーザルは 4 年ほど前から存在していましたがまた動き出したようです。\u003c/p\u003e\n\u003cp\u003eenum プロポーザルでは次のような構文を導入します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eenum\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eSyntaxKind\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token constant\"\u003eA\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token constant\"\u003eB\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token constant\"\u003eC\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e他のプログラミング言語の enum と構文上は似ています。\u003c/p\u003e\n\u003cp\u003eしかし細部の仕様について検討すべき事項が多く、今回のミーティングでは Stage 1 に到達することはありませんでした。\u003ca href=\"https://docs.google.com/presentation/d/14WtGmdWjEYXIXZVWJWpERF98D90_BytceAu7b7DKr5Q/edit#slide=id.g10effb28f4f_0_273\"\u003eこのスライド\u003c/a\u003eに詳しくまとまっているので興味のある方はご覧ください。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-reversible-string-split\"\u003eReversible string split\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eReversible string split は可逆(Reversible)の文字列分割のための方法を導入するプロポーザルです。\u003c/p\u003e\n\u003cp\u003eJavaScript では \u003ccode\u003eString.prototype.split\u003c/code\u003e を使って文字列を分割できます。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/split\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e splitted \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A,B,C,D,E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esplit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esplitted\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// [ 'A', 'B', 'C', 'D', 'E' ]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eString.prototype.split\u003c/code\u003e は第2引数として非負の整数を渡すことで、分割する数を制限できます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e splitted1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A,B,C,D,E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esplit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esplitted1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// [ 'A' ]\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e splitted2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A,B,C,D,E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esplit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esplitted2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// [ 'A', 'B' ]\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e splitted3 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A,B,C,D,E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esplit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esplitted3\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// [ 'A', 'B', 'C' ]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eJavaScript 以外のいくつかの言語(Perl、PHP、Ruby、Go、Rust、Java など)では第2引数を受け取った \u003ccode\u003eString.prototype.split\u003c/code\u003e に相当する機能は、次のように文字列の分割を行います。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e splitted2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A,B,C,D,E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esplit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esplitted2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// [ 'A', 'B,C,D,E' ]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eN-1 回分割され、残りの部分が戻り値の配列の末尾に含まれています(戻り値の配列の要素数が N)。\u003c/p\u003e\n\u003cp\u003eReversible string split プロポーザルでは、このような振る舞いを持つ新しいメソッド \u003ccode\u003eString.prototype.splitN\u003c/code\u003e を導入します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e splitted2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A,B,C,D,E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esplitN\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esplitted2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// [ 'A', 'B,C,D,E' ]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのような文字列分割メソッドを使うと、次のようにして分割する前の文字列を取得できます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A,B,C,D,E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e separator \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\",\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003esplitN\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eseparator\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eseparator\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e提案の名前に含まれている Reversible というのはこのような可逆性のことを指しているようです。\u003c/p\u003e\n\u003ch2\u003eUpdates\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-symbols-as-weakmap-keys\"\u003eSymbols as WeakMap keys\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eSymbols as WeakMap keys は Symbol を WeakMap のキーとして使えるようにするためのプロポーザルです。\u003c/p\u003e\n\u003cp\u003e現在では一部情報が古くなっていますが以前このプロポーザルについて解説する記事を書いたので興味がある方はそちらもご覧ください。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"hatena-link\"\u003e\u003ciframe class=\"hatena-link-frame\" src=\"https://hatenablog-parts.com/embed?url=https://sosukesuzuki.dev/posts/symbols-as-weakmap-keys\" style=\"border: none;\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003e以前から Symbols as WeakMap keys プロポーザルのモチベーションや基本的な振る舞いについては概ね合意がとれていました。しかし、Well-knwon Symbols やグローバルシンボルレジストリに登録された Symbol (Eternal Symbol と呼ばれている)についてはどのように扱うべきかという点で TC39 メンバー内でも意見が分かれていました。\u003c/p\u003e\n\u003cp\u003e今回のミーティングで Symbols as WeakMap keys チャンピョングループは、Eternal Symbol を WeakMap のキーとして使おうとするとエラーが throw されるという振る舞いを選択したことを発表しました。それにともなって、\u003ccode\u003eWeakMap.isValidKey(x)\u003c/code\u003e、\u003ccode\u003eWeakSet.isValidValue(x)\u003c/code\u003e、\u003ccode\u003eWeakRef.isValidTarget(x)\u003c/code\u003e、\u003ccode\u003eFinalizationRegistry.isValidTarget(x)\u003c/code\u003e などのいくつかのスタティックメソッドが追加される可能性があります。\u003c/p\u003e\n\u003cp\u003eしかし議事録によればまだ TC39 メンバーの中で意見が分かれているため仕様の決定には時間がかかりそうです。\u003c/p\u003e\n\u003ch2\u003e参考リンク\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTC39\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/agendas/blob/main/2022/01.md\"\u003eagendas/01.md at main · tc39/agendas\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-01/jan-24.md\"\u003enotes/jan-24.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-01/jan-25.md\"\u003enotes/jan-25.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/notes/blob/main/meetings/2022-01/jan-26.md\"\u003enotes/jan-26.md at main · tc39/notes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-array-from-async/\"\u003eProposal Array.fromAsync\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-symbols-as-weakmap-keys\"\u003eProposal Symbols as WeakMap keys\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-class-brand-check\"\u003eProposal \u003ccode\u003eclass.hasInstance()\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rbuckton/proposal-enum\"\u003eProposal enum\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-reversible-string-split\"\u003eProposal Reversible string split\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eBabel\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/babel/proposals/issues/80\"\u003eJan 2022 · Issue #80 · babel/proposals\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","metaData":{"title":"ECMAScriptの最新動向 2022年01月版","author":"sosukesuzuki","createdAt":"2022-03-09","summary":"2021年01月24日~27日に開催された TC39 meeting 88th の内容を紹介します","tags":["TC39","ECMAScript"],"updatedAt":"2022-03-09"}},{"type":"markdown","href":"/posts/tc39-meeting-2021-12","slug":"tc39-meeting-2021-12","content":"\u003cp\u003eTC39 の 87 回目のミーティングが 12月14日 ~ 12月15日に開催されました。このミーティングで議題に上がった提案とそのステージの移動について紹介します。\u003c/p\u003e\n\u003ch2\u003eFor Stage 4\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eFor Stage 4 の提案はありませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003ch2\u003eFor Stage 3\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-array-grouping\"\u003eArray Grouping\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 3 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eArray Grouping は \u003ccode\u003eArray.prototype.groupBy\u003c/code\u003e と \u003ccode\u003eArray.prototype.groupByToMap\u003c/code\u003e を追加するプロポーザルです。\u003c/p\u003e\n\u003cp\u003e2021 年 10 月のミーティングで Stage 2 になったばかりですが、今回のミーティングで Stage 3 になりました。\u003c/p\u003e\n\u003cp\u003eまた、今回から \u003ccode\u003eArray.prototype.groupByToMap\u003c/code\u003e が追加されています。\u003c/p\u003e\n\u003cp\u003eこれは \u003ccode\u003egroupBy\u003c/code\u003e の結果が \u003ccode\u003eMap\u003c/code\u003e になったものです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e array \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e odd  \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eodd\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e even \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eeven\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e map \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e array\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egroupByToMap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003enum\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e index\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e array\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e num \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e even\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e odd\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emap\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// Map { {odd: true}: [1, 3, 5], {even: true}: [2, 4] }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eFor Stage 2\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-array-from-async/\"\u003eArray.fromAsync\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eArray.fromAsync\u003c/code\u003e は非同期イテラブルから配列を生成するためのスタティックメソッドを追加するプロポーザルです。\u003c/p\u003e\n\u003cp\u003eJavaScript では \u003ccode\u003eArray.from\u003c/code\u003e を使ってイテラブルから配列を生成できます。しかし、非同期イテラブルから配列を生成することはできません。\u003c/p\u003e\n\u003cp\u003eこのプロポーザルによって追加される \u003ccode\u003eArray.fromAsync\u003c/code\u003e メソッドを使うと次のようにして非同期イテラブルから配列を生成できます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token function\"\u003easyncGen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003en\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003eyield\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e arr \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eArray\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efromAsync\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003easyncGen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-r-escape\"\u003eRegExp \u003ccode\u003e\\R\u003c/code\u003e escape\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 になりませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eRegExp \u003ccode\u003e\\R\u003c/code\u003e escape は以前 \u003ca href=\"https://github.com/rbuckton/proposal-regexp-features\"\u003eRegExp Language Features\u003c/a\u003e として提案されていた正規表現の機能群の１つで、正規表現内で line terminator とシンプルにマッチングさせるために新しく \u003ccode\u003e\\R\u003c/code\u003e を導入する提案です。\u003c/p\u003e\n\u003cp\u003eこの機能は \u003ccode\u003eu\u003c/code\u003e もしくは \u003ccode\u003ev\u003c/code\u003e フラグが有効になっているときのみ有効になります。そして、大まかには次のパターンと等価です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\\r\\n\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\\x0A\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\\x0C\\x85\\u\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token number\"\u003e2028\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\\u\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token number\"\u003e2029\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこの正規表現の機能は Perl をはじめとする多くの正規表現エンジンに実装されていて、TC39 においてもそのユースケースは認められているようです。\u003c/p\u003e\n\u003cp\u003eしかし、\u003ca href=\"https://github.com/tc39/proposal-regexp-set-notation\"\u003eRegExp Set Notation Proposal\u003c/a\u003e の sequece properties によって同等の機能が実現できる可能性があるためその方向で調査しなおすべきだという結論になり Stage 2 には到達しませんでした。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-modifiers\"\u003eRegExp Modifiers\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eRegExp Modifiers は \u003ccode\u003e\\R\u003c/code\u003e escape と同じようにもともと RegExp Language Features の機能の１つでした。\u003c/p\u003e\n\u003cp\u003eこの提案は正規表現パターン内でのフラグの変更を可能にします。\u003c/p\u003e\n\u003cp\u003e例を示します。\u003c/p\u003e\n\u003cp\u003e次の例中の正規表現パターン全体には \u003ccode\u003ei\u003c/code\u003e フラグが適用されてます。しかし２つめの \u003ccode\u003e[a-z]\u003c/code\u003e は \u003ccode\u003e?-i:\u003c/code\u003e という RegExp Modifiers の構文を使って \u003ccode\u003ei\u003c/code\u003e フラグを無効にしてます。このとき一文字目では大文字小文字が無視されるものの、二文字目では大文字小文字が無視されません。\u003c/p\u003e\n\u003cp\u003eしたがってこのパターンは \u003ccode\u003e\"ab\"\u003c/code\u003e や \u003ccode\u003e\"Ab\"\u003c/code\u003e にはマッチし \u003ccode\u003e\"aB\"\u003c/code\u003e にはマッチしません。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e re1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token regex\"\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-source language-regex\"\u003e\u003cspan class=\"token anchor function\"\u003e^\u003c/span\u003e\u003cspan class=\"token char-class\"\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token range\"\u003ea\u003cspan class=\"token range-punctuation operator\"\u003e-\u003c/span\u003ez\u003c/span\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token group punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token quantifier number\"\u003e?\u003c/span\u003e-i:\u003cspan class=\"token char-class\"\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token range\"\u003ea\u003cspan class=\"token range-punctuation operator\"\u003e-\u003c/span\u003ez\u003c/span\u003e\u003cspan class=\"token char-class-punctuation punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token group punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token anchor function\"\u003e$\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-flags\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nre1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"ab\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\nre1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Ab\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\nre1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"aB\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// false\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-buffer-boundaries\"\u003eRegExp Buffer Boundaries\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eRegExp Buffer Boundaries も RegExp Language Features の機能の１つでした。\u003c/p\u003e\n\u003cp\u003eこの提案は、それぞれ入力の最初と最後にマッチする \u003ccode\u003e\\A\u003c/code\u003e と \u003ccode\u003e\\z\u003c/code\u003e を導入します。\u003ccode\u003em\u003c/code\u003e フラグの影響を受けないことを除けば \u003ccode\u003e^\u003c/code\u003e と \u003ccode\u003e$\u003c/code\u003e に似ています。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e^\u003c/code\u003e と \u003ccode\u003e$\u003c/code\u003e はそれぞれ最初と最後にマッチしますが、\u003ccode\u003em\u003c/code\u003e フラグが有効になっているときは行頭と行末にマッチします。しかし RegExp Buffer Boundaries が導入する \u003ccode\u003e\\A\u003c/code\u003e と \u003ccode\u003e\\z\u003c/code\u003e は、たとえ \u003ccode\u003em\u003c/code\u003e フラグが有効であっても入力の最初と最後にマッチします。\u003c/p\u003e\n\u003cp\u003e例を示します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e re \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token regex\"\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-source language-regex\"\u003e\u003cspan class=\"token anchor function\"\u003e\\A\u003c/span\u003efoo\u003cspan class=\"token alternation keyword\"\u003e|\u003c/span\u003e\u003cspan class=\"token anchor function\"\u003e^\u003c/span\u003ebar\u003c/span\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-flags\"\u003eum\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのパターンでは \u003ccode\u003efoo\u003c/code\u003e に \u003ccode\u003e\\A\u003c/code\u003e がついています。したがって入力の最初が \u003ccode\u003efoo\u003c/code\u003e の文字列にマッチします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003ere\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\nre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"foo\\n\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eしかし入力の最初ではなく行頭が \u003ccode\u003efoo\u003c/code\u003e の文字列にはマッチしません。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003ere\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\\nfoo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// false\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003ebar\u003c/code\u003e には \u003ccode\u003e^\u003c/code\u003e がついています。パターン全体で \u003ccode\u003em\u003c/code\u003e フラグが有効になっているので、入力の先頭と行頭が \u003ccode\u003ebar\u003c/code\u003e の文字列にマッチします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003ere\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"bar\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\nre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"bar\\n\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\nre\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\\nbar\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eFor Stage 1\u003c/h2\u003e\n\u003ch2\u003eUpdates\u003c/h2\u003e\n\u003cp\u003eステージの移動はないものの、アップデートがあった提案です。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-temporal\"\u003eTemporal\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eいくつかの仕様上の軽微な修正がありました。修正箇所について説明した\u003ca href=\"https://ptomato.name/talks/tc39-2021-12/#1\"\u003eスライド\u003c/a\u003eが公開されています。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-decimal\"\u003eDecimal\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eDecimal は現在 Stage 1 ですが、2022 年に Stage 2 に到達することを目指しているそうです。進捗を共有するための\u003ca href=\"https://drive.google.com/file/d/1qdieei11dZgDY_KnJhSBcFyHTMZOmCJr/view\"\u003eスライド\u003c/a\u003eが公開されています。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-destructuring-private\"\u003eDestructuring Private Fields\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eDestructuring Private Fields が提案された当初は小さな修正で十分だと考えられていました。しかし真剣に検討してみるといくつかの仕様上の難しい問題が明らかになったそうです。そこで再度レビュワーを募りレビューをやり直すことが決定しました。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-shadowrealm\"\u003eShadow Realms\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eいくつかの仕様上の重要な変更があったようです。詳しくは\u003ca href=\"https://docs.google.com/presentation/d/12PM5c4_yUnqXHjvACh8HEN5oJwgei-0T0hX_hlqjfDU/edit#slide=id.ge435a9058a_0_0\"\u003eスライド\u003c/a\u003eに記載されています。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-record-tuple/\"\u003eRecords and Tuples\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eRecord と Tuple の中で通常のオブジェクトを扱う方法について議論されました。その方法とその懸念についての Decision Tree が\u003ca href=\"https://drive.google.com/file/d/1lVYn8_sHecqxW08vN5Tu7rXZn7GemBqO/view\"\u003eスライド\u003c/a\u003eとして公開されています。\u003c/p\u003e\n\u003ch2\u003eNormative Changes\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/ecma262/pull/2106\"\u003e\u003ccode\u003eimport.meta[Symbol.toStringTag]\u003c/code\u003e の追加\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e合意は得られませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\"\u003e\u003ccode\u003eSymbol.toStringTag\u003c/code\u003e\u003c/a\u003e という Well-known Symbol があります。\nこの Symbol は \u003ccode\u003eObject.prototype.toString()\u003c/code\u003e によって表示される文字列の決定に使われます。\u003c/p\u003e\n\u003cp\u003e具体的な例を示します。\u003c/p\u003e\n\u003cp\u003eオブジェクト \u003ccode\u003efoo\u003c/code\u003e の \u003ccode\u003e[Symbol.toStringTag]\u003c/code\u003e に \u003ccode\u003e\"I'm foo\"\u003c/code\u003e という文字列をセットしておくと、\u003ccode\u003efoo.toString()\u003c/code\u003e は \u003ccode\u003e[object I'm foo]\u003c/code\u003e になります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e foo \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token known-class-name class-name\"\u003eSymbol\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etoStringTag\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"I'm foo\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efoo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etoString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// \"[object I'm foo]\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e今回のミーティングでは \u003ccode\u003eimport.meta\u003c/code\u003e の \u003ccode\u003e[Symbol.toStringTag]\u003c/code\u003e に \u003ccode\u003e\"ImportMeta\"\u003c/code\u003e という文字列を設定するという修正について議論されました。\u003c/p\u003e\n\u003cp\u003eこの挙動についての Issue は \u003ccode\u003eimport.meta\u003c/code\u003e の策定時にも存在しましたが、そのときすでに \u003ccode\u003eimport.meta\u003c/code\u003e が Stage 4 を達成していたことからクローズされました。\u003c/p\u003e\n\u003cp\u003eそして今回のミーティングでもこの仕様の修正についての合意は得られませんでした。この修正のための Pull Request が作成された時点で以下のような懸念が公開されていました。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eimport.meta\u003c/code\u003e は、ECMAScript の範囲では \u003ca href=\"https://tc39.es/ecma262/#sec-hostgetimportmetaproperties\"\u003e\u003ccode\u003eHostGetImportMetaProperties\u003c/code\u003e\u003c/a\u003e というホスト定義の abstract operation によって中身が決定されるオブジェクトであるということしか決まっておらず、ホストにとって必要であればホスト側で \u003ccode\u003eimport.meta\u003c/code\u003e の \u003ccode\u003eSymbol.toStringTag\u003c/code\u003e を定義できる。\u003c/li\u003e\n\u003cli\u003e仕様内で作成される他のオブジェクトとは異なり、\u003ccode\u003eimport.meta\u003c/code\u003e はホストのデータによって生成されるものであり、ECMAScript の範囲でプロパティを生成することを考慮したものではない。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e参考リンク\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTC39\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/agendas/blob/main/2021/12.md\"\u003eAgenda for the 87th meeting of Ecma TC39\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/ecma262/pull/2106\"\u003eNormative: Add import.meta[Symbol.toStringTag]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-array-grouping\"\u003eProposal Array Grouping\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-shadowrealm\"\u003eProposal Shadow Realms\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-array-from-async/\"\u003eProposal \u003ccode\u003eArray.fromAsync\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rbuckton/proposal-regexp-features\"\u003eProposal RegExp Language Features\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-r-escape\"\u003eProposal RegExp \u003ccode\u003e\\R\u003c/code\u003e escape\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-set-notation\"\u003eProposal RegExp Set Notation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-buffer-boundaries\"\u003eProposal RegExp Buffer Boundaries\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-regexp-modifiers\"\u003eProposal RegExp Modifiers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-temporal\"\u003eProposal Temporal\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-shadowrealm\"\u003eProposal Shadow Realms\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-record-tuple/\"\u003eProposal Records and Tuples\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-destructuring-private\"\u003eProposal Destructuring Private Fields\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eBabel\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/babel/proposals/issues/78\"\u003eDec 2021 · Issue #78 · babel/proposals\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eECMA262\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.es/ecma262/#prod-ImportMeta\"\u003e\u003ccode\u003eimport.meta\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.es/ecma262/#sec-hostgetimportmetaproperties\"\u003e\u003ccode\u003eHostGetImportMetaProperties\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","metaData":{"title":"ECMAScriptの最新動向 2021年12月版","author":"sosukesuzuki","createdAt":"2022-01-24","summary":"2021年12月14日~15日に開催された TC39 meeting 87th の内容を紹介します","tags":["TC39","ECMAScript"],"updatedAt":"2022-01-24"}},{"type":"markdown","href":"/posts/tc39-meeting-2021-10","slug":"tc39-meeting-2021-10","content":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e※ 旧タイトル: TC39 meeting 86th の概要とステージの移動\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eTC39 の 86 回目のミーティングが 10/25 ~ 10/28 に開催されました。\nこのミーティングで議題に上がった提案と、そのステージの移動について紹介します。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/agendas/blob/master/2021/10.md\"\u003eagendas/10.md at master · tc39/agendas\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/babel/proposals/issues/77\"\u003eOct 2021 · Issue #77 · babel/proposals\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003efor Stage 4\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-error-cause\"\u003eError Cause\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 4 になりました。ECMAScript 2022 に入ります\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eError Cause は、\u003ccode\u003eError\u003c/code\u003e コンストラクタの第 2 引数に \u003ccode\u003ecause\u003c/code\u003e という値で原因となったエラーを渡すことができるようにする提案です。\nキャッチする側では、\u003ccode\u003eerror.cause\u003c/code\u003e で、そのエラーを取得できます。\u003c/p\u003e\n\u003cp\u003e例を示します。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003edoUploadJob\u003c/code\u003e 関数は \u003ccode\u003efetch\u003c/code\u003e を実行して失敗したときに新しいエラーをスローします。そのエラーの第 2 引数に \u003ccode\u003e{ cause: err }\u003c/code\u003e というオブジェクトを渡しています。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003edoUploadJob\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003efetch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"https://example.com/upload\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword control-flow\"\u003ecatch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eerr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Upload job result failed\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003ecause\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e err \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword control-flow\"\u003etry\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003edoJob\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003ecatch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Caused by\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecause\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Error: Upload job result failed\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Caused by TypeError: Failed to fetch\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003edoUploadJob\u003c/code\u003e がスローしているエラーメッセージは \u003ccode\u003e\"Upload job result failed\"\u003c/code\u003e ですが、その原因となったエラーを \u003ccode\u003ecause\u003c/code\u003e として渡すことで、キャッチする側でどのエラーが原因で失敗したのかを取得できます。\u003c/p\u003e\n\u003cp\u003eこの例では、\u003ccode\u003edoUploadJob\u003c/code\u003e が失敗した原因が \u003ccode\u003eTypeError: Failed to fetch\u003c/code\u003e であったことがわかります。\u003c/p\u003e\n\u003ch2\u003efor Stage 3\u003c/h2\u003e\n\u003cp\u003e今回は、for Stage 3 の提案はありませんでした。\u003c/p\u003e\n\u003ch2\u003efor Stage 2\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-array-grouping\"\u003eArray Grouping\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eArray Grouping は、\u003ccode\u003eArray\u003c/code\u003e に \u003ccode\u003egroupBy\u003c/code\u003e というインスタンスメソッドを追加する提案です。\u003c/p\u003e\n\u003cp\u003eユースケースは\u003ca href=\"https://lodash.com/docs/4.17.15#groupBy\"\u003eLodash の \u003ccode\u003egroupBy\u003c/code\u003e\u003c/a\u003e と同様です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e array \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\narray\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egroupBy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ei\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"even\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"odd\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// =\u003e  { odd: [1, 3, 5], even: [2, 4] }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/proposal-partial-application\"\u003ePartial Application\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 2 になりませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003ePartial Application は、関数の部分適用のための構文を導入します。\u003c/p\u003e\n\u003cp\u003e例を示します。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eadd\u003c/code\u003e は 2 つの引数を受け取り、その 2 つを足し合わせて返すだけの単純な関数です。\nそして、Partial Application を使って \u003ccode\u003eaddOne\u003c/code\u003e という新しい関数を作っています。\u003ccode\u003eaddOne\u003c/code\u003e は、1 つの引数を受け取り、それに\u003ccode\u003e1\u003c/code\u003eを足して返す関数です。\nつまり、既存の関数の一部の引数だけ渡して、残りの引数を受け取るような関数を作ることができます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003eadd\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e addOne \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e add\u003cspan class=\"token operator\"\u003e~\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eaddOne\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e現在の JavaScript で表現すると、次のようになります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003eadd\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ey\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e addOne \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eaddOne\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eHaskell のような関数型プログラミング言語では標準で備わっている機能です。\u003c/p\u003e\n\u003ch2\u003efor Stage 1\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/bathos/proposal-string-cooked\"\u003e\u003ccode\u003eString.cooked\u003c/code\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eString.cooked\u003c/code\u003e は \u003ccode\u003eString\u003c/code\u003e に新しいスタティックメソッド \u003ccode\u003ecooked\u003c/code\u003e を追加する提案です。\n\u003ccode\u003eString.cooked\u003c/code\u003e は \u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/raw\"\u003e\u003ccode\u003eString.raw\u003c/code\u003e\u003c/a\u003e と逆のことをします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token known-class-name class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eraw\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003emmm ... \\u0064elicious cooked string\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// mmm ... \\u0064elicious cooked string\u003c/span\u003e\n\u003cspan class=\"token known-class-name class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecooked\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003emmm ... \\u0064elicious cooked string\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// \"mmm ... delicious cooked string\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eつまり、通常のテンプレートリテラルとおなじ挙動です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003emmm ... \\u0064elicious cooked string\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// \"mmm ... delicious cooked string\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこの機能がタグ付きテンプレートリテラルとして存在することで、これを用いて新しいタグ付きテンプレートリテラルを作るときに役にたちます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003emyTag\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003estrings\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003evalues\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecooked\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estrings\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003evalues\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003evalue\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etoUpperCase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\nmyTag\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003ehello \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\u003cspan class=\"token string\"\u003e'world'\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// \"hello WORLD\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/jridgewell/proposal-destructuring-private\"\u003eDestructure Private Fields\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 を飛ばして、Stage 2 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eDestructure Private Fields は、プライベートフィールドの分割代入のための構文を導入します。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e#\u003c/code\u003e からはじまる識別子は通常であれば存在できないので、別の名前にリネームする必要があります。次の例では \u003ccode\u003ethis.#x\u003c/code\u003e を \u003ccode\u003ex\u003c/code\u003e という名前にリネームしています。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFoo\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  #x \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003econstructor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e#x\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// =\u003e 1\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e #x\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e x \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// =\u003e 1\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/js-choi/proposal-bind-this\"\u003eBind-this operator\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eBind this operator は、\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\"\u003eFunction.prototype.bind\u003c/a\u003e と同様の方法で関数をバインドするための二項演算子を導入する提案です。\u003c/p\u003e\n\u003cp\u003e以前から存在する Stage 0 の \u003ca href=\"https://github.com/tc39/proposal-bind-operator\"\u003eBind Operator\u003c/a\u003e の後継であり、Stage 1 の \u003ca href=\"https://github.com/tc39/proposal-extensions\"\u003eExtensions\u003c/a\u003e の競合です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token class-name\"\u003eObject\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprototype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ehasOwnProperty\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecall\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003efoo\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003efoo\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eObject\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eprototype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ehasOwnProperty\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/js-choi/proposal-function-helpers\"\u003eFunction helpers\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりませんでした。この提案に含まれる関数は個別の提案として再度提出されるかもしれません。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eFunction helpers は、\u003ccode\u003eFunction\u003c/code\u003e のスタティックメソッドとして便利なヘルパー関数を追加する提案です。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eFunction.flow\u003c/code\u003e は引数に与えられた関数を合成した新しい関数を返します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e f \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eFunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eflow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ef0\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e f1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e f2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003ef\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e7\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// f2(f1(f0(5, 7))).\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eFunction.pipe\u003c/code\u003e は第 1 引数の値を、それ移行の引数として渡された関数を合成した関数に渡した結果を返します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token known-class-name class-name\"\u003eFunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epipe\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e f0\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e f1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e f2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// f2(f1(f0(5))).\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eFunction.constant\u003c/code\u003e は、第 1 引数として渡された値を返し続ける関数を返します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e f \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eFunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003econstant\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003ef\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"fooo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003cspan class=\"token function\"\u003ef\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3009\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e33\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e44\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003cspan class=\"token function\"\u003ef\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003efoo\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eFunction.identifiy\u003c/code\u003e は、第 1 引数に与えられた値をそのまま返します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token known-class-name class-name\"\u003eFunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eidentity\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 3\u003c/span\u003e\n\u003cspan class=\"token known-class-name class-name\"\u003eFunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eidentity\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 4\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eFunction.tap\u003c/code\u003e はコールバック関数を引数として受け取り、関数を返します。\n\u003ccode\u003eFunction.tape\u003c/code\u003e が返した関数に引数を渡すと、それをコールバック関数に渡して実行し、その上でその引数をそのまま返します。\n言葉で説明すると難しいですが、例を見れば簡単だと思います。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e f \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eFunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003ef\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 5 を出力して、5 を返す\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/lucacasonato/proposal-evaluator-attributes\"\u003eEvaluator Attributes\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eEvaluator Attributes は、インポートされたモジュールの評価方法を処理系に伝えるための構文を導入します。\u003c/p\u003e\n\u003cp\u003e例にある通り、提案された目的は WebAssembly のモジュールを JavaScript の Import 文で読み込むためです。しかし、提案の仕様としては WebAssembly には限られていません。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003emod\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./foo.wasm\"\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"wasm-module\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nmod \u003cspan class=\"token keyword\"\u003einstanceof\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWebAssembly\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eModule\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// true\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e現在 Stage 3 の \u003ca href=\"https://github.com/tc39/proposal-import-assertions\"\u003eImport Assertions\u003c/a\u003e に似ていますが、Import Assertions はモジュールの評価方法に影響を与えることはできません。\u003c/p\u003e\n\u003ch3\u003eRegExp Features\u003c/h3\u003e\n\u003cp\u003e前回のミーティングで提案された\u003ca href=\"https://github.com/rbuckton/proposal-regexp-features\"\u003eRegExp Features\u003c/a\u003eが機能ごとに別々の提案に分割されました。\u003c/p\u003e\n\u003ch4\u003e\u003ca href=\"https://github.com/rbuckton/proposal-regexp-modifiers\"\u003eRegExp Modifiers\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003ch4\u003e\u003ca href=\"https://github.com/rbuckton/proposal-regexp-x-mode\"\u003eRegExp Extended Mode and Comments\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003ch4\u003e\u003ca href=\"https://github.com/rbuckton/proposal-regexp-atomic-operators\"\u003eRegExp Atomic Operators\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003ch4\u003e\u003ca href=\"https://github.com/rbuckton/proposal-regexp-r-escape\"\u003eRegExp \u003ccode\u003e\\R\u003c/code\u003e Escape\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003ch4\u003e\u003ca href=\"https://github.com/rbuckton/proposal-regexp-buffer-boundaries\"\u003eRegExp Buffer Boundaries\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eStage 1 になりました\u003c/strong\u003e\u003c/p\u003e\n\u003ch3\u003eUpdates\u003c/h3\u003e\n\u003cp\u003eステージの移動はないものの、アップデートがあった提案です。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-change-array-by-copy\"\u003eChange Array by Copy\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-json-parse-with-source\"\u003eJSON.parse sourct text access\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-record-tuple/\"\u003eRecords \u0026#x26; Tuples\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-explicit-resource-management\"\u003eExplicit Resource Management\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/proposal-js-module-blocks\"\u003eJS Module Blocks\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/js-choi/proposal-array-from-async\"\u003eArray.fromAsync\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eその他\u003c/h2\u003e\n\u003cp\u003e提案ではなく、仕様書の変更として扱われているものです。\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://github.com/tc39/ecma262/pull/1321\"\u003eExtending null\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e合意は得られませんでした\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFoo\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003enull\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n","metaData":{"title":"ECMAScriptの最新動向 2021年11月版","author":"sosukesuzuki","editor":"nakajmg","createdAt":"2021-11-02","summary":"2021年10月25日~28日に開催された TC39 meeting 86th の内容を紹介します","tags":["TC39","ECMAScript"],"updatedAt":"2021-11-02"}}],"tag":"TC39"},"__N_SSG":true},"page":"/tags/[tag]","query":{"tag":"TC39"},"buildId":"iynSChS7iaz43C6uR7NMp","assetPrefix":"/frontend-expert","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>