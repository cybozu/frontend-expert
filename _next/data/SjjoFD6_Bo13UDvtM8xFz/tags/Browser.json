{"pageProps":{"posts":[{"slug":"eyedropper-api","content":"<p><a href=\"https://developer.chrome.com/blog/new-in-chrome-95/\">Chrome 95 がリリース</a>され、新機能として EyeDropper API が追加されました。(Edge 95 にも追加されました)</p>\n<h2>EyeDropper API とは</h2>\n<p>EyeDropper API は画面上から色情報を取得するスポイトツールをブラウザ上で実現する API です。スポイトツールはデザインツールなどに搭載されていることが多いかと思います。\nChrome の DevTools にも色選択をするときにスポイトアイコンをクリックするとスポイトツールが使えますが、この機能が単体の Web API として実装された形になります。</p>\n<p><img src=\"/frontend-expert/image/eyedropper-api/eyedropper.png\" alt=\"DevToolsのカラーピッカー\"></p>\n<h2>使い方</h2>\n<p>EyeDropper API の使い方は次のようになります。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> eyeDropper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EyeDropper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> eyeDropper<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// {sRGBHex: '#92d0e1'}</span>\n</code></pre></div>\n<p><code>EyeDropper</code>のインスタンスで<code>open</code>を実行すると色選択の UI が表示されます。</p>\n<h3>セキュリティ上の制約</h3>\n<p>EyeDropper API の <code>open</code> はユーザーの操作なしに実行するとエラーになります。</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">DOMException: Failed to execute &#x26;#39;open&#x26;#39; on &#x26;#39;EyeDropper&#x26;#39;: EyeDropper::open() requires user gesture.</code></pre></div>\n<p>これはプライバシーやセキュリティを考慮しての制限になります。<code>open</code>はユーザーの操作によってのみスポイトモードに移行し、ユーザーがクリックしたときのみ色の値を返します。\nこれによって悪意のあるサイトがユーザーの画面のピクセル情報を勝手に取得できないようになっています。</p>\n<h3>console からは起動できる</h3>\n<p>ユーザーの操作なしに起動できない API ですが、DevTools の console からはその限りではありません。次のワンライナーのコードを console で実行するとスポイトツールを起動できます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword control-flow\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EyeDropper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>覚えておくと便利かもしれません。</p>\n<p>ちなみにですが、Snippets からは起動できませんでした。</p>\n<h2>EyeDropper API を使ったデモサイト</h2>\n<p>EyeDropper API のデモサイトの紹介です。こちらのデモでは EyeDropper API を使った色選択ゲームが遊べます。</p>\n<p><a href=\"https://captainbrosset.github.io/eyedropper-demos/color-game.html\">eyedropper-demos/color-game</a></p>\n<p>Play ボタンをクリックするとカウントダウンが開始されます。時間内に左のマスに表示された色と同じ色を選択すると勝ちです。</p>\n<p><img src=\"/frontend-expert/image/eyedropper-api/demo.png\" alt=\"EyeDropper APIのデモ\"></p>\n<p>一部ブラウザでは <code>input</code>タグで<code>type=\"color\"</code>とすることで似たようなピッカーを使用できましたが、UI なしに実行できるようになったことでいろいろな使い道が考えられそうですね。</p>\n<h2>参考リンク</h2>\n<ul>\n<li><a href=\"https://wicg.github.io/eyedropper-api/\">https://wicg.github.io/eyedropper-api/</a></li>\n<li><a href=\"https://web.dev/eyedropper/\">https://web.dev/eyedropper/</a></li>\n</ul>\n","metaData":{"title":"Chrome95で追加された画面上の色を取得するEyeDropper APIについて","author":"nakajmg","createdAt":"2021-11-02","summary":"Chromiumベースのブラウザーに追加されたEyeDropper APIについて紹介します","tags":["Web API","Browser"],"updatedAt":"2021-11-02"}},{"slug":"release-firefox-93","content":"<p>Firefox 93 がリリースされました！</p>\n<ul>\n<li><a href=\"https://www.mozilla.org/en-US/firefox/93.0/releasenotes/\">https://www.mozilla.org/en-US/firefox/93.0/releasenotes/</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/93\">https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/93</a></li>\n</ul>\n<p>今回のリリースから AVIF 画像フォーマットがデフォルトで有効化されます。</p>\n<p>クライアント側の使用感が変わるわけではありませんが、今後こういった高圧縮可能な形式がスタンダードになることでよりリッチな Web コンテンツを多く提供できるようになるかもしれませんね。</p>\n<p>また、クラスの <code>static</code> 初期化ブロックをはじめとして、多くのイベントハンドラやプロパティの追加が盛り込まれているため、開発者視点では重要なアップデートではないかと思われます。</p>\n<h2>New</h2>\n<ul>\n<li>AV1 形式の画像フォーマットに対応</li>\n<li>PDF ビューアーがより詳細なフォームに対応(複数の政府や銀行が使用している XFA ベースフォーム)</li>\n<li>Windows 版にて、利用可能メモリが極端に少ない場合に利用状況や属性に基づいてタブを自動的にアンロードするようになった</li>\n<li>macOS 版にて、.dmg ファイルからマウントされた Firefox を実行している時、セッションを失わないためにインストールを完了するかどうかプロンプトが表示されるようになった</li>\n<li>安全でない接続に依存している、もしくは安全でない可能性のあるダウンロードをブロックするようになった</li>\n<li>Smart Block 3.0 (プライバシー保護機能)の互換性向上</li>\n<li>新しい referrer tracking protection を Strick Tracking Protection と Private Browsing に導入</li>\n<li>Firefox Suggest(Web ナビゲーター) の導入</li>\n</ul>\n<h2>Fixed</h2>\n<ul>\n<li>VoiceOver がアクセス可能なツリーコントロール内にあるチェック可能アイテムのチェック状態を正しく判別するようになった</li>\n<li>Orca スクリーンリーダーが Firefox で正しく動作するようになった</li>\n<li>その他セキュリティ修正</li>\n</ul>\n<h2>Changed</h2>\n<ul>\n<li>3DES を使用する TLS 暗号スイートが無効化\n<ul>\n<li>非推奨バージョンの TLS を有効化する設定により利用は可能</li>\n</ul>\n</li>\n<li>ダウンロードパネルが Firefox のビジュアルスタイルに沿うようになった</li>\n</ul>\n<h2>for web developer</h2>\n<h3>HTML</h3>\n<ul>\n<li>ARIA <code>meter</code> ロールを実装</li>\n<li><code>&#x3C;input type=\"datetime-local\"></code> の UI を実装</li>\n</ul>\n<h3>CSS</h3>\n<ul>\n<li><code>font-synthesis</code> に <code>small-caps</code> キーワードを追加</li>\n</ul>\n<h3>JavaScript</h3>\n<ul>\n<li>クラスの <code>static</code> 初期化ブロックをサポート</li>\n<li><code>createImageBitmap()</code> にて option オブジェクトを用いて <code>imageOrientation</code> 及び <code>premultiplyAlpha</code> プロパティを渡せるようになった</li>\n<li><code>Intl.supportedValueOf()</code> をサポート\n<ul>\n<li>実装でサポートされている値をコードで列挙できるようになった</li>\n</ul>\n</li>\n</ul>\n<h3>HTTP</h3>\n<ul>\n<li>ダイジェストを用いた HTTP 認証で SHA-256 アルゴリズムをサポート</li>\n<li>画像のデフォルト HTTP ACCEPT ヘッダーが <code>image/avif,image/webp,*/*</code> に変更\n<ul>\n<li>AV1 フォーマット対応によるものだと思われます</li>\n</ul>\n</li>\n</ul>\n<h3>APIs</h3>\n<ul>\n<li><code>ElementInternals.shadowRoot</code> 及び <code>HTMLElement.attachInternals</code> をサポート</li>\n<li><code>ResizeObserver.Observe()</code> にて <code>device-pixel-content-box</code> 値をサポート</li>\n<li>グローバル関数 <code>reportError()</code> をサポート\n<ul>\n<li>スクリプトがコンソールやグローバルイベントハンドラに対してエラーを報告できるようになった</li>\n</ul>\n</li>\n</ul>\n<h3>Events</h3>\n<ul>\n<li>グローバルイベントハンドラプロパティ <code>onsecuritypolicyviolation</code> をサポート\n<ul>\n<li>コンテンツセキュリティポリシー違反時に発生する <code>securitypolicyviolation</code> イベントを処理するハンドラを割り当てることが可能になった</li>\n</ul>\n</li>\n<li><code>GlobalEventHandlers</code> 及び <code>ShadowRoot</code> にて <code>onslotchange</code> イベントハンドラプロパティをサポート\n<ul>\n<li>スロットに含まれるノードが変更された際に <code>&#x3C;slot></code> 要素で発生する <code>slotchange</code> イベントを処理するハンドラを割り当てることが可能になった</li>\n</ul>\n</li>\n</ul>\n<h3>Removals</h3>\n<ul>\n<li><code>KeyboardEvent.initKeyEvent()</code> が <code>dom.keyboardevent.init_key_event.enabled</code> によって実行可否が制御されるようになり、デフォルトで無効になった</li>\n</ul>\n<h3>WebDerive conformance (Marionette)</h3>\n<ul>\n<li>大きなドキュメントに対して <code>WebDriver:Print</code> が失敗する原因になっているバグを修正</li>\n</ul>\n<h3>for add-on developers</h3>\n<ul>\n<li><code>windowId</code> が指定されている場合、サイドバーが <code>extension.getViews</code> に包含されるようになった</li>\n</ul>\n<h3>Other</h3>\n<ul>\n<li>AVIF 画像のサポートがデフォルトで有効になった\n<ul>\n<li><code>image.avif.compliance_strictness</code> を用いて仕様準拠の厳密生を調節できる</li>\n<li>アニメーション画像には非対応</li>\n</ul>\n</li>\n</ul>\n<h2>Web Platform</h2>\n<ul>\n<li><code>&#x3C;input type=\"datetime-local\"></code> の UI を実装</li>\n</ul>\n","metaData":{"title":"Firefox 93.0 リリースノート要約","author":"BaHo","editor":"nakajmg","createdAt":"2021-10-21","summary":"Firefox 93.0 のリリースノートの要約です","tags":["Releasenote","Browser"],"updatedAt":"2021-10-21"}}],"tag":"Browser"},"__N_SSG":true}