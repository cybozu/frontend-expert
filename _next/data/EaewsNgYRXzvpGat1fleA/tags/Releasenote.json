{"pageProps":{"posts":[{"slug":"release-chrome-99","content":"<p>Chrome 99 のリリースノート関連の情報をまとめました。</p>\n<ul>\n<li><a href=\"https://developer.chrome.com/blog/new-in-chrome-99/\">https://developer.chrome.com/blog/new-in-chrome-99/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/new-in-devtools-99/\">https://developer.chrome.com/blog/new-in-devtools-99/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/deps-rems-99/\">https://developer.chrome.com/blog/deps-rems-99/</a></li>\n<li><a href=\"https://www.chromestatus.com/features#milestone%3D99\">https://www.chromestatus.com/features#milestone%3D99</a></li>\n<li><a href=\"https://v8.dev/blog/v8-release-99\">https://v8.dev/blog/v8-release-99</a></li>\n</ul>\n<h2>New In Chrome (Chrome 99)</h2>\n<p>Chrome99 で新しく追加された機能です。</p>\n<h3>Chrome 100 and Firefox 100</h3>\n<p>Chrome 100 は今年の 3 月下旬、Firefox100 は 5 月上旬にリリースされます。 これらは両方ともメジャーバージョン番号が 3 桁にロールオーバーするアップデートです。 UserAgent をパースしたバージョン番号を２桁として解釈しているコードがある場合、新しいバージョン番号によって問題が発生する可能性があります。</p>\n<p>Chrome では、<code>＃force-major-version-to-100</code> フラグを有効にすることで現在のバージョンを 100 に上書きし、挙動を確認することができます。</p>\n<p>また、Firefox Nightly では「設定」メニューで、「Firefox100 ユーザーエージェント文字列」オプションを有効にすることで同様の確認が可能です。 両ブラウザでバージョン番号の解釈が期待どおりに機能することを確認できるように、サイトをテストすることをお勧めします。</p>\n<h3>CSS Cascasde Layers</h3>\n<p>CSS Cascade Layers が Chrome99、Firefox 97、Safari 15.4 Beta でサポートされました！</p>\n<p>CSS セレクタの詳細度を上回るルールを<code>@layer</code>で定義することができるようになります。</p>\n<p>詳細は <a href=\"https://twitter.com/nus3_\">@nus3</a> が別途記事を書いたので次のリンクをご参考ください。</p>\n<p><a href=\"https://cybozu.github.io/frontend-expert/posts/css-cascade-layers\">https://cybozu.github.io/frontend-expert/posts/css-cascade-layers</a></p>\n<h3>showPicker() for input elements</h3>\n<p>HTML InputElements に新しく<code>showPicker（）</code>メソッドが実装されました。</p>\n<p>これにより、日付だけでなく、時間、色、その他の<code>&#x3C;input></code>要素でブラウザーピッカーを表示するための標準的な方法が整備されました。</p>\n<p>利用する場合は、以下のように<code>&#x3C;input></code>要素で<code>showPicker（）</code>を呼び出します。また<code>try…catch</code>ブロックでこれらの処理を囲う事で、ブラウザーが<code>showPicker()</code>の API をサポートしていない場合、またはピッカーを表示できない場合のフォールバックを提供できます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"button\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dateInput <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"input\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbutton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    dateInput<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">showPicker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Dateピッカーの表示.</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ピッカーを表示できない場合のフォールバック</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>参考:</p>\n<p><a href=\"https://developer.chrome.com/blog/new-in-chrome-99/#:~:text=Show%20a%20browser%20picker%20for%20date%2C%20time%2C%20color%2C%20and%20files\">Show a browser picker for date, time, color, and files</a></p>\n<h3>And more!</h3>\n<p><code>CanvasRenderingContext2D</code>に次の機能が追加されました。</p>\n<ul>\n<li>Context がロストした時や復元した時のイベントハンドリングができるように(<code>ContextLost</code>, <code>ContextRestored</code>)</li>\n<li><code>willReadFrequently</code>オプションの追加</li>\n<li><code>letter-spacing</code>など Canvas でサポートされていなかったテキストを修飾するプロパティの追加</li>\n<li>Canvas の状態をリセットする<code>reset()</code>など</li>\n</ul>\n<p>PWA のマニフェストにダークテーマに対応する設定が追加できる<a href=\"https://developer.chrome.com/origintrials/#/view_trial/4239013149262479361\">オリジントライアル</a>が開始されたました。</p>\n<p>また詳細はこの記事の後半に記載しますが、Handwriting Recognition API が使えるようになります。</p>\n<h2>What's New In DevTools (Chrome 98)</h2>\n<p>DevTools についてはこちらの日本語訳を参照ください。</p>\n<p><a href=\"https://developer.chrome.com/ja/blog/new-in-devtools-99/\">https://developer.chrome.com/ja/blog/new-in-devtools-99/</a></p>\n<p>書いてるうちにでなかったら、気になるものがあれば記載する</p>\n<h2>Deprecations and removals in Chrome 99</h2>\n<h3>Remove Battery Status API on insecure origins</h3>\n<p><code>Battery Status API</code>は、HTTP ページや HTTP ページに埋め込まれた HTTPS の iframe などの安全でないオリジンでサポートされなくなりました。</p>\n<h3>Remove font-family -webkit-standard</h3>\n<p><code>font-family</code>の値として<code>-webkit-standard</code>が削除されました。</p>\n<h3>Remove GamepadList</h3>\n<p>接続しているゲームパッドを取得できる<code>navigator.getGamepads()</code>の返り値が<code>GamepadlList</code>から<code>Gamepad</code>のオブジェクトの配列を返すようになりました。</p>\n<p>この変更により、Gecko と Webkit と同じく仕様と一致するようになります。</p>\n<p>参考:</p>\n<p><a href=\"https://web.dev/gamepad/\">Chrome でゲームパッドを使う方法</a></p>\n<h3>Update WebCodecs to match the specification</h3>\n<p>WebCodecs 仕様変更により、仕様に反していた以下の 2 つの部分について修正しました。</p>\n<ul>\n<li><code>EncodeVideoChunkMetadata</code>オブジェクト内の<code>temporalLayerId</code>の場所</li>\n<li><code>VideoFrame()</code> コンストラクタでタイムスタンプ引数を指定しなかった際の挙動変更</li>\n</ul>\n<p>詳しくは<a href=\"https://chromestatus.com/feature/5667793157488640\">こちら</a>を参照してください。</p>\n<h2>その他 Chrome Platform Status に記載されていたもの</h2>\n<h3>Feature: \"paintworklet\" destination for PaintWorklet</h3>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Houdini\">CSS Houdini</a>の一部である<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CSS_Painting_API\">CSS Painting API</a>で使われる PaintWorklet のリクエストの送り先が<code>script</code>から<code>paintworklet</code>になりました。</p>\n<p><code>Sec-Fetch-Dest</code>HTTP リクエストヘッダと<code>FetchEvent.request.destination</code>で適用されます。</p>\n<h3>Feature: \"audioworklet\" destination for AudioWorklet</h3>\n<p><code>Web Audio API</code>のオーディオ処理を別スレッドで実行する仕組みである、<code>AudioWorklet</code>のリクエストの送り先が<code>script</code>から<code>audioworklet</code>になりました。</p>\n<p><code>Sec-Fetch-Dest</code>HTTP リクエストヘッダと<code>FetchEvent.request.destination</code>で適用されます。</p>\n<h3>Feature: Allow infinity, -infinity and NaN in CSS calc()</h3>\n<p>CSS の<code>calc()</code>関数で<code>infinity</code>, <code>-infinity</code>, <code>NaN</code> などのキーワード、及び<code>calc(1/0)</code> のように<code>infinity</code>や<code>NaN</code>に評価される式による値を許容するようになりました。</p>\n<h3>Autofill in ShadowDOM</h3>\n<p><code>autofill</code>が<code>form</code> 要素内のフォームコントロールを収集する際に、<code>ShadowDOM</code>も参照するようになります。これにより<code>Shadow DOM</code>内部の入力フォームでも<code>autofill</code>が効くようになります。</p>\n<p>Web コンポーネントを採用する際、<code>input</code>要素のようなフォームコントロールを<code>ShadowDOM</code>で包むことが一般的になっていることを受けての改善となります。</p>\n<h3>Convert adoptedStyleSheets to use ObservableArray</h3>\n<p>document や shadowRoot に<a href=\"https://developer.mozilla.org/ja/docs/Web/API/CSSStyleSheet\">CSSStyleSheet</a>を追加できる<code>adoptedStyleShetts</code>で ObservableArray が使えるようになります。</p>\n<p>今回から push などの通常の配列操作ができるようになります。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">adoptedStyleSheets</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token spread operator\">...</span>adoptedStyleSheets<span class=\"token punctuation\">,</span> newSheet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// これまで</span>\n<span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">adoptedStyleSheets</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">push</span><span class=\"token punctuation\">(</span>newSheet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// これから</span>\n</code></pre></div>\n<h3>Handwriting Recognition API</h3>\n<p>OS などにある既存の手書きの文字認識機能を web 上で扱えるようにするための API が追加されました。</p>\n<p>※現状この API が利用できるのは ChromeOS のみで対応言語も英語に限られています。</p>\n<p>参考:</p>\n<p><a href=\"https://chromestatus.com/feature/5263213807534080\">Feature: Handwriting Recognition API</a></p>\n<h3>Unprefixed text-emphasis properties</h3>\n<p>CSS の text-emphasis プロパティが<code>-webkit</code>なしで使えるようになります。</p>\n<p>参考:</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/text-emphasis\">https://developer.mozilla.org/en-US/docs/Web/CSS/text-emphasis</a></p>\n<h2>V8 release v9.9</h2>\n<h3>Intl.Locale extensions</h3>\n<p>Intl.Local オブジェクトに 7 つの新しいプロパティが追加されました。</p>\n<p><code>calendars</code>, <code>collations</code>, <code>hourCycles</code>, <code>numberingSystems</code>, <code>timeZones</code>では他の Intl API で使用する好ましい識別子を返します。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> jaLocal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intl<span class=\"token punctuation\">.</span>Locale</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ja\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>jaLocal<span class=\"token punctuation\">.</span><span class=\"token property-access\">calendars</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['gregory', 'japanese']</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>jaLocal<span class=\"token punctuation\">.</span><span class=\"token property-access\">collations</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['unihan', 'emoji', 'eor']</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>jaLocal<span class=\"token punctuation\">.</span><span class=\"token property-access\">hourCycles</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['h23']</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>jaLocal<span class=\"token punctuation\">.</span><span class=\"token property-access\">numberingSystems</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['latn']</span>\n</code></pre></div>\n<p><code>textInfo</code>はテキストに関連する情報をオブジェクトで返します。現状では CSS の direction プロパティで使用するような文字の並び順の値を返します。\n(rtl が右から左へ、ltr が左から右へ)</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\">arabicEgyptLocale<span class=\"token punctuation\">.</span><span class=\"token property-access\">textInfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// { direction: 'rtl' }</span>\njapaneseLocale<span class=\"token punctuation\">.</span><span class=\"token property-access\">textInfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// { direction: 'ltr' }</span>\nchineseTaiwanLocale<span class=\"token punctuation\">.</span><span class=\"token property-access\">textInfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// { direction: 'ltr' }</span>\n</code></pre></div>\n<p><code>weekInfo</code>は週に関連する情報を返します。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> jaLocal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intl<span class=\"token punctuation\">.</span>Local</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ja\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>jaLocal<span class=\"token punctuation\">.</span><span class=\"token property-access\">weekInfo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 返される数字は 1 が月曜日、7 が日曜日</span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//   firstDay: 7,</span>\n<span class=\"token comment\">//   weekend: [6, 7],</span>\n<span class=\"token comment\">//   minimalDays: 1,</span>\n<span class=\"token comment\">// }</span>\n</code></pre></div>\n<h3>Intl Enumeration</h3>\n<p>v8 でサポートされている識別子の配列を返す<code>Intl.supportedValuesOf(code)</code>という新しい関数が追加されました。\nサポートされるコード値は以下の 6 つです。</p>\n<p>calendar</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">Intl</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supportedValuesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"calendar\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['buddhist', 'chinese', 'coptic', 'dangi', ...]</span>\n</code></pre></div>\n<p>collation</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">Intl</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supportedValuesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"collation\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['big5han', 'compat', 'dict', 'emoji', ...]</span>\n</code></pre></div>\n<p>currency</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">Intl</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supportedValuesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"currency\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['ADP', 'AED', 'AFA', 'AFN', 'ALK', 'ALL', 'AMD', ...]</span>\n</code></pre></div>\n<p>numberingSystem</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">Intl</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supportedValuesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"numberingSystem\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['adlm', 'ahom', 'arab', 'arabext', 'bali', ...]</span>\n</code></pre></div>\n<p>timeZone</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">Intl</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supportedValuesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"timeZone\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['Africa/Abidjan', 'Africa/Accra', 'Africa/Addis_Ababa', 'Africa/Algiers', ...]</span>\n</code></pre></div>\n<p>unit</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">Intl</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supportedValuesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unit\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['acre', 'bit', 'byte', 'celsius', 'centimeter', ...]</span>\n</code></pre></div>\n<p>この新しいメソッドによって、Web 開発者はどの値が実装でサポートされているかを簡単に発見できるようになります。</p>\n","metaData":{"title":"CSS Cascasde Layersの追加など、Chrome 99 リリースノートまとめ","author":"Saji","editor":"nus3","createdAt":"2022-03-18","summary":"Chrome 99 のリリースノートの要約です","tags":["Releasenote","Browser"],"updatedAt":"2022-03-18"}},{"slug":"release-chrome-98","content":"<p>Chrome 98 のリリースノート関連の情報をまとめました。</p>\n<ul>\n<li><a href=\"https://developer.chrome.com/blog/new-in-chrome-98/\">https://developer.chrome.com/blog/new-in-chrome-98/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/new-in-devtools-98/\">https://developer.chrome.com/blog/new-in-devtools-98/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/deps-rems-98/\">https://developer.chrome.com/blog/deps-rems-98/</a></li>\n<li><a href=\"https://www.chromestatus.com/features#milestone%3D98\">https://www.chromestatus.com/features#milestone%3D98</a></li>\n</ul>\n<h2>New In Chrome (Chrome 98)</h2>\n<p>Chrome98 で新しく追加された機能です。</p>\n<h3>Opting out of auto-dark themes on Android</h3>\n<p>Chrome96 から、Android では OriginTrial として「<a href=\"https://developer.chrome.com/blog/auto-dark-theme/\">Auto Dark Themes</a>」という機能を追加しています。</p>\n<p>この機能はユーザーの OS がダークモードである場合、明るいテーマのサイトに対しブラウザが自動的に生成したダークテーマを適用するものです。</p>\n<p>今回のアップデートでは OriginTrial に登録したサイトのうち、特定のページで自動生成されるダークテーマを無効にする方法が追加されました。</p>\n<p>具体的には以下のように<code>meta</code>タグを利用して無効化することが出来ます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>color-scheme<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>only light<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n</code></pre></div>\n<p>また以下のように<code>color-scheme: only light</code>というスタイルを<code>:root</code>要素にあてることでも無効化できます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token pseudo-class\">:root</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color-scheme</span><span class=\"token punctuation\">:</span> only light<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>CSS スタイルを利用する方法の優れた点として、以下のように要素ごとに自動生成されるダークテーマを無効にできる点が挙げられます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.only-light</span><span class=\"token punctuation\">,</span>\n<span class=\"token id\">#my-element</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color-scheme</span><span class=\"token punctuation\">:</span> only light<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>詳しくは<a href=\"https://developer.chrome.com/blog/auto-dark-theme/\">Auto Dark Themes on Android</a>における<a href=\"https://developer.chrome.com/blog/auto-dark-theme/#per-element-opt-out\">How to opt-out of Auto Dark Theme</a>の章を参照してください。</p>\n<h3>COLRv1 font support</h3>\n<p>COLRv1 フォントがサポートされました。</p>\n<p>COLRv1 では COLRv0 と比べて、新たにフォントのグラデーションや合成などに対応しています。また、フォントが鮮明なまま圧縮率が高いのも特徴の一つです。</p>\n<p>次の参考記事では実際にグラデーションを導入したカラーフォントや COLRv1 と Bitmap を比較してどれほど鮮明なのかを確認することができます。</p>\n<p>お使いの Chrome のバージョンを 98 にアップデートした上で、ぜひ見てみてください！</p>\n<p>参考:</p>\n<p><a href=\"https://developer.chrome.com/blog/colrv1-fonts/\">https://developer.chrome.com/blog/colrv1-fonts/</a></p>\n<h3>Emulate Chrome 100 in the UA string</h3>\n<p>ここ何回かのリリースには必ず含まれている内容ですね。</p>\n<p>Chrome のバージョンがもうすぐ 100 になるので、Chrome のバージョンを使っているような実装がある場合はバージョン番号が 3 桁になっても正しく動くかどうか確認しましょう。現在のバージョンを 100 にする<a href=\"https://developer.chrome.com/blog/force-major-version-to-100/\">#force-major-version-to-100</a>フラグを使って、既存のコードが正しく動くか確認することができます。</p>\n<h3>And more!</h3>\n<h2>What's New In DevTools (Chrome 98)</h2>\n<p>DevTools についてはこちらの日本語訳を参照ください。</p>\n<p><a href=\"https://developer.chrome.com/ja/blog/new-in-devtools-97/\">https://developer.chrome.com/ja/blog/new-in-devtools-97/</a></p>\n<h2>Deprecations and removals in Chrome 98</h2>\n<h3>Remove SDES key exchange for WebRTC</h3>\n<p>Chrome97 で記載があったものですが、98 で Shipping になりました。</p>\n<p>詳細は<a href=\"https://cybozu.github.io/frontend-expert/posts/release-chrome-97\">前回のリリースノートのまとめ</a>でも記載したので、そちらをご覧ください。</p>\n<h2>その他 Chrome Platform Status に記載されていたもの</h2>\n<h3>Add support for Promise to Blobs in clipboard item</h3>\n<p><code>ClipboardItem</code>オブジェクトに対して Promise をサポートしました。</p>\n<p>今まで、Chrome では<code>ClipboardItem</code>コンストラクターの引数として「文字列または blob に解決される Promise」を受け取ることが出来ませんでした。</p>\n<p>今回のアップデートにより<code>clipboard.write</code>API が呼ばれた時に、一旦クリップボードに書き込む Blob データを同期的に取得する必要がなくなり、ブロックすることなく非同期的に write メソッドを呼び出すことができるようになります。</p>\n<h3>CSS Color Adjust: 'only' keyword for color-scheme</h3>\n<p><code>color-scheme</code>プロパティの<code>only</code>キーワードがサポートされました。only を指定することでユーザーエージェント(ブラウザ)が要素のカラースキーマを上書きすることを禁止します。</p>\n<p>参考:</p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ja/docs/Web/CSS/color-scheme\">https://developer.mozilla.org/ja/docs/Web/CSS/color-scheme</a></li>\n<li><a href=\"https://drafts.csswg.org/css-color-adjust/#color-scheme-prop\">https://drafts.csswg.org/css-color-adjust/#color-scheme-prop</a></li>\n</ul>\n<h3>FileSystemHandle::Remove() method</h3>\n<p>FileSystemHandle に<code>Remove()</code>メソッドを追加しました。</p>\n<p>今ままで<code>FileSystemHandle</code>から直接ファイルやディレクトリを削除することは不可能で、親ディレクトリの<code>FileSystemDirectoryHandle</code>から<code>RemoveEntry</code>を呼ぶ必要がありました。</p>\n<p>今回のアップデートにより「<code>showSaveFilePicker</code>から<code>FileHandle</code>を取得したが、結局保存したくなくなったのでファイルを削除したい」というような、よくあるユースケースに対応できるようになりました。</p>\n<h3>HDR CSS Media Queries: dynamic-range</h3>\n<p>CSS のメディアクエリーに<code>dynamic-range</code>が追加されました。</p>\n<p>次のサンプルコードのように、ディスプレイが HDR をサポートしてるかしていないかを<code>dynamic-range</code>で判別できるようになります。</p>\n<div class=\"remark-highlight\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* HDRをサポートしていない */</span>\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">dynamic-range</span><span class=\"token punctuation\">:</span> standard<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\"><span class=\"token class\">.contrast</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* ディスプレイがHDRをサポートしている */</span>\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">dynamic-range</span><span class=\"token punctuation\">:</span> high<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\"><span class=\"token class\">.contrast</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token color\">green</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>参考:</p>\n<p><a href=\"https://www.w3.org/TR/mediaqueries-5/#dynamic-range\">https://www.w3.org/TR/mediaqueries-5/#dynamic-range</a></p>\n<h3>New window.open() popup vs. window behavior</h3>\n<p><code>window.open()</code>では第 3 引数として<code>windowFeatures</code>という option を DOMString で指定できますが、今バージョンから<code>popup</code>という機能に対応するようになりました。<code> popup=yes</code>または<code>popup=1</code>のように指定することで、ポップアップウィンドウを利用して開くことをブラウザに要求することが出来ます。</p>\n<p>この変更は window.open の新しくリリースされた仕様に合わせて、相互運用性のために行われた変更です。 広報互換性のため、ポップアップやタブ/ウィンドウを開く既存の動作に変更はありません。</p>\n<h3>Private Network Access preflight requests for subresources</h3>\n<p>サブリソースに対するプライベートネットワークリクエストの前に CORS プリフライトリクエストを送信し、ターゲットサーバーからの明示的な許可を求めるようになります。</p>\n<p>プライベートネットワークリクエストとは以下のようなリクエストとのことです。</p>\n<ul>\n<li>パブリック Web サイトからプライベート IP アドレスまたはローカルホストへのリクエスト</li>\n<li>プライベートな Web サイト（イントラネットなど）からローカルホストへのリクエスト</li>\n</ul>\n<p>プライベートネットワーク上のサービスや機器(ネットワーク機器やプリンタなど)は CSRF 対策が不十分なものが多く、今回のアップデートはこれらの攻撃リスクを軽減させるための対策になります。</p>\n<h3>WritableStream controller AbortSignal</h3>\n<p><a href=\"https://developer.mozilla.org/ja/docs/Web/API/WritableStream/abort\">WritableStream.abort()</a>を実行した際に、ストリームへの進行中の書き込みの中止や終了がすぐに実行されるようになりました。</p>\n<h3>self.structuredClone()</h3>\n<p>ディープコピーができる<code>structuredClone()</code>がついに 98 で実装されました。</p>\n<p>お使いの Chrome を 98 にアップデートした上で、DevTools の Console で次のサンプルコードを試しに実行してみると<code>structuredClone()</code>で実際にディープコピーが実行されていることが確認できます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myOriginal <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  someProp<span class=\"token operator\">:</span> <span class=\"token string\">\"with a string value\"</span><span class=\"token punctuation\">,</span>\n  anotherProp<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    withAnotherProp<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> myShallowCopy <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span>myOriginal <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nmyShallowCopy<span class=\"token punctuation\">.</span><span class=\"token property-access\">anotherProp</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">withAnotherProp</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"a new value\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>\n  myOriginal<span class=\"token punctuation\">.</span><span class=\"token property-access\">anotherProp</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">withAnotherProp</span><span class=\"token punctuation\">,</span>\n  myShallowCopy<span class=\"token punctuation\">.</span><span class=\"token property-access\">anotherProp</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">withAnotherProp</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myOriginal <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  someProp<span class=\"token operator\">:</span> <span class=\"token string\">\"with a string value\"</span><span class=\"token punctuation\">,</span>\n  anotherProp<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    withAnotherProp<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> myDeepCopy <span class=\"token operator\">=</span> <span class=\"token function\">structuredClone</span><span class=\"token punctuation\">(</span>myOriginal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyDeepCopy<span class=\"token punctuation\">.</span><span class=\"token property-access\">anotherProp</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">withAnotherProp</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"a new value\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>\n  myOriginal<span class=\"token punctuation\">.</span><span class=\"token property-access\">anotherProp</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">withAnotherProp</span><span class=\"token punctuation\">,</span>\n  myDeepCopy<span class=\"token punctuation\">.</span><span class=\"token property-access\">anotherProp</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">withAnotherProp</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>参考:</p>\n<p><a href=\"https://web.dev/structured-clone/\">https://web.dev/structured-clone/</a></p>\n","metaData":{"title":"COLRv1 fontのサポートなど、Chrome 98 リリースノートまとめ","author":"nus3","editor":"Saji","createdAt":"2022-02-18","summary":"Chrome 98 のリリースノートの要約です","tags":["Releasenote","Browser"],"updatedAt":"2022-02-18"}},{"slug":"release-chrome-97","content":"<p>Chrome 97 のリリースノート関連の情報をまとめました。</p>\n<ul>\n<li><a href=\"https://developer.chrome.com/blog/new-in-chrome-97/\">https://developer.chrome.com/blog/new-in-chrome-97/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/new-in-devtools-97/\">https://developer.chrome.com/blog/new-in-devtools-97/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/deps-rems-97/\">https://developer.chrome.com/blog/deps-rems-97/</a></li>\n<li><a href=\"https://www.chromestatus.com/features#milestone%3D97\">https://www.chromestatus.com/features#milestone%3D97</a></li>\n<li><a href=\"https://v8.dev/blog/v8-release-97\">https://v8.dev/blog/v8-release-97</a></li>\n</ul>\n<h2>New In Chrome (Chrome 97)</h2>\n<p>Chrome97 で新しく追加された機能です。</p>\n<h3>Web Transport</h3>\n<p>サーバーとクライアントの双方向リアルタイム通信を実現する新しいフレームワークとして提案されている<code>Web Transport</code>が正式にサポートされました。</p>\n<p>Web Transport は既存の代表的手法である<code>Web Sockets</code>や<code>WebRTC</code>と比べ以下のような利点を持っています。</p>\n<ul>\n<li><code>WebSockets</code>よりも低遅延な通信を実現する</li>\n<li>P2P メッセージング用に設計された<code>WebRTC</code>と違い、クライアントサーバーメッセージングを前提として設計されているため扱いやすい</li>\n</ul>\n<p>Web Transport では<code>streams API</code>と<code>datagram API</code>という２種類の通信 API がサポートされており、それぞれ以下のような特徴から使い分けることができます。</p>\n<ul>\n<li>streams API : 信頼性の高い順序付けられたデータ送信に最適</li>\n<li>datagram API : 信頼性や順序がそこまで求められず、より低遅延でベストエフォートなデータ送信に最適</li>\n</ul>\n<p>注意点として、Web Transport を試すためには<code>HTTP/3</code>をサポートしたサーバーが必要となります。</p>\n<p>Web Transport は以下のような形で簡単に利用することができます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://example.com:4999/foo/bar'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> transport <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebTransport</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// WebTransportインスタンス生成</span>\n<span class=\"token keyword control-flow\">await</span> transport<span class=\"token punctuation\">.</span><span class=\"token property-access\">ready</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 接続を待つ</span>\n\n<span class=\"token keyword\">const</span> writer <span class=\"token operator\">=</span> transport<span class=\"token punctuation\">.</span><span class=\"token property-access\">datagrams</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">writable</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> data1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint8Array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">65</span><span class=\"token punctuation\">,</span> <span class=\"token number\">66</span><span class=\"token punctuation\">,</span> <span class=\"token number\">67</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwriter<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">write</span><span class=\"token punctuation\">(</span>data1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>詳しくは<a href=\"https://web.dev/webtransport/\">Experimenting with WebTransport</a>を参照しててください。</p>\n<h3>Script type feature detection</h3>\n<p>ブラウザ側で<code>ES Modules</code>の対応状況を判別する方法として今まで<code>nomodule</code>属性がありましたが、<code>import maps</code>, <code>speculation rules</code>,<code>bundle preloading</code>などの新しく提案されている仕様には対応しきれていませんでした。</p>\n<p>今回サポートされた<code>HTMLScriptElement.supports()</code>を利用することで以下のように JavaScript側でscriptがどの仕様に対応しているかのチェックをすることができるようになります。</p>\n<div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">HTMLScriptElement</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supports</span><span class=\"token punctuation\">(</span><span class=\"token string\">'importmap'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Use &#x3C;script type=\"importmap\" ...></span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">HTMLScriptElement</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">supports</span><span class=\"token punctuation\">(</span><span class=\"token string\">'module'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Use &#x3C;script type=\"module\" ...></span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Use classic method...</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h3>New array prototypes</h3>\n<p>Array と TypedArray で<code>findLast()</code>と<code>findLastIndex()</code>が使えるようになりました。\nこの二つの関数は引数で渡された条件に合致する配列内の<strong>最後の要素</strong>の値、位置をそれぞれ返します。</p>\n<div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">130</span><span class=\"token punctuation\">,</span> <span class=\"token number\">44</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> last <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">findLast</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> value <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 44</span>\n<span class=\"token keyword\">const</span> lastIndex <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">findLastIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> value <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>lastIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 4</span>\n</code></pre></div>\n<h3>Emulate Chrome 100 in the UA string</h3>\n<p>あと数ヶ月で Chrome のバージョンは 3 桁となる 100 に到達します。\nバージョンや UA 文字列をパースするコードがある場合は 3 桁でも動くかどうか確認しましょう。</p>\n<p>現在のバージョンを 100 にする<a href=\"https://developer.chrome.com/blog/force-major-version-to-100/\">#force-major-version-to-100</a>フラグを使って、既存のコードが正しく動くか確認することができます。</p>\n<h3>And more!</h3>\n<p>上記以外のようなアップデートがあります。</p>\n<ul>\n<li>フォーム入力の改行が Gecko や WebKit と同じ方法で正規化されるようになりました。\n<ul>\n<li>これによりブラウザ間の相互運用性が向上しました。</li>\n</ul>\n</li>\n<li><code>client hint</code>のプレフィクスを<code>sec-ch</code>にするように標準化を進めています。\n<ul>\n<li>例えば<code>dpr</code>は<code>sec-ch-dpr</code>のようになります。</li>\n<li>以前の仕様も当分の間サポートを続けますが、いずれは非推奨となり削除されることを想定しましょう。</li>\n</ul>\n</li>\n<li>閉じている<code>&#x3C;detail></code>要素が検索可能になり、閉じている<code>&#x3C;detail></code>要素内の element にスクロールしようとした際は閉じられている<code>&#x3C;detail></code>要素を自動的に開くようになりました。</li>\n</ul>\n<h3>What's New In DevTools (Chrome 97)</h3>\n<p>DevTools についてはこちらの日本語訳を参照ください。</p>\n<p><a href=\"https://developer.chrome.com/ja/blog/new-in-devtools-97/\">https://developer.chrome.com/ja/blog/new-in-devtools-97/</a></p>\n<h3>Deprecations and removals in Chrome 97</h3>\n<p>Chrome97 で非推奨になったもの、もしくは削除されたものです</p>\n<p><a href=\"https://developer.chrome.com/blog/deps-rems-97/\">https://developer.chrome.com/blog/deps-rems-97/</a></p>\n<h3>Remove SDES key exchange for WebRTC</h3>\n<p>WebRTC の SDES 鍵交換の仕様は 2013 年以降、関連する IETF の標準仕様では MUST NOT となっており、近年では Chrome での使用率も大幅に低下しているので Chrome97 で廃止されました。</p>\n<p>参考:</p>\n<p><a href=\"https://webrtc-security.github.io/report_ja/\">https://webrtc-security.github.io/report_ja/</a></p>\n<h3>Remove WebSQL in third-party contexts</h3>\n<p>サードパーティ製の WebSQL が廃止されました。W3C では代わりに Web Storage と Indexed Database を推奨しています。</p>\n<h3>Remove SDP Plan B</h3>\n<p>WebRTC でセッションを確立するために使用される SDP に非標準の実装であった<code>Plan B</code>が削除されました。</p>\n<p>参考: SDP の Unified Plan と Plan B</p>\n<p><a href=\"https://blog.jxck.io/entries/2018-01-05/sdp-unified-plan.html\">https://blog.jxck.io/entries/2018-01-05/sdp-unified-plan.html</a></p>\n<h2>その他 Chrome Platform Status に記載されていたもの</h2>\n<p><a href=\"https://www.chromestatus.com/features#milestone%3D97\">https://www.chromestatus.com/features#milestone%3D97</a></p>\n<h3>Feature policy for Keyboard API</h3>\n<p>各言語に対応した keybord レイアウト情報を返す<code>getLayoutMap()</code>メソッドは全てのコンテキスト(iframe 内など)では利用できないという問題点がありました。今回のアップデートで iframe の allow 属性に<code>keyboard-map</code>を追加することでこの問題を解決することができるようになりました。</p>\n<p><a href=\"https://chromestatus.com/features/5657965899022336\">https://chromestatus.com/features/5657965899022336</a></p>\n<h3><code>PermissionStatus.prototype.name</code></h3>\n<p><code>PermissionStatus</code> インターフェースに読み取り専用の属性 <code>\"name\"</code> を追加し、<code>PermissionStatus</code> が作成された後、パーミッションの名前が取得できるようになりました。</p>\n<p>今までは<code>Permissions API</code> を使って複数のパーミッションを同時に問い合わせた際、どの PermissionStatus がどのパーミッションに対応しているのかを識別する方法がありませんでした。</p>\n<p><a href=\"https://chromestatus.com/features/5651653697994752\">https://chromestatus.com/features/5651653697994752</a></p>\n<h3>Propagate request origin and redirect chain in passthrough service workers.</h3>\n<p><code>fetch(evt.request)</code>メソッドで navigation requests を発行する ServiceWorker が<code>FetchEvent.request</code> からのオリジンとリダイレクトチェーンを使用するようになります。</p>\n<p>今までは常に ServiceWorker のオリジンが設定され、リダイレクトチェーンを使用することはありませんでした。</p>\n<p><a href=\"https://chromestatus.com/features/5752539724120064\">https://chromestatus.com/features/5752539724120064</a></p>\n<h3>Support calc(<code>&#x3C;number></code>) where only accepts <code>&#x3C;integer></code></h3>\n<p><a href=\"https://cybozu.github.io/frontend-expert/posts/release-chrome-96\">Chrome 96 リリースノートまとめ</a>にも記載したものが、Chrome97 で追加されました。</p>\n<blockquote>\n<p>css の calc()関数で integer しか受け取らないような場所でも number を指定できるようになりました。 もっとも近い整数に丸められます。</p>\n</blockquote>\n<p><a href=\"https://chromestatus.com/features/5656451751084032\">https://chromestatus.com/features/5656451751084032</a></p>\n<h3>transform: perspective(none)</h3>\n<p>CSS transform プロパティ内で利用できる、<code>perspective()</code>関数への引数として'none'を実装としてサポートしました。<code>perspective(0)</code>と<code>perspective(none)</code>では挙動が変わるため、変形をしないことを意図する場合(単位行列として扱いたい場合)は<code>perspective(none)</code>を利用するようにしましょう。</p>\n<p><a href=\"https://chromestatus.com/features/5687325523705856\">https://chromestatus.com/features/5687325523705856</a></p>\n","metaData":{"title":"Web Transportのサポートなど、Chrome 97 リリースノートまとめ","author":"Saji","editor":"nus3","createdAt":"2022-01-21","summary":"Chrome 97 のリリースノートの要約です","tags":["Releasenote","Browser"],"updatedAt":"2022-01-21"}},{"slug":"release-firefox-96","content":"<ul>\n<li><a href=\"https://www.mozilla.org/en-US/firefox/96.0/releasenotes/\">https://www.mozilla.org/en-US/firefox/96.0/releasenotes/</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/96\">https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/96</a></li>\n</ul>\n<p>Firefox 96 がリリースされました！\n全体的に性能面での改善が多くを占めるアップデートでした。\n本リリースでは Cookie Policy がデフォルトで <code>SameSite=lax</code>を指定するようになりました。\nまた、<code>color-scheme</code>プロパティが追加され、IE 以外の主要なブラウザで利用可能になりました。</p>\n<h2>New</h2>\n<ul>\n<li>ノイズ抑制やオートゲインコントロールの大きな改善とエコーキャンセレーションの若干の改善がされました</li>\n<li>メインスレッドの負荷が大きく軽減されました</li>\n<li>Cookie Policy をデフォルトで <code>SameSite=lax</code> に強制するようになりました</li>\n</ul>\n<h2>Fixed</h2>\n<ul>\n<li>macOS で Gmail のリンクをコマンドクリックした際、正常に新しいタブが開くようになりました\n<ul>\n<li>Firefox95 で unresolved になっていた問題の解決</li>\n</ul>\n</li>\n<li>ビデオの SSRC(RTP セッションでの参加者の識別子) が断続的にドロップする問題が修正されました</li>\n<li>特定のサイトでビデオの画質が劣化する問題が修正されました</li>\n<li>macOS でいくつかの問題を回避するためにフルスクリーンでのビデオが無効化されています</li>\n</ul>\n<h2>Developer</h2>\n<ul>\n<li>Linux にて <code>Select All</code> のショートカットキーが <code>Alt-A</code> から <code>Ctrl-A</code> に変更されました\n<ul>\n<li>web-compatibility の確保やアクセスキーとの衝突回避のため</li>\n</ul>\n</li>\n</ul>\n<h2>Web Platform</h2>\n<ul>\n<li>Web Lock API が実装されました。\n<ul>\n<li>異なる ServiceWorker やタブで実行されているスクリプトを相互連携させることが可能になります</li>\n</ul>\n</li>\n<li>WebRTC ライブラリが更新されたことで Web 会議アプリでの音声やビデオ機能が改善されました</li>\n<li>CSS にて <code>color-scheme</code> がサポートされ、Web ページがどのカラースキームでレンダリング可能かを指定できるようになりました</li>\n</ul>\n<h2>開発者向けの変更</h2>\n<h3>for web developers</h3>\n<h4>CSS</h4>\n<ul>\n<li>CSS で色の値として利用される <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/hwb()\"><code>hwb()</code></a> 関数が実装されました</li>\n<li><a href=\"https://developer.mozilla.org/ja/docs/Web/CSS/color-scheme\"><code>color-scheme</code></a>プロパティがサポートされました</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/counter-reset\"><code>counter-reset</code></a> プロパティにて逆順の CSS カウンターを生成する <code>reversed()</code> 関数がサポートされました</li>\n</ul>\n<h4>HTTP</h4>\n<ul>\n<li>同じドメインから送信された Cookie でも異なるスキームを使用されているものは Cookie SameSite ディレクティブについて別サイトから送信されたものと見なすようになりました</li>\n<li>SameSite 属性が指定されていない Cookie は暗黙的に <code>SameSite=lax</code> が指定されるようになりました</li>\n<li><code>SameSite=none</code> を指定した Cookie はセキュアなコンテキストが必要になりました</li>\n<li>Cookie の SameSite についてはこちらをお読みください\n<ul>\n<li><a href=\"https://blog.cybozu.io/entry/2020/05/07/080000\">Cookie の SameSite 属性について - Cybozu Inside Out | サイボウズエンジニアのブログ</a></li>\n</ul>\n</li>\n</ul>\n<h4>APIs</h4>\n<ul>\n<li>Android において <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Navigator/canShare\"><code>navigator.canShare()</code></a> がサポートされました</li>\n<li>デフォルトで <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Locks_API\">Web Locks API</a> が有効になりました</li>\n</ul>\n<h4>Canvas</h4>\n<ul>\n<li>WebP の画像エンコーダーをサポートしました</li>\n</ul>\n<h4>DOM</h4>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ja/docs/Web/API/IntersectionObserver\"><code>IntersectionObserver()</code></a> のコンストラクターが関連付けられたパラメータオプションにから文字が渡された場合に例外発生ではなく <code>rootMargin</code> を設定するようになりました</li>\n</ul>\n<h4>Media, WebRTC, and Web Audio</h4>\n<ul>\n<li>いくつかの非標準な静的フィールドが <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_Statistics_API\">WebRTC Statistics API</a> から削除されました</li>\n</ul>\n<h4>WebDriver conformance (Marionette)</h4>\n<ul>\n<li><code>WebDriver:GetElementShadowRoot</code> コマンドが追加されました\n<ul>\n<li>指定された要素が持っている shadow root を取り出す</li>\n</ul>\n</li>\n<li><code>WebDriver:ExecuteScript</code> 及び <code>WebDriver:ExecuteAsyncScript</code>にて要素の <code>ShadowRoot</code> を返す際に <code>cyclic object error</code> が発生する問題が解決されました</li>\n<li><code>WebDriver:Print</code> が PDF にプリントする際のページ範囲をサポートするように拡張されました</li>\n</ul>\n","metaData":{"title":"CSS color-scheme サポート追加等 Firefox 96.0 リリースノートまとめ","author":"BaHo","editor":"shisama","createdAt":"2022-01-20","summary":"Firefox 96.0 のリリースノートの日本語まとめです","tags":["Releasenote","Browser"],"updatedAt":"2022-01-20"}},{"slug":"release-firefox-95","content":"<ul>\n<li><a href=\"https://www.mozilla.org/en-US/firefox/95.0/releasenotes/\">https://www.mozilla.org/en-US/firefox/95.0/releasenotes/</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/95\">https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/95</a></li>\n</ul>\n<p>Firefox 95 がリリースされました。\n本アップデートでは RLBox という新しいコードサンドボックス機能が導入されて信頼できないコードに対する安全性が向上しました。\nまた、Firefox App から Slack.com の Huddle や Call 機能が利用できるようになったのは嬉しいですね。</p>\n<h2>New</h2>\n<ul>\n<li><a href=\"https://hacks.mozilla.org/2021/12/webassembly-and-back-again-fine-grained-sandboxing-in-firefox-95/\">RLBox</a>が全てのプラットフォームで有効になりました\n<ul>\n<li>信頼できないコードを WebAssembly を用いてネイティブコードへコンパイルすることで意図しない領域外へのメモリアクセスを防止する機能のようです</li>\n<li><a href=\"https://hacks.mozilla.org/2021/12/webassembly-and-back-again-fine-grained-sandboxing-in-firefox-95/\">mozilla hacks</a>によれば、従来のプロセスを分割する手法における非同期化のオーバーヘッドやメモリフットプリントの増加を懸念した手法だと記載されていました。</li>\n</ul>\n</li>\n<li>Windows 10 及び Windows 11 において Firefox App を Microsoft Store からダウンロードできるようになりました</li>\n<li>ブラウザクロームとツールバースクリーンショットがシンプルになりました</li>\n<li>macOS において WindowsServer イベントの処理時の CPU 使用量が削減されました</li>\n<li>macOS において主にフルスクリーン時のソフトウェアでコードされたビデオコンテンツの使用電力が削減されました</li>\n<li>PiP のトグルボタンをビデオウィンドウの反対側にへ移動できるようになりました</li>\n<li>Site Isolation が有効化されました。</li>\n</ul>\n<h2>Fixed</h2>\n<ul>\n<li>Firefox を起動した際、JAWS や ZoomText が Firefox をフォーカスするようになりました</li>\n<li>VoiceOver が ARIA の switch ロールの状態を正しく報告するようになりました</li>\n<li>macOS でコンテンツプロセスの起動速度が速くなりました</li>\n<li>メモリアロケータが改善されました</li>\n<li>JavaScript を先行してコンパイルするようになり、ページロード時のパフォーマンスが改善されました</li>\n</ul>\n<h2>Changed</h2>\n<ul>\n<li>Slack.com で Call や Huddles へアクセスできるように User Agent オーバーライドが追加されました</li>\n</ul>\n<h2>Developer</h2>\n<h3>For web developers</h3>\n<h4>HTML</h4>\n<ul>\n<li>グローバル属性 <code>inputmode</code> が全てのプラットフォームでサポートされるようになりました</li>\n</ul>\n<h4>CSS</h4>\n<ul>\n<li>Android 版 Firefox で cursor プロパティがサポートされました</li>\n</ul>\n<h4>APIs</h4>\n<ul>\n<li><code>Crypt.randomUUID()</code> 関数がサポートされました</li>\n</ul>\n<h4>Media, WebRTC, and Web Audio</h4>\n<ul>\n<li><code>SpeechSynthesisEvent.elapseTime</code> がミリ秒ではなく秒単位の経過時間を返すようになりました</li>\n</ul>\n<h4>WebDriver Conformance (Marionette)</h4>\n<ul>\n<li>Marionette が使用しているポートがプロファイルディレクトリにある <code>MarionetteActivePort</code> ファイルに書き込まれるようになりました</li>\n<li><code>WebDriver:NewSession</code> が最初のタブのロードが完了するまで待機するようになりました</li>\n</ul>\n<h3>For add-on developers</h3>\n<ul>\n<li>browserSettings に <code>overrideContentColorScheme</code> が追加され、<code>.css.prefers-color-scheme.content.override</code> という環境設定を制御することでブラウザのテーマとは独立したページ単位の優先的な配色を設定する機能が追加されました</li>\n</ul>\n<h2>unresolved</h2>\n<ul>\n<li>Gmail のリンクをコマンドクリックしても新しいタブが開かない問題がありました\n<ul>\n<li>回避策: Gmail のリンクをコマンドキーを利用せずにクリックすると新しいタブが開きます</li>\n</ul>\n</li>\n</ul>\n","metaData":{"title":"新しいコードサンドボックス機能 RLBox の追加など Firefox 95.0 リリースノートまとめ","author":"BaHo","createdAt":"2021-12-20","summary":"Firefox 95.0 のリリースノートの日本語まとめです","tags":["Releasenote","Browser"],"updatedAt":"2021-12-20"}},{"slug":"release-chrome-96","content":"<p>Chrome 96 のリリースノート関連の情報をまとめました。</p>\n<ul>\n<li><a href=\"https://developer.chrome.com/blog/new-in-chrome-96/\">https://developer.chrome.com/blog/new-in-chrome-96/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/new-in-devtools-96/\">https://developer.chrome.com/blog/new-in-devtools-96/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/deps-rems-96/\">https://developer.chrome.com/blog/deps-rems-96/</a></li>\n<li><a href=\"https://www.chromestatus.com/features#milestone%3D96\">https://www.chromestatus.com/features#milestone%3D96</a></li>\n<li><a href=\"https://v8.dev/blog/v8-release-96\">https://v8.dev/blog/v8-release-96</a></li>\n</ul>\n<h2>New In Chrome (Chrome 96)</h2>\n<p>Chrome 96で新しく追加された機能です。</p>\n<h3>Manifest id for PWAs</h3>\n<p>今まではPWAをインストールする際、ブラウザ側でPWAを一意に識別するための明確な方法が存在しておらず、ブラウザの判断に委ねられていました。(実際ブラウザによってPWAマニフェストファイルの<code>start_url</code>が利用されていたり、マニフェストファイル自体のパスなどが利用されたりしています)</p>\n<p>今回のアップデートにより、マニフェストファイル内でPWAの識別子を<code>id</code>プロパティとして明示的に定義できるようになりました。</p>\n<p>マニフェストに<code>id</code>プロパティを追加すると、マニフェストファイルの<code>start_url</code>プロパティやマニフェストファイル場所へ依存がなくなり、これらのフィールドを更新することが容易になります。</p>\n<h4>サポート状況と予定</h4>\n<p>デスクトップのChromium搭載ブラウザ</p>\n<ul>\n<li>Chrome 96からidプロパティがサポートされます。</li>\n</ul>\n<p>モバイルブラウザ(マニフェストファイルのURLをユニークIDとして使用しているもの)</p>\n<ul>\n<li>2022年前半にサポートが開始される予定です。</li>\n</ul>\n<h4>idプロパティの追加について</h4>\n<p>すでに運用しているPWAのマニフェストファイルにidを追加する場合</p>\n<ul>\n<li>ブラウザから割り当てられたIDを使用する必要があります。</li>\n<li>割り当てられているID は、Dev Tools の <code>Application</code> パネルの <code>Manifest</code> ペインで確認できます。</li>\n</ul>\n<p>新しくPWAを作成する場合</p>\n<ul>\n<li>idプロパティに好きな文字列を設定することができますが、将来的に変更することはできないので慎重に選んでください。</li>\n</ul>\n<h3>URL protocol handlers for PWAs</h3>\n<p>今までwebページで利用可能だった<code>URL protocol handler</code>の登録がChrome 96からはPWAでもインストール時に行えるようになりました。</p>\n<p>PWAの場合は以下のように<code>protocol_handlers</code>プロパティをマニフェストファイルに記載することで登録できます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...\n  <span class=\"token property\">\"protocol_handlers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"protocol\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"web+tea\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/tea?type=%s\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"protocol\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"web+coffee\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/coffee?type=%s\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>それぞれ、<code>protocol</code>には登録したいプロトコル名を、<code>url</code>にはそのプロトコルのURLをクリックしたときに開いてほしいURLを指定します。ただし、これらのプロトコル登録にはいくつかの制限があります。詳細や登録方法などは<a href=\"https://web.dev/url-protocol-handler/\">こちら</a>を参照してください。</p>\n<h3>Priority hints (origin trial)</h3>\n<p>ブラウザがページ内リソース(<code>image</code>,<code>script</code>,<code>CSS</code>)を読み込む際の優先度ヒントを追加できる機能がOrigin Trialsとして実験的に利用できるようになりました。</p>\n<p>具体的には以下のような形で対象となるリソースに<code>importance</code>属性で優先度(<code>high</code>,<code>low</code>,<code>auto</code>から選択)を指定します。</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&#x3C;!-- We don't want a high priority for this above-the-fold image --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/not-important.svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">importance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>low<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&#x3C;!-- Initiate an early fetch for a resource, but de-prioritize it --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>preload<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/script.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>script<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">importance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>low<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://example.com/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>importance<span class=\"token operator\">:</span> <span class=\"token string\">'high'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Trigger a high priority fetch</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>script</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>今回のリリースノートでは Google Flights ページで、<code>Priority hitns</code> の有無におけるLCP(最大視覚コンテンツの表示時間)の比較を行った結果を紹介しています。この比較では背景画像の<code>img</code>タグに対して<code>importance=\"high\"</code>を指定することでLCPが 2.6s から 1.9s に向上したとしています。</p>\n<p>機能詳細やOrigin Trialとして登録する方法、サンプルなどについては<a href=\"https://web.dev/priority-hints/\">Optimizing resource loading with Priority Hints</a>を参考にしてください。</p>\n<h3>Emulate Chrome 100 in the UA string</h3>\n<p>来年の早い段階でChromeはバージョン100がリリースされる予定であり、これ以降３桁のバージョン番号に突入します。そのため、バージョン番号を利用しているコードや<code>UserAgent</code>をパースしているコードが３桁のバージョン番号でも正しく動作することを保証する必要があります。</p>\n<p>これらを検証するためChrome 96では<code>#force-major-version-to-100</code>というフラグが追加されました。このフラグを有効にするとChromeのバージョンだけが100になった状態をシミュレートすることができ、バージョン番号を扱う動作に問題がないかの検証を行うことができます。</p>\n<p>詳しくは <a href=\"https://developer.chrome.com/blog/force-major-version-to-100/\">Force Chrome major version to 100 in the User-Agent string.</a> を参照してください。</p>\n<h3>Chrome Dev Summit</h3>\n<p>Chrome Dev Summitにおけるすべての動画やコンテンツはオンラインで視聴可能です。詳しくは <a href=\"https://developer.chrome.com/devsummit/\">Chrome Dev Summit site</a> をご覧ください。またkeynoteや配信を見逃した方はChrome Developers YouTube Channelの <a href=\"https://www.youtube.com/playlist?list=PLNYkxOF6rcIBju4hD9ed1pt6YO20LgLWg\">CDS Playlist</a> を合わせて参照してください。</p>\n<h3>その他</h3>\n<p><code>Back/forward cache</code>の機能が<code>stable</code>になりました。</p>\n<ul>\n<li>これによりFireFoxやSafariと挙動を揃えることができるようになりました。</li>\n</ul>\n<h2>What's New In DevTools (Chrome 96)</h2>\n<p>DevTools についてはこちらの日本語訳を参照ください。</p>\n<p><a href=\"https://developer.chrome.com/ja/blog/new-in-devtools-96/\">https://developer.chrome.com/ja/blog/new-in-devtools-96/</a></p>\n<h2>Deprecations and removals in Chrome 96</h2>\n<p>Chrome96で非推奨になったもの、もしくは削除されたものです<br>\n<a href=\"https://developer.chrome.com/blog/deps-rems-96/\">https://developer.chrome.com/blog/deps-rems-96/</a></p>\n<h3>The \"basic-card\" method of PaymentRequest API</h3>\n<p>PaymentRequestを呼び出すときに指定できる<code>basic card</code>method(ブラウザで保存されているカード情報を使う方法)が非推奨になります。</p>\n<p>Chrome 96では<code>basic card</code>を使っているとDevToolsのConsoleにwarningメッセージが表示されます。また、Chrome 100では利用できなくなります。<code>basic card</code>を使っている場合は別のmethodに変更するように早めに対応したほうが良さそうです。</p>\n<p><a href=\"https://blog.chromium.org/2021/10/sunsetting-basic-card-payment-method-in.html\">https://blog.chromium.org/2021/10/sunsetting-basic-card-payment-method-in.html</a></p>\n<h2>その他Chrome Platform Statusに記載されていたもの</h2>\n<p><a href=\"https://www.chromestatus.com/features#milestone%3D96\">https://www.chromestatus.com/features#milestone%3D96</a></p>\n<h3>Adding captureTimestamp and senderCaptureTimeOffset to RTCRtpContributingSource.</h3>\n<p>WebRTC APIの一つである<code>RTCRtpContributingSource</code>にオーディオとビデオフレームの同期やend-to-endの遅延が測定できる<code>captureTimestamp</code>と<code>senderCaptureTimeOffset</code>プロパティが追加されます。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5728533701722112\">https://www.chromestatus.com/feature/5728533701722112</a></p>\n<h3>CSS @counter-style descriptor 'speak-as'</h3>\n<p><code>@counter-style</code>を使った際にカウンターが音声形式でどのように表されるかを指定できるプロパティ<code>speak-as</code>が追加予定で、現状は<code>In developer trial</code>で試験運用中です。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5687059677184000\">https://www.chromestatus.com/feature/5687059677184000</a>\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/@counter-style/speak-as\">https://developer.mozilla.org/en-US/docs/Web/CSS/@counter-style/speak-as</a></p>\n<h3>Clipboard: Preserve PNG metadata</h3>\n<p>クリップボードからPNGを読み込む際にサニタイズされなくなります。\n(前まではメタデータを削除していました)</p>\n<p><a href=\"https://www.chromestatus.com/feature/5629962485760000\">https://www.chromestatus.com/feature/5629962485760000</a></p>\n<h3>Cross-Origin-Embedder-Policy: credentialless</h3>\n<p>COEPに<code>credentialless</code>が追加できるようになりました。\n<code>credentialless</code>を指定するとサーバーへのリクエスト時に認証方法(CookieやAuthorizationヘッダなど)が省かれるようになります。</p>\n<p><a href=\"https://www.chromestatus.com/feature/4918234241302528\">https://www.chromestatus.com/feature/4918234241302528</a></p>\n<p>参考: SharedArrayBuffer と過渡期な cross-origin isolation の話\n<a href=\"https://blog.agektmr.com/2021/11/cross-origin-isolation.html\">https://blog.agektmr.com/2021/11/cross-origin-isolation.html</a></p>\n<h3>Disable propagation of body style to viewport when contained</h3>\n<p>ルートやbody要素に<code>contain: none</code>以外の値を使用するとbodyからのCSSプロパティの伝搬が無効になります。\n<a href=\"https://www.chromestatus.com/feature/5663240823504896\">https://www.chromestatus.com/feature/5663240823504896</a></p>\n<h3>EME MediaKeySession Closed Reason</h3>\n<p>MediaKeySessionのcloseメソッドが<code>MediaKeySessionClosedReason</code>を返すようになります。\nsessionが閉じられた理由(<code>internal-error</code>, <code>closed-by-application</code>など)を取得してハンドリングできるようになります。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> keySystemAccess <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> <span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">requestMediaKeySystemAccess</span><span class=\"token punctuation\">(</span>\n<span class=\"token comment\">//   ...</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Create media keys.</span>\n<span class=\"token keyword\">const</span> mediaKeys <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> keySystemAccess<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createMediaKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Create a key session.</span>\nkeySession <span class=\"token operator\">=</span> mediaKeys<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Generate a fake license request.</span>\n<span class=\"token keyword control-flow\">await</span> keySession<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">generateRequest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"webm\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint8Array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nkeySession<span class=\"token punctuation\">.</span><span class=\"token property-access\">closed</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">reason</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// Reason is either undefined if not supported, \"internal-error\",</span>\n<span class=\"token comment\">// \"closed-by-application\", \"release-acknowledged\",</span>\n<span class=\"token comment\">// \"hardware-context-reset\", or \"resource-evicted\".</span>\n<span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Media key session was closed. Reason: \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>reason<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\".</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><a href=\"https://www.chromestatus.com/feature/5632124143009792\">https://www.chromestatus.com/feature/5632124143009792</a></p>\n<p>参考: EME MediaKeySession Closed Reason Sample\n<a href=\"https://googlechrome.github.io/samples/media/key-session-closed-reason.html\">https://googlechrome.github.io/samples/media/key-session-closed-reason.html</a></p>\n<h3>HTTP->HTTPS redirect for HTTPS DNS records</h3>\n<p>DNSのHTTPSレコードを従来のAレコードやAAAAレコードと一緒に照会し、解析するようになります。\nHTTPSレコードを追加し、Chromeがそれを受信するとChromeは常にそのウェブサイトにHTTPSで接続します。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5485544526053376\">https://www.chromestatus.com/feature/5485544526053376</a></p>\n<h3>InteractionID in EventTiming</h3>\n<p>Event Timing APIのPerformanceEventTimingに<code>interactionId</code>が追加されました。\nユーザーの操作に対して関連するイベント(たとえばユーザーがタップした時にはpointerdown→mousedown→pointerup→mouseup→clickのイベントが発生する)は<code>interactionId</code>が同じになります。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5674224959094784\">https://www.chromestatus.com/feature/5674224959094784</a></p>\n<h3>Media Queries: prefers-contrast feature</h3>\n<p>OSが設定している色のコントラスト設定に対応するメディアクエリ<code>prefers-contrast</code>が追加されました。</p>\n<div class=\"remark-highlight\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.contrast</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* ... */</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">prefers-contrast</span><span class=\"token punctuation\">:</span> more<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\"><span class=\"token class\">.contrast</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* OSでコントラストの設定が高い場合に適応される */</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">prefers-contrast</span><span class=\"token punctuation\">:</span> less<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\"><span class=\"token class\">.contrast</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* OSでコントラストの設定が低い場合に適応される */</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><a href=\"https://www.chromestatus.com/feature/5646323212615680\">https://www.chromestatus.com/feature/5646323212615680</a></p>\n<p>参考: prefers-contrast(MDN)<br>\n<a href=\"https://developer.mozilla.org/ja/docs/Web/CSS/@media/prefers-contrast\">https://developer.mozilla.org/ja/docs/Web/CSS/@media/prefers-contrast</a></p>\n<h3>Support calc(<code>&#x3C;number></code>) where only accepts <code>&#x3C;integer></code></h3>\n<p>cssの<code>calc()</code>関数でintegerしか受け取らないような場所でもnumberを指定できるようになりました。\nもっとも近い整数に丸められます。</p>\n<p>例えば、下記はいずれも<code>column-count: 1</code>と同義です。</p>\n<div class=\"remark-highlight\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.example</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">column-count</span><span class=\"token punctuation\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">column-count</span><span class=\"token punctuation\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><a href=\"https://www.chromestatus.com/feature/5656451751084032\">https://www.chromestatus.com/feature/5656451751084032</a></p>\n<p>参考:\n<a href=\"https://drafts.csswg.org/css-values-4/#calc-range\">https://drafts.csswg.org/css-values-4/#calc-range</a></p>\n<h2>V8 release v9.6</h2>\n<p>V8のアップデート情報です。</p>\n<h3>WebAssembly : Reference Types</h3>\n<p>WebWebAssemblyでプロポーザルとして提案されている<a href=\"https://github.com/WebAssembly/reference-types/blob/master/proposals/reference-types/Overview.md\">Reference Type</a>がV8 v9.6からサポートされます。\n現状、WASMの関数は引数や戻り値に、整数や浮動小数点数といったプリミティブな型しか扱えませんが、<code>Reference Types</code>機能はこれに加えて、JavaScriptオブジェクトへの参照を渡せるようにしたものです。</p>\n","metaData":{"title":"Chrome 96 リリースノートまとめ","author":"Saji","editor":"nus3","createdAt":"2021-12-02","summary":"Chrome 96 のリリースノートの要約です","tags":["Releasenote","Browser"],"updatedAt":"2021-12-02"}},{"slug":"release-chrome-95","content":"<p>Chrome 95 のリリースノート関連の情報をまとめました。</p>\n<ul>\n<li><a href=\"https://developer.chrome.com/blog/new-in-chrome-95/\">https://developer.chrome.com/blog/new-in-chrome-95/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/new-in-devtools-95/\">https://developer.chrome.com/blog/new-in-devtools-95/</a></li>\n<li><a href=\"https://developer.chrome.com/blog/deps-rems-95/\">https://developer.chrome.com/blog/deps-rems-95/</a></li>\n<li><a href=\"https://www.chromestatus.com/features#milestone%3D95\">https://www.chromestatus.com/features#milestone%3D95</a></li>\n</ul>\n<h2>Routing with URLPattern</h2>\n<p><code>URLPattern</code>という機能が追加されました。現在は Chrome、Edge の 95 以上に対応しています。</p>\n<p>他のブラウザや Node.js ではまだサポートされていない機能ですが、<a href=\"https://github.com/kenchris/urlpattern-polyfill\">urlpattern-polyfill</a>で polyfill できます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> pattern <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLPattern</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> pathname<span class=\"token operator\">:</span> <span class=\"token string\">\"/books/:id\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>pattern<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://example.com/books/123\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>pattern<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://example.com/books/123\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">pathname</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">groups</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// { id: '123' }</span>\n\n<span class=\"token comment\">// 引数で渡せる全てのプロパティ</span>\n<span class=\"token keyword\">const</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLPattern</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  protocol<span class=\"token operator\">:</span> <span class=\"token string\">\"http{s}?\"</span><span class=\"token punctuation\">,</span>\n  username<span class=\"token operator\">:</span> <span class=\"token string\">\":username\"</span><span class=\"token punctuation\">,</span>\n  password<span class=\"token operator\">:</span> <span class=\"token string\">\":password\"</span><span class=\"token punctuation\">,</span>\n  hostname<span class=\"token operator\">:</span> <span class=\"token string\">\":subdomain.example.com\"</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token string\">\":port(80|443)\"</span><span class=\"token punctuation\">,</span>\n  pathname<span class=\"token operator\">:</span> <span class=\"token string\">\"/:path\"</span><span class=\"token punctuation\">,</span>\n  search<span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span>\n  hash<span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>詳細はこちら\n<a href=\"https://web.dev/urlpattern/\">https://web.dev/urlpattern/</a></p>\n<h2>Picking colors with the Eye Dropper API</h2>\n<p>カラーを取得する Eye Dropper API が追加されました</p>\n<p>詳細はこちらの記事で解説しています。</p>\n<p><a href=\"https://cybozu.github.io/frontend-expert/posts/eyedropper-api\">Chrome 95 で追加された画面上の色を取得する EyeDropper API について</a></p>\n<h2>PWA Summit</h2>\n<p>10 月 6~7 日に PWA Summit が開催されてました<br>\n見逃した方はアーカイブが下記のリンクに残ってるので、そこから確認できます</p>\n<p><a href=\"https://pwasummit.org/\">https://pwasummit.org/</a><br>\n<a href=\"https://www.youtube.com/channel/UC1j3gvdVISAEO1_2MwA5oQw/videos\">https://www.youtube.com/channel/UC1j3gvdVISAEO1_2MwA5oQw/videos</a></p>\n<h2>User-agent reduction origin trial</h2>\n<p>Origin Trial で実際に User-Agent の文字列が削減された後の挙動が試せます</p>\n<p>参考:</p>\n<ul>\n<li><a href=\"https://web.dev/user-agent-client-hints/\">User-Agent Client Hints によるユーザーのプライバシーと開発者体験の改善</a></li>\n<li><a href=\"https://developers-jp.googleblog.com/2021/09/chrome-user-agent.html\">User-Agent Reduction origin trial(日本語訳)</a></li>\n</ul>\n<h2>And more!</h2>\n<ul>\n<li>Storage Foundation API を origin trial で試せます</li>\n<li>WebAssembly で例外処理のサポートが提供され、例外がスローされたときにコードが中断できるようになります</li>\n<li>Chrome 100 が来年きます。バージョンが 2 桁から 3 桁になるので、自分のコードに何らかの影響があるかどうかを確認するといいかもしれません</li>\n</ul>\n<h2>DevTools</h2>\n<p>DevTools についてはこちらの日本語訳を参照ください。</p>\n<p><a href=\"https://developer.chrome.com/ja/blog/new-in-devtools-95/\">https://developer.chrome.com/ja/blog/new-in-devtools-95/</a></p>\n<h2>Deprecations and removals in Chrome 95</h2>\n<p>Chrome 95 で非推奨になったもの、もしくは削除されたものです。</p>\n<h3>Support for URLs with non-IPv4 hostnames ending in numbers</h3>\n<p>有効な IPv4 アドレスではない、 <code>http://foo.127.1/</code> のような数字で終わる host name を持つ URL が拒否されるようになります。</p>\n<p>社内のプレビュー環境などで IP アドレスをポストフィックスとして利用してたりする場合は影響がでているかもしれません。</p>\n<h3>WebAssembly cross-origin module sharing</h3>\n<p>cross-originでsame-siteな環境間でのWebAssemblyモジュールの共有が非推奨になりました\n<a href=\"https://www.chromestatus.com/feature/5650158039597056\">https://www.chromestatus.com/feature/5650158039597056</a></p>\n<p>合わせてこちらも参考にしてください<br>\n<a href=\"https://developer.chrome.com/blog/wasm-module-sharing-restricted-to-same-origin/\">Restricting Wasm module sharing to same-origin</a></p>\n<h3>Deprecate U2F API (Cryptotoken)</h3>\n<p>U2F API が非推奨になり、Chrome 98 からはデフォルトで無効になります。</p>\n<p>U2F とはなんぞやという人はこちらの記事が参考になります。</p>\n<p><a href=\"https://blog.jxck.io/entries/2018-05-15/webauthentication-api.html\">Web Authentication API で FIDO U2F(YubiKey) 認証 | blog.jxck.io</a></p>\n<h2>その他 Chrome Platform Status に記載されていたもの</h2>\n<blockquote>\n<p><a href=\"https://www.chromestatus.com/features#milestone=95\">https://www.chromestatus.com/features#milestone=95</a></p>\n</blockquote>\n<h3>Back-forward cache for same-site navigations on Android</h3>\n<p>Chrome 86 から origin trial で試せていた Android での戻る/進むのキャッシュが same-site で効くようになりました。<br>\n<a href=\"https://www.chromestatus.com/feature/5694778600587264\">https://www.chromestatus.com/feature/5694778600587264</a></p>\n<p>bfcache(Back/forward cache)については下記に詳細の説明が載っています。<br>\n<a href=\"https://web.dev/bfcache/\">https://web.dev/bfcache/</a></p>\n<h3>CSS @counter-style rules in shadow trees</h3>\n<p>Shadow tree に対してカスタムの counter-style を定義することができるようになりました。<br>\n<a href=\"https://www.chromestatus.com/feature/5716198446596096\">https://www.chromestatus.com/feature/5716198446596096</a></p>\n<p><code>@counter-style</code>については下記を参考ください</p>\n<div class=\"remark-highlight\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@counter-style</span> circled-alpha</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">system</span><span class=\"token punctuation\">:</span> fixed<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">symbols</span><span class=\"token punctuation\">:</span> Ⓐ Ⓑ Ⓒ Ⓓ Ⓔ Ⓕ Ⓖ Ⓗ Ⓘ Ⓙ Ⓚ Ⓛ Ⓜ Ⓝ Ⓞ Ⓟ Ⓠ Ⓡ Ⓢ Ⓣ Ⓤ Ⓥ Ⓦ Ⓧ Ⓨ Ⓩ<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">suffix</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\"><span class=\"token class\">.items</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">list-style</span><span class=\"token punctuation\">:</span> circled-alpha<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>このスタイルを当てた list を作ると次のようなリストができます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">Ⓐ One\nⒷ Two\nⒸ Three\nⒹ Four\nⒺ FIve</code></pre></div>\n<p><a href=\"https://developer.mozilla.org/ja/docs/Web/CSS/@counter-style#specifying_symbols_with_counter-style\">https://developer.mozilla.org/ja/docs/Web/CSS/@counter-style#specifying_symbols_with_counter-style</a></p>\n<h3>Cookie size limits</h3>\n<p>Set-Cookie header、及び、document.cookie、CookieStore で設定される Cookie のサイズが制限されます。\n具体的には Cookie の名前と値の合計が 4096 バイトまでになり、Cookie の各属性値は 1024 バイトに制限する必要があります。</p>\n<p><a href=\"https://www.chromestatus.com/feature/4946713618939904\">https://www.chromestatus.com/feature/4946713618939904</a></p>\n<h3>Logical properties for contain-intrinsic-size</h3>\n<p>contain-intrinsic-size を省略した次の表記が追加されます。</p>\n<ul>\n<li>contain-intrinsic-{width,height}</li>\n<li>contain-intrinsic-{inline,block}-size</li>\n</ul>\n<p><a href=\"https://www.chromestatus.com/feature/5709654999957504\">https://www.chromestatus.com/feature/5709654999957504</a></p>\n<p>参考:</p>\n<p><a href=\"https://drafts.csswg.org/css-sizing-4/#intrinsic-size-override\">https://drafts.csswg.org/css-sizing-4/#intrinsic-size-override</a></p>\n<h3>contain-intrinsic-size</h3>\n<p>content-visibility で指定された要素の自然なサイズを制御するプロパティです。</p>\n<p>次の実装は画面外の section のレンダリングをスキップする例です。</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">section</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">content-visibility</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">contain-intrinsic-size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token number\">500</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>style</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>ビューポート外のコンテンツはレンダリングされなくなります。</p>\n<p><a href=\"https://developer.mozilla.org/ja/docs/Web/CSS/content-visibility\">https://developer.mozilla.org/ja/docs/Web/CSS/content-visibility</a></p>\n<h3>New UA platform version source on Windows for User-Agent Client Hints</h3>\n<p>Windows の Sec-CH-UA-Platform-Version(User-Agent Client Hints)で返されるバージョンが Windows プラットフォームの違いを識別できるように更新されました。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5080939765956608\">https://www.chromestatus.com/feature/5080939765956608</a><br>\n<a href=\"https://github.com/WICG/ua-client-hints/issues/220#issuecomment-870858413\">https://github.com/WICG/ua-client-hints/issues/220#issuecomment-870858413</a></p>\n<h3>Note taking new note URL</h3>\n<p>Web Application Manifest が <code>note_taking</code> と <code>new_note_url</code> に対応しました。\nWeb Application 側から新しいメモを書きたい時にユーザーエージェントに読み込ませたい URL を指定できるようになります。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5205972320518144\">https://www.chromestatus.com/feature/5205972320518144</a><br>\n<a href=\"https://wicg.github.io/manifest-incubations/index.html#note_taking-member\">https://wicg.github.io/manifest-incubations/index.html#note_taking-member</a></p>\n<h3>Secure payment confirmation</h3>\n<p>WebAuthn を利用して、Web 上での支払い時の認証を強化することができるようになります。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5702310124584960\">https://www.chromestatus.com/feature/5702310124584960</a></p>\n<p>※ Payment Request API で簡単・高速な決済を実現する\n<a href=\"https://developers.google.com/web/updates/2016/07/payment-request?hl=ja\">https://developers.google.com/web/updates/2016/07/payment-request?hl=ja</a></p>\n<p>※ PaymentRequestAPI で secure-payment-confirmation を使った実装例\n<a href=\"https://www.w3.org/TR/2021/WD-secure-payment-confirmation-20210831/#sctn-sample-authentication\">https://www.w3.org/TR/2021/WD-secure-payment-confirmation-20210831/#sctn-sample-authentication</a></p>\n<h3>droppedEntriesCount in PerformanceObserver callback</h3>\n<p>PerformanceObserver のコールバックに droppedEntriesCount が追加されます。</p>\n<p><a href=\"https://www.chromestatus.com/feature/5320666234486784\">https://www.chromestatus.com/feature/5320666234486784</a></p>\n<p>PerformanceObserver<br>\n<a href=\"https://developer.mozilla.org/ja/docs/Web/API/PerformanceObserver\">https://developer.mozilla.org/ja/docs/Web/API/PerformanceObserver</a></p>\n<h3>self.reportError()</h3>\n<p>キャッチされない例外をレポートする<code>self.reportError()</code>が追加されます。\n<a href=\"https://www.chromestatus.com/feature/5634523220934656\">https://www.chromestatus.com/feature/5634523220934656</a></p>\n<p>以下のコードを実行するとerrorはcatchで握り潰されずに<code>Uncaught Error: foo</code>になります。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addition</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    self<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reportError</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword control-flow\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">count</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> addition<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>参考:</p>\n<ul>\n<li><a href=\"https://html.spec.whatwg.org/#runtime-script-errors\">https://html.spec.whatwg.org/#runtime-script-errors</a></li>\n</ul>\n","metaData":{"title":"Chrome 95 リリースノートまとめ","author":"nus3","editor":"nakajmg","createdAt":"2021-11-17","summary":"Chrome 95 のリリースノートの要約です","tags":["Releasenote","Browser"],"updatedAt":"2021-11-17"}},{"slug":"release-safari-15","content":"<p>先日 Safari 15 がリリースされました。\n<a href=\"https://webkit.org/blog/11989/new-webkit-features-in-safari-15/\">https://webkit.org/blog/11989/new-webkit-features-in-safari-15/</a></p>\n<p>影響の大きそうな箇所や、知っておいたほうが良さそうな箇所を中心に紹介します。</p>\n<h2>HTML</h2>\n<h3>theme-color</h3>\n<p>meta タグ上での <code>theme-color</code> のサポートが追加されました。\n指定することで、ブラウザのメニューバーやタブバーといった領域のカラーを変更することができます。 <code>prefers-color-scheme</code> と併用することで、ダークモード/ライトモードに応じた色の指定もできます。</p>\n<p><a href=\"https://developer.apple.com/videos/play/wwdc2021/10029/\">Design for Safari 15</a></p>\n<h2>CSS</h2>\n<h3><code>aspect-ratio</code> プロパティのサポート</h3>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio\">aspect-ratio - CSS: Cascading Style Sheets | MDN</a></p>\n<h3><code>lab()</code> <code>lch()</code> <code>hwb()</code> シンタックスのサポート</h3>\n<p><a href=\"https://www.w3.org/TR/css-color-4/\">W3C Color Module Level 4</a>に沿った新しいカラーシンタックス <code>lab()</code> <code>lch()</code> <code>hwb()</code> が利用可能になりました。</p>\n<h3>list-style-type に設定可能な値が追加</h3>\n<p>li 要素など、リストアイテム要素のマーカーを指定するための <code>list-style-type</code> 新たに 12 個の値が設定可能になりました。</p>\n<p>MDN のデモで値に応じた表示を確認することができます。</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-type#result_2\">https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-type#result_2</a></p>\n<h2>Web Inspector</h2>\n<p>CSS Grid に対応したオーバレイ表示が可能になりました。</p>\n<p><a href=\"https://webkit.org/blog/11588/introducing-css-grid-inspector/\">https://webkit.org/blog/11588/introducing-css-grid-inspector/</a></p>\n<p>デバッグ用のブレークポイント周りなどにも改善が施されています。その他の変更点は WWDC2021 の発表動画に含まれます。</p>\n<p><a href=\"https://developer.apple.com/videos/play/wwdc2021/10031/\">Discover Web Inspector improvements - WWDC21 - Videos - Apple Developer</a></p>\n<h2>JavaScript and WebAssembly</h2>\n<p>Worker や ServiceWorker で ES6 Modules のサポートが追加されました。</p>\n<p>また、JavaScript エンジンで次の機能がサポートされました。</p>\n<ul>\n<li>top-level <code>await</code></li>\n<li><code>Error.cause</code></li>\n<li>プライベートクラスメソッド とアクセサ</li>\n<li><code>BigInt64Array</code> および <code>BigUint64Array</code></li>\n</ul>\n<p>WebAssembly では次のサポートが追加されました。</p>\n<ul>\n<li>streaming compilation</li>\n<li>bulk memory operations</li>\n<li>reference types</li>\n<li>non-trapping conversions from <code>float</code> to <code>int</code></li>\n</ul>\n<p><a href=\"https://github.com/WebAssembly/spec/tree/main/proposals\">WebAssembly/spec - proposals</a>\n<a href=\"https://developer.apple.com/videos/play/wwdc2021/10030\">Develop advanced web content - WWDC21 - Videos - Apple Developer</a></p>\n<h2>Web APIs</h2>\n<h3>WebGL2 に対応</h3>\n<p>WebGL2 に対応し、かつ Apple の グラフィック API の Metal 上で動作するようになり、パフォーマンスが向上しました。</p>\n<h3>Web Share API Level 2 の実装</h3>\n<p>Web Share API Level 2 の実装により、Web ページからアプリへのファイル共有が可能になりました。</p>\n<p><a href=\"https://developer.apple.com/videos/play/wwdc2021/10030\">Develop advanced web content - WWDC21 - Videos - Apple Developer</a></p>\n<h2>Media</h2>\n<ul>\n<li>MediaSession API のサポートの追加</li>\n</ul>\n<p><a href=\"https://developer.apple.com/videos/play/wwdc2021/10189/\">Coordinate media playback in Safari with Group Activities - WWDC21 - Videos - Apple Developer</a></p>\n<h2>Security and Privacy</h2>\n<h3>自動 HTTPS アップグレードのサポート</h3>\n<p>http と https の双方が利用可能なページの場合、自動で https を利用するようになります。</p>\n<h2>所感</h2>\n<p><code>aspect-ratio</code> が 主要 4 ブラウザ(Chrome/Safari/Firefox/Edge)すべてで利用可能になりましたね。今後利用するケースが徐々に増えていきそうです。</p>\n<p>余談ですが、<code>list-style-type</code> に <code>japanese-formal</code> を指定すると <code>壱・弐・参・四・伍…</code> になるのですね。カッコいいです。</p>\n","metaData":{"title":"Safari 15 の新機能とかまとめ","author":"mugi","editor":"nakajmg","createdAt":"2021-11-16","summary":"先日 Safari 15 がリリースされました。影響の大きそうな箇所や、知っておいたほうが良さそうな箇所を中心に紹介します。","tags":["Releasenote","Browser"],"updatedAt":"2021-11-16"}},{"slug":"release-firefox-93","content":"<p>Firefox 93 がリリースされました！</p>\n<ul>\n<li><a href=\"https://www.mozilla.org/en-US/firefox/93.0/releasenotes/\">https://www.mozilla.org/en-US/firefox/93.0/releasenotes/</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/93\">https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/93</a></li>\n</ul>\n<p>今回のリリースから AVIF 画像フォーマットがデフォルトで有効化されます。</p>\n<p>クライアント側の使用感が変わるわけではありませんが、今後こういった高圧縮可能な形式がスタンダードになることでよりリッチな Web コンテンツを多く提供できるようになるかもしれませんね。</p>\n<p>また、クラスの <code>static</code> 初期化ブロックをはじめとして、多くのイベントハンドラやプロパティの追加が盛り込まれているため、開発者視点では重要なアップデートではないかと思われます。</p>\n<h2>New</h2>\n<ul>\n<li>AV1 形式の画像フォーマットに対応</li>\n<li>PDF ビューアーがより詳細なフォームに対応(複数の政府や銀行が使用している XFA ベースフォーム)</li>\n<li>Windows 版にて、利用可能メモリが極端に少ない場合に利用状況や属性に基づいてタブを自動的にアンロードするようになった</li>\n<li>macOS 版にて、.dmg ファイルからマウントされた Firefox を実行している時、セッションを失わないためにインストールを完了するかどうかプロンプトが表示されるようになった</li>\n<li>安全でない接続に依存している、もしくは安全でない可能性のあるダウンロードをブロックするようになった</li>\n<li>Smart Block 3.0 (プライバシー保護機能)の互換性向上</li>\n<li>新しい referrer tracking protection を Strick Tracking Protection と Private Browsing に導入</li>\n<li>Firefox Suggest(Web ナビゲーター) の導入</li>\n</ul>\n<h2>Fixed</h2>\n<ul>\n<li>VoiceOver がアクセス可能なツリーコントロール内にあるチェック可能アイテムのチェック状態を正しく判別するようになった</li>\n<li>Orca スクリーンリーダーが Firefox で正しく動作するようになった</li>\n<li>その他セキュリティ修正</li>\n</ul>\n<h2>Changed</h2>\n<ul>\n<li>3DES を使用する TLS 暗号スイートが無効化\n<ul>\n<li>非推奨バージョンの TLS を有効化する設定により利用は可能</li>\n</ul>\n</li>\n<li>ダウンロードパネルが Firefox のビジュアルスタイルに沿うようになった</li>\n</ul>\n<h2>for web developer</h2>\n<h3>HTML</h3>\n<ul>\n<li>ARIA <code>meter</code> ロールを実装</li>\n<li><code>&#x3C;input type=\"datetime-local\"></code> の UI を実装</li>\n</ul>\n<h3>CSS</h3>\n<ul>\n<li><code>font-synthesis</code> に <code>small-caps</code> キーワードを追加</li>\n</ul>\n<h3>JavaScript</h3>\n<ul>\n<li>クラスの <code>static</code> 初期化ブロックをサポート</li>\n<li><code>createImageBitmap()</code> にて option オブジェクトを用いて <code>imageOrientation</code> 及び <code>premultiplyAlpha</code> プロパティを渡せるようになった</li>\n<li><code>Intl.supportedValueOf()</code> をサポート\n<ul>\n<li>実装でサポートされている値をコードで列挙できるようになった</li>\n</ul>\n</li>\n</ul>\n<h3>HTTP</h3>\n<ul>\n<li>ダイジェストを用いた HTTP 認証で SHA-256 アルゴリズムをサポート</li>\n<li>画像のデフォルト HTTP ACCEPT ヘッダーが <code>image/avif,image/webp,*/*</code> に変更\n<ul>\n<li>AV1 フォーマット対応によるものだと思われます</li>\n</ul>\n</li>\n</ul>\n<h3>APIs</h3>\n<ul>\n<li><code>ElementInternals.shadowRoot</code> 及び <code>HTMLElement.attachInternals</code> をサポート</li>\n<li><code>ResizeObserver.Observe()</code> にて <code>device-pixel-content-box</code> 値をサポート</li>\n<li>グローバル関数 <code>reportError()</code> をサポート\n<ul>\n<li>スクリプトがコンソールやグローバルイベントハンドラに対してエラーを報告できるようになった</li>\n</ul>\n</li>\n</ul>\n<h3>Events</h3>\n<ul>\n<li>グローバルイベントハンドラプロパティ <code>onsecuritypolicyviolation</code> をサポート\n<ul>\n<li>コンテンツセキュリティポリシー違反時に発生する <code>securitypolicyviolation</code> イベントを処理するハンドラを割り当てることが可能になった</li>\n</ul>\n</li>\n<li><code>GlobalEventHandlers</code> 及び <code>ShadowRoot</code> にて <code>onslotchange</code> イベントハンドラプロパティをサポート\n<ul>\n<li>スロットに含まれるノードが変更された際に <code>&#x3C;slot></code> 要素で発生する <code>slotchange</code> イベントを処理するハンドラを割り当てることが可能になった</li>\n</ul>\n</li>\n</ul>\n<h3>Removals</h3>\n<ul>\n<li><code>KeyboardEvent.initKeyEvent()</code> が <code>dom.keyboardevent.init_key_event.enabled</code> によって実行可否が制御されるようになり、デフォルトで無効になった</li>\n</ul>\n<h3>WebDerive conformance (Marionette)</h3>\n<ul>\n<li>大きなドキュメントに対して <code>WebDriver:Print</code> が失敗する原因になっているバグを修正</li>\n</ul>\n<h3>for add-on developers</h3>\n<ul>\n<li><code>windowId</code> が指定されている場合、サイドバーが <code>extension.getViews</code> に包含されるようになった</li>\n</ul>\n<h3>Other</h3>\n<ul>\n<li>AVIF 画像のサポートがデフォルトで有効になった\n<ul>\n<li><code>image.avif.compliance_strictness</code> を用いて仕様準拠の厳密生を調節できる</li>\n<li>アニメーション画像には非対応</li>\n</ul>\n</li>\n</ul>\n<h2>Web Platform</h2>\n<ul>\n<li><code>&#x3C;input type=\"datetime-local\"></code> の UI を実装</li>\n</ul>\n","metaData":{"title":"Firefox 93.0 リリースノート要約","author":"BaHo","editor":"nakajmg","createdAt":"2021-10-21","summary":"Firefox 93.0 のリリースノートの要約です","tags":["Releasenote","Browser"],"updatedAt":"2021-10-21"}}],"tag":"Releasenote"},"__N_SSG":true}