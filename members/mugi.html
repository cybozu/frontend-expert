<!DOCTYPE html><html lang="ja"><head><title>mugi | サイボウズ フロントエンドエキスパートチーム</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="description" content="サイボウズ フロントエンドエキスパートチームのウェブサイトです"/><link rel="icon" type="image/png" sizes="32x32" href="/frontend-expert/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/frontend-expert/icons/favicon-16x16.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="mugi | サイボウズ フロントエンドエキスパートチーム"/><meta name="twitter:description" content="サイボウズ フロントエンドエキスパートチームのウェブサイトです"/><meta name="twitter:image " content="https://cybozu.github.io/frontend-expert/ogp/ogp.jpg"/><meta property="og:type" content="article"/><meta property="og:title" content="mugi | サイボウズ フロントエンドエキスパートチーム"/><meta property="og:site_name" content="サイボウズ フロントエンドエキスパートチーム"/><meta property="og:description" content="サイボウズ フロントエンドエキスパートチームのウェブサイトです"/><meta property="og:image" content="https://cybozu.github.io/frontend-expert/ogp/ogp.jpg"/><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/frontend-expert/feeds/atom.xml"/><meta name="next-head-count" content="16"/><link rel="preload" href="/frontend-expert/_next/static/css/d15332f741e09aa2.css" as="style"/><link rel="stylesheet" href="/frontend-expert/_next/static/css/d15332f741e09aa2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/frontend-expert/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/frontend-expert/_next/static/chunks/webpack-b0f44a7ac00bf3cb.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/framework-742985a85518e1e1.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/main-242b1a0e32bf923c.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/_app-ff35bec35d2bc313.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/a9a7754c-e3ac32efe6bdfc47.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/247-c193c27d2f31cb66.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/814-0ba85a11642c687f.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/836-39a19b1bc48d36a2.js" defer=""></script><script src="/frontend-expert/_next/static/chunks/pages/members/%5Bname%5D-0dae795d83857184.js" defer=""></script><script src="/frontend-expert/_next/static/CO4eznkXlDDSZXMGOnJzP/_buildManifest.js" defer=""></script><script src="/frontend-expert/_next/static/CO4eznkXlDDSZXMGOnJzP/_ssgManifest.js" defer=""></script><script src="/frontend-expert/_next/static/CO4eznkXlDDSZXMGOnJzP/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css ruypru">.css-ruypru{width:100%;}.css-ruypru .main{max-width:100%;background-color:white;}.css-ruypru .main .content{margin:0 auto;max-width:var(--content-width);box-sizing:border-box;padding:1rem 1rem 1.5rem;min-height:400px;}</style><div class="css-ruypru"><style data-emotion="css 14l5li6">.css-14l5li6{padding:1.2rem 0 1rem;background-color:var(--primary-color);}.css-14l5li6 .content{max-width:var(--content-width);margin:0 auto;padding:0 1rem;box-sizing:border-box;}.css-14l5li6 h1{font-size:1.6rem;}.css-14l5li6 .navigation ul{margin:0;list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-14l5li6 .navigation ul li{padding:0.2rem 0;font-size:1rem;}.css-14l5li6 .navigation ul li:not(:last-child)::after{content:"/";margin:0 0.4rem;color:var(--light-font-color);}.css-14l5li6 a{color:var(--light-font-color);}</style><header class="css-14l5li6"><div class="content"><h1><a href="/frontend-expert"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27200%27%20height=%2778%27/%3e"/></span><img alt="Frontend Expert Team Logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Frontend Expert Team Logo" src="/frontend-expert/logo.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></h1><nav class="navigation"><ul><li><a href="/frontend-expert/members">Members</a></li><li><a href="/frontend-expert/posts">Posts</a></li><li><a href="https://cybozu.co.jp/company/job/recruitment/list/front_end_expert.html" target="_blank" rel="noopener noreferrer">Recruiting</a></li></ul></nav></div></header><main class="main"><div class="content"><style data-emotion="css 17dv728">.css-17dv728{padding:8px;display:grid;grid-template-columns:auto 1fr;gap:16px;}@media (max-width: 600px){.css-17dv728{display:block;}}</style><div class="css-17dv728"><style data-emotion="css 18vmwhk">.css-18vmwhk .memberIcon img{border-radius:4px;}.css-18vmwhk .memberName{font-size:1.8rem;font-weight:normal;}.css-18vmwhk .links{list-style:none;margin-top:16px;}.css-18vmwhk .links li{margin-right:1.2rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:8px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width: 600px){.css-18vmwhk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}</style><div class="css-18vmwhk"><div class="memberIcon"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:160px;height:160px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="mugi" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="mugi" src="/frontend-expert//member-icons/mugi.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><h2 class="memberName">mugi</h2><ul class="links"><li><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg><a href="https://twitter.com/mugi_uno">@<!-- -->mugi_uno<!-- --></a></li><li><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github-alt" class="svg-inline--fa fa-github-alt fa-w-15 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512" width="24" height="24"><path fill="currentColor" d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg><a href="https://github.com/mugi-uno">@<!-- -->mugi-uno<!-- --></a></li></ul></div><style data-emotion="css wizz25">.css-wizz25{border-left:1px solid #ebebeb;padding-left:16px;}@media (max-width: 600px){.css-wizz25{border:none;padding-left:0;margin-top:16px;border-top:1px solid #ebebeb;}}</style><div class="css-wizz25"><style data-emotion="css 3x8wln">.css-3x8wln .item{font-size:1.1rem;padding:12px 4px 8px;}.css-3x8wln .item+.item{margin-top:8px;border-top:1px solid #ebebeb;}.css-3x8wln .title{font-size:1.2em;}.css-3x8wln .tags{margin-top:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:8px;}.css-3x8wln .tag{font-size:0.5em;border:1px solid;padding:2px 4px;border-radius:2px;color:currentColor;}.css-3x8wln .date{font-size:0.8em;}.css-3x8wln .author{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:8px;padding-top:8px;}.css-3x8wln .author img{border-radius:4px;}</style><div class="css-3x8wln"><div class="item"><a href="/frontend-expert/posts/vite-3.0"><div class="title">Vite 3.0 の内容をおさらいする</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="mugi" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="mugi" src="/frontend-expert//member-icons/mugi.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2022-07-27</span></div><div class="tags"><span class="tag">Vite</span></div></a></div><div class="item"><a href="/frontend-expert/posts/release-safari-15-4"><div class="title">Safari 15.4 リリースノートまとめ | dialog Element や lazy-loading, CSS Cascade Layers サポートなど</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="mugi" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="mugi" src="/frontend-expert//member-icons/mugi.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2022-03-25</span></div><div class="tags"><span class="tag">Releasenote</span><span class="tag">Browser</span></div></a></div><div class="item"><a href="/frontend-expert/posts/release-safari-15"><div class="title">Safari 15 の新機能とかまとめ</div><div class="author"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:30px;height:30px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="mugi" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="mugi" src="/frontend-expert//member-icons/mugi.jpg" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="date">2021-11-16</span></div><div class="tags"><span class="tag">Releasenote</span><span class="tag">Browser</span></div></a></div></div></div></div></div></main><style data-emotion="css 1n88omd">.css-1n88omd{padding:2.4rem 0;background-color:var(--primary-color);color:white;}.css-1n88omd .content{max-width:var(--content-width);padding:0 1.2rem;box-sizing:border-box;margin:0 auto;}.css-1n88omd a{color:white;}.css-1n88omd ul{list-style:none;margin-bottom:2.5rem;}.css-1n88omd ul li{font-size:1.2rem;margin-bottom:0.5rem;}.css-1n88omd small{font-size:1rem;}</style><footer class="css-1n88omd"><div class="content"><ul><li><a href="https://cybozu.co.jp/">サイボウズ 企業情報</a></li><li><a href="https://www.cybozu.com/jp/">cybozu.com</a></li><li><a href="https://blog.cybozu.io/">サイボウズエンジニアのブログ Cybozu Inside Out</a></li><li><a href="https://tech.cybozu.io/">Cybozu Tech</a></li><li><a href="https://cybozu.co.jp/company/job/recruitment/">採用情報</a></li></ul><small>Copyright © Cybozu, Inc.</small></div></footer></div>;<!-- --></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"member":{"name":"mugi","twitterId":"mugi_uno","githubUsername":"mugi-uno","active":true},"posts":[{"slug":"vite-3.0","content":"\u003cp\u003e2022/7/13に、フロントエンドツールである Vite のバージョン 3.0 がリリースされました 🎉\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://vitejs.dev/blog/announcing-vite3.html\"\u003eVite 3.0 is out! | Vite\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/vitejs/vite/blob/v3.0.0/packages/vite/CHANGELOG.md\"\u003eCHANGELOG\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://vitejs.dev/guide/migration.html\"\u003eMigration from v2 | Vite\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eこのエントリーでは、リリース時に公開されたアナウンス(\u003ca href=\"https://github.com/vitejs/vite/releases/tag/v3.0.0\"\u003eRelease v3.0.0 · vitejs/vite\u003c/a\u003e)の内容をベースに、変更点を改めて１つずつ掘り下げて確認してみます。\u003c/p\u003e\n\u003ch3\u003eNew Documentation\u003c/h3\u003e\n\u003cp\u003e公式ドキュメント(\u003ca href=\"https://ja.vitejs.dev/\"\u003evitejs.dev\u003c/a\u003e)が \u003ca href=\"https://vitepress.vuejs.org/\"\u003eVitePress\u003c/a\u003e のデフォルトテーマを利用した形で刷新されました。ダークテーマ表示などが可能になっています。\u003c/p\u003e\n\u003cp\u003eまた、あわせて次のサブドメインでもドキュメントを閲覧できるようになっています。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://v2.vitejs.dev/\"\u003ev2.vitejs.dev\u003c/a\u003e - Vite 2.x 系のドキュメント\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://main.vitejs.dev/\"\u003emain.vitejs.dev\u003c/a\u003e - Vite のメインブランチの内容\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eCreate Vite Starter Templates\u003c/h3\u003e\n\u003cp\u003eVite プロジェクトの Scaffold ジェネレータである \u003ca href=\"https://github.com/vitejs/vite/tree/main/packages/create-vite\"\u003e\u003ccode\u003ecreate-vite\u003c/code\u003e\u003c/a\u003e について、Vite 3.x が利用されるようになりました。\u003c/p\u003e\n\u003ch3\u003eDev Improvements\u003c/h3\u003e\n\u003ch4\u003eVite CLI\u003c/h4\u003e\n\u003cp\u003eデフォルトの開発サーバーポートが \u003ccode\u003e5173\u003c/code\u003e、プレビューサーバーのポートが \u003ccode\u003e4173\u003c/code\u003e に変更されました。デフォルトポートは以前は \u003ccode\u003e3000\u003c/code\u003e と \u003ccode\u003e5000\u003c/code\u003e でしたが、MacOS でポートの衝突が発生するなどの\u003ca href=\"https://github.com/vitejs/vite/issues/5707\"\u003e問題があった\u003c/a\u003eようです。\u003c/p\u003e\n\u003cp\u003eちなみになぜ \u003ccode\u003e5173\u003c/code\u003e という中途半端な数字なのだろう？と思い調べてみましたが、以下の Issue コメントを見つけました。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/vitejs/vite/pull/6330#issuecomment-1003405068\"\u003ehttps://github.com/vitejs/vite/pull/6330#issuecomment-1003405068\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eAt a team meeting we thought about 5173\nLike 5173 in leet for Vite | V I T Ǝ | V === Roman 5\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eV … 5\u003c/li\u003e\n\u003cli\u003eI … 1\u003c/li\u003e\n\u003cli\u003eT … 7\u003c/li\u003e\n\u003cli\u003eƎ … 3\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eらしいです。cool\u003c/p\u003e\n\u003ch4\u003eImproved WebSocket Connection Strategy\u003c/h4\u003e\n\u003cp\u003eVite 2.x までは、Proxy を経由したサーバー確立に課題があったとのことで、3.0 からはそれが改善されました。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/sapphi-red/vite-setup-catalogue\"\u003e\u003ccode\u003evite-setup-catalogue\u003c/code\u003e\u003c/a\u003e というセットアップのサンプルリポジトリ内にも追加されたことで、今後は同パターンは CI で検証されるようになったとのことです。\u003c/p\u003e\n\u003ch4\u003eCold Start Improvements\u003c/h4\u003e\n\u003cp\u003eコールドスタート時に依存関係を後から解決する際に、依存の状態によってはフルリロードが発生する可能性があったのが、ブラウザに依存を渡すタイミングを調整することで効率化され、回避可能になったようです。\u003c/p\u003e\n\u003cp\u003e詳細: \u003ca href=\"https://github.com/vitejs/vite/pull/8869#issuecomment-1172902125\"\u003ehttps://github.com/vitejs/vite/pull/8869#issuecomment-1172902125\u003c/a\u003e\u003c/p\u003e\n\u003ch4\u003eimport.meta.glob\u003c/h4\u003e\n\u003cp\u003eVite では以前から \u003ca href=\"https://vitejs.dev/guide/features.html#glob-import\"\u003e\u003ccode\u003eGlob Import\u003c/code\u003e\u003c/a\u003e と呼ばれる機能が存在し、特別な関数 \u003ccode\u003eimport.meta.glob\u003c/code\u003e を介して glob 形式で記述してのモジュール一括インポートが可能です。\u003c/p\u003e\n\u003cp\u003eVite 3.0 では機能が強化され、より柔軟な指定が可能になりました。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMultiple Patterns : 複数の glob パターンの記述\u003c/li\u003e\n\u003cli\u003eNegative Patterns : 除外パターンの記述\u003c/li\u003e\n\u003cli\u003eNamed Imports : モジュールの一部のみを指定可能\u003c/li\u003e\n\u003cli\u003eCustom Queries : クエリの付与\u003c/li\u003e\n\u003cli\u003eEager Imports : Dynamic import の回避\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003eAligning WASM Import with Future Standards\u003c/h4\u003e\n\u003cp\u003eVite 2.x から WebAssembly を\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003einit\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./example.wasm'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eの形で import できましたが、将来的に ESM の仕様として WebAssembly が統合された場合のバッティングを考慮し、\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003einit\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./example.wasm?init'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eと、\u003ccode\u003e?init\u003c/code\u003e オプションが付与された場合に Vite 2.x 以前と同様の挙動になるよう変更されました。\u003c/p\u003e\n\u003cp\u003e現状で \u003ccode\u003e?init\u003c/code\u003e オプションを付与せずに ESM として処理する場合には \u003ca href=\"https://github.com/Menci/vite-plugin-wasm\"\u003e\u003ccode\u003evite-plugin-wasm\u003c/code\u003e\u003c/a\u003eのようなプラグインの利用が必須となります。\u003c/p\u003e\n\u003ch3\u003eBuild Improvements\u003c/h3\u003e\n\u003ch4\u003eESM SSR Build by Default\u003c/h4\u003e\n\u003cp\u003eSSR 用フレームワークの大半が ESM ビルドを利用するようになったため、\nVite3 では SSR ビルドのデフォルト形式が ESM に変更されました。\u003c/p\u003e\n\u003cp\u003eVite では、モジュールの形式(CommonJS/ESM)などに応じて、適宜 Vite の変換から切り離す（外部化する）ことで SSR 時の処理を効率化しています。\u003c/p\u003e\n\u003cp\u003e参考: \u003ca href=\"https://v2.vitejs.dev/guide/ssr.html#ssr-externals\"\u003ehttps://v2.vitejs.dev/guide/ssr.html#ssr-externals\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eESM がデフォルトになったことで、デフォルトで外部化される依存が増え、より効率的に SSR ビルドが可能になるようです。\u003c/p\u003e\n\u003cp\u003eなお、ESM になると困るケースのために \u003ccode\u003elegacy.buildSsrCjsExternalHeuristics: true\u003c/code\u003e というオプションも用意されているようです。\u003c/p\u003e\n\u003ch4\u003eImproved Relative Base Support\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003ebase\u003c/code\u003e に \u003ccode\u003e''\u003c/code\u003e を指定することで、相対的なベースパスの指定ができるようになりました。\nビルドの段階でベースパスが不明なケースなどで役に立つようです。\u003c/p\u003e\n\u003ch3\u003eExperimental Features\u003c/h3\u003e\n\u003ch4\u003eBuilt Asset Paths fine-grained Control (Experimental)\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eexperimental.renderBuiltUrl\u003c/code\u003e オプションが Experimental 機能として導入されました。\u003c/p\u003e\n\u003cp\u003eCDN での配布などを前提とした場合、ビルドによって生成されたアセットのうち一部のみ URL が異なるケースが考えられます。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eexperimental.renderBuiltUrl\u003c/code\u003e を指定することで、ファイル名・ファイルタイプなどを利用して URL を切り分けられるようになります。\u003c/p\u003e\n\u003cp\u003e※公式ドキュメントよりコードを抜粋\n\u003ca href=\"https://vitejs.dev/guide/build.html#advanced-base-options\"\u003ehttps://vitejs.dev/guide/build.html#advanced-base-options\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003eexperimental\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003erenderBuiltUrl\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilename\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e hostType\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'js'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'css'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'html'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'public'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'asset'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etype \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e'public'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token string\"\u003e'https://www.domain.com/'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e filename\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eextname\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eimporter\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e'.js'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e runtime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003ewindow.__assetsPath(\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estringify\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e)\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token string\"\u003e'https://cdn.domain.com/assets/'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e filename\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch4\u003eEsbuild Deps Optimization at Build Time (Experimental)\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eoptimizeDeps.disabled: false\u003c/code\u003e 指定が Experimental 機能として可能になりました。\n\u003ca href=\"https://vitejs.dev/guide/migration.html#experimental\"\u003ehttps://vitejs.dev/guide/migration.html#experimental\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eVite はデフォルトでは開発時には esbuild を用い、ビルド時には Rollup を利用します。\n開発時とビルド時で異なるツールを利用するため、Vite を利用する際に考慮すべき大きい要素の一つとして挙げられます。\u003c/p\u003e\n\u003cp\u003e参考: \u003ca href=\"https://vitejs.dev/guide/why.html#why-not-bundle-with-esbuild\"\u003eWhy Not Bundle with esbuild?\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eoptimizeDeps.disabled: false\u003c/code\u003e を用いると、ビルド時にも esbuild を利用するようになります。\u003c/p\u003e\n\u003cp\u003eCJS のみの依存関係も ESM に変換されるため、\u003ccode\u003e@rollup/plugin-commonjs\u003c/code\u003e プラグインが不要となります。\u003c/p\u003e\n\u003ch4\u003eHMR Partial Accept (Experimental)\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eexperimental.hmrPartialAccept\u003c/code\u003e オプションが Experimental 機能として導入されました。\u003c/p\u003e\n\u003cp\u003eVite ではフレームワークやツールの作成者向けに HMR 用の API を公開しています。\n\u003ca href=\"https://vitejs.dev/guide/api-hmr.html\"\u003ehttps://vitejs.dev/guide/api-hmr.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e現状の HMR API の仕組みでは、HMR 可能なモジュールとそうでないモジュールが混在していたファイルの場合、\nモジュールを部分的に差し替えることができず、非効率な更新が発生する可能性があります。\u003c/p\u003e\n\u003cp\u003e参考: \u003ca href=\"https://github.com/vitejs/vite/discussions/7309\"\u003eHMR partial accept · Discussion #7309 · vitejs/vite\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e新しい API である \u003ccode\u003eimport.meta.hot.acceptExports\u003c/code\u003e と組み合わせることで、\nexport されているモジュールについてより詳細かつ効率的に HMR の制御が可能になります。\u003c/p\u003e\n\u003ch3\u003eBundle Size Reduction\u003c/h3\u003e\n\u003cp\u003eVite 自体のサイズが小さくなりました。30%ほど軽量化されたそうです。\u003c/p\u003e\n\u003cp\u003eMinify 用の Terser がオプションになったことや、 \u003ccode\u003enode-forge\u003c/code\u003e が \u003ccode\u003evitejs/plugin-basic-ssl\u003c/code\u003e というプラグインに置き換わったことに起因しているようです。\u003c/p\u003e\n\u003ch3\u003eCompatibility Notes\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eNode.js のサポートバージョンが 14.18+ / 16+ になりました\u003c/li\u003e\n\u003cli\u003eVite 自体が ESM として公開されています。CJS経由で利用する場合は CJS Proxy 経由となります\n\u003cul\u003e\n\u003cli\u003e参考: teppeis/\u003ca href=\"https://zenn.dev/teppeis/articles/2022-07-npm-dual-pacakge-cjs-proxy\"\u003eVite 3 が採用した CJS Proxy による Dual Package 構成\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eサポートブラウザの基準が \u003ccode\u003e\"Native ESM\"\u003c/code\u003e \u003ccode\u003e\"Native ESM dynamic import\"\u003c/code\u003e \u003ccode\u003e\"import.meta\"\u003c/code\u003e の機能をサポートしているブラウザになりました\u003c/li\u003e\n\u003cli\u003eSSR および ライブラリモードにおいて、JS の拡張子はフォーマットやパッケージタイプに応じて適切な拡張子が選択されるようになりました\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eブラウザバージョンが変わった点は注意が必要になるかもしれません。\nMigration Guide によると、主要ブラウザでは次のバージョンがサポート対象になるようです。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eChrome \u003e=87\u003c/li\u003e\n\u003cli\u003eFirefox \u003e=78\u003c/li\u003e\n\u003cli\u003eSafari \u003e=13\u003c/li\u003e\n\u003cli\u003eEdge \u003e=88\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eというわけで簡単な Vite 3.0 の内容のおさらいでした。\u003c/p\u003e\n\u003cp\u003eVite はもともと Native ESM を前提とした仕組みをフル活用していることもあってか、\n今回の変更点でも ESM を考慮した変更が多く入った印象を受けます。\u003c/p\u003e\n\u003cp\u003e個人的には、まだ Experimental ではありますが \u003ccode\u003eEsbuild Deps Optimization at Build Time\u003c/code\u003e にある、\nビルド時にも esbuild を利用可能になる未来が楽しみです。\u003c/p\u003e\n","metaData":{"title":"Vite 3.0 の内容をおさらいする","author":"mugi","createdAt":"2022-07-27","summary":"Vite 3.0 の内容をおさらいします","tags":["Vite"],"updatedAt":"2022-07-27"}},{"slug":"release-safari-15-4","content":"\u003cp\u003e🔗 \u003ca href=\"https://webkit.org/blog/12445/new-webkit-features-in-safari-15-4/\"\u003ehttps://webkit.org/blog/12445/new-webkit-features-in-safari-15-4/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eSafari 15.4 がリリースされました 🎉\u003cbr\u003e\nこれまで Technology Preview として公開されていた様々な変更が含まれています。\u003c/p\u003e\n\u003ch2\u003eHTML\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e遅延読み込みのための \u003ccode\u003elazy-loading\u003c/code\u003e のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\"\u003ehttps://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026#x3C;dialog\u003e\u003c/code\u003e Element のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element\"\u003ehttps://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e::backdrop\u003c/code\u003e 疑似要素のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/CSS/::backdrop\"\u003ehttps://developer.mozilla.org/ja/docs/Web/CSS/::backdrop\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eautofocus\u003c/code\u003e 属性のサポート\n\u003cul\u003e\n\u003cli\u003edialog 表示時にどの要素にフォーカスをセットするかを指定できる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eCSS\u003c/h2\u003e\n\u003ch3\u003eFeatures for CSS Architecture\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e:has()\u003c/code\u003e のサポート (現状 Safari のみサポート)\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/CSS/:has\"\u003ehttps://developer.mozilla.org/ja/docs/Web/CSS/:has\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eCSS Cascade Layers のサポート\n\u003cul\u003e\n\u003cli\u003eFEE チームの @nus3 が書いた CSS Cascade Layers の紹介エントリ: \u003ca href=\"https://cybozu.github.io/frontend-expert/posts/css-cascade-layers\"\u003ehttps://cybozu.github.io/frontend-expert/posts/css-cascade-layers\u003c/a\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eSolving Pain Points\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e主にモバイル向けに、viewport に応じた新しい値の指定が可能に\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esvh\u003c/code\u003e, \u003ccode\u003esvw\u003c/code\u003e → メニューバーなどを除いた最小の viewport\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edvh\u003c/code\u003e, \u003ccode\u003edvw\u003c/code\u003e → スクロールによるメニューバーなどの表示切り替えに応じて変化する viewport\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elvh\u003c/code\u003e, \u003ccode\u003elvw\u003c/code\u003e → メニューバーなどが存在しない状態を想定した最大の viewport\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esvmin\u003c/code\u003e, \u003ccode\u003esvmax\u003c/code\u003e, \u003ccode\u003elvmin\u003c/code\u003e, \u003ccode\u003elvmax\u003c/code\u003e, \u003ccode\u003edvmin\u003c/code\u003e, \u003ccode\u003edvmax\u003c/code\u003e → \u003ccode\u003evw\u003c/code\u003e, \u003ccode\u003evh\u003c/code\u003e, \u003ccode\u003evmin\u003c/code\u003e, \u003ccode\u003evmax\u003c/code\u003e の上記 CSS 値版 (幅, 高さに対する割合指定)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e:focus-visible\u003c/code\u003e 疑似要素のサポート\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eaccent-color\u003c/code\u003e プロパティのサポート\n\u003cul\u003e\n\u003cli\u003echeckbox, radio, progress, select, datalist (iPad OS と iOS のみ range, button) にアクセントカラー指定が可能になる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecalc()\u003c/code\u003e 数学関数のサポート\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eTypography\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003efont-palette\u003c/code\u003e と \u003ccode\u003e@font-palette-values\u003c/code\u003e CSS プロパティのサポート\n\u003cul\u003e\n\u003cli\u003eカラーフォントに含まれるパレットの指定と、カラーパレットの独自定義\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etext-decoration-skip-ink\u003c/code\u003e CSS プロパティのサポート\n\u003cul\u003e\n\u003cli\u003etext-decoration (underline とか)を文字に被らず表示できる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eic\u003c/code\u003e 単位のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e1ic\u003c/code\u003e が \u003ccode\u003e水\u003c/code\u003e の文字の幅と同等になる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eRetiring WebKit prefixes\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-webkit\u003c/code\u003e vendor prefix の付与が必要だった様々なプロパティが廃止。また、廃止に伴い prefix 不要で利用可能なプロパティのサポート追加\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eappearance\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emask\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebackface-visibility\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etext-combine-upright\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eprint-color-adjust\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ematch-parent\u003c/code\u003e (\u003ccode\u003etext-align\u003c/code\u003e プロパティに指定可能な値)\u003c/li\u003e\n\u003cli\u003e削除: \u003ccode\u003e-webkit-border-fit\u003c/code\u003e, \u003ccode\u003e-webkit-margin-collapse\u003c/code\u003e, \u003ccode\u003e-webkit-margin-top-collapse\u003c/code\u003e, \u003ccode\u003e-webkit-margin-bottom-collapse\u003c/code\u003e, \u003ccode\u003e-webkit-margin-before-collapse\u003c/code\u003e, \u003ccode\u003e-webkit-margin-after-collapse\u003c/code\u003e, \u003ccode\u003e-webkit-background-composite\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eWeb APIs\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eBroadcastCannel のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://html.spec.whatwg.org/multipage/web-messaging.html#broadcasting-to-other-browsing-contexts\"\u003ehttps://html.spec.whatwg.org/multipage/web-messaging.html#broadcasting-to-other-browsing-contexts\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eタブ、ウィンドウ、iframe, worker の相互通信が可能になる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eWeb Locks API のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://w3c.github.io/web-locks/\"\u003ehttps://w3c.github.io/web-locks/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eタブ、ウィンドウ、iframe, worker 間でリソースのロックコントロールを行う\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003escroll-behavior\u003c/code\u003e または \u003ccode\u003ewindow.scroll()\u003c/code\u003e, \u003ccode\u003ewindow.scrollTo()\u003c/code\u003e, \u003ccode\u003ewindow.scrollBy()\u003c/code\u003e の \u003ccode\u003ebehivior\u003c/code\u003e オプションでスクロール制御を可能に\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eResizeObserver API\u003c/code\u003e で \u003ccode\u003eResizeObserverSize\u003c/code\u003e インタフェースのサポート\n\u003cul\u003e\n\u003cli\u003e対象要素の \u003ccode\u003ebox-sizing\u003c/code\u003e プロパティの変更を監視可能に\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estructuredClone\u003c/code\u003e のサポート\n\u003cul\u003e\n\u003cli\u003eDeepClone\u003c/li\u003e\n\u003cli\u003eChrome/Edge/Firefox/Safari のすべてがサポートされました 🎉\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eOrigin Private File System\u003c/code\u003e のサポート\n\u003cul\u003e\n\u003cli\u003e詳細はこちら: \u003ca href=\"https://webkit.org/blog/12257/the-file-system-access-api-with-origin-private-file-system/\"\u003ehttps://webkit.org/blog/12257/the-file-system-access-api-with-origin-private-file-system/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eJavaScript\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003efindLast()\u003c/code\u003e, \u003ccode\u003efindLastIndex()\u003c/code\u003e メソッドのサポート\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eat()\u003c/code\u003e のサポート\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eObject.hasOwn()\u003c/code\u003e のサポート\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eInternationalization\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eIntl Enumeration API\u003c/code\u003e (\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Intl\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Intl\u003c/a\u003e) の強化\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eIntl.Locale\u003c/code\u003e で、暦週・書く方向・12h/24h のサイクル・番号システムといった情報を取得可能になった\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIntl.DisplayNames\u003c/code\u003e で calendar・dateTimeField のサポート追加および languageDisplay オプションのサポート\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIntl.PluralRules\u003c/code\u003e に \u003ccode\u003eselectRange()\u003c/code\u003e メソッドの追加\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/PluralRules/selectRange\"\u003ehttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/PluralRules/selectRange\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://unicode-org.github.io/cldr-staging/charts/37/supplemental/language_plural_rules.html#rules\"\u003ehttps://unicode-org.github.io/cldr-staging/charts/37/supplemental/language_plural_rules.html#rules\u003c/a\u003e に従い、数値の複数形のルールを示す文字列を得る\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIntl.NumberFormat\u003c/code\u003e に \u003ccode\u003eformatRange()\u003c/code\u003e と \u003ccode\u003eformatRangeToParts()\u003c/code\u003e メソッドの追加\n\u003cul\u003e\n\u003cli\u003e数値範囲を示す文字列にフォーマットする\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIntl.DateTimeFormat\u003c/code\u003e に 複数の \u003ccode\u003etimeZoneName\u003c/code\u003e オプションの追加\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eWeb Apps\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eWeb App Manifest 周りのアップデート (≒ PWA 絡みでのアップデート)\n\u003cul\u003e\n\u003cli\u003eManifest ファイルをページロード時に常にフェッチするようになる\u003c/li\u003e\n\u003cli\u003eManifest ファイルでのアイコン宣言のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003epurpose\u003c/code\u003e 指定に応じて \u003ccode\u003eapple-touch-icon\u003c/code\u003e 以外のアイコンを利用する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eServiceWorker で Navigation Preload が使えるように\n\u003cul\u003e\n\u003cli\u003eServiceWorker の起動時のブロッキングを回避できるように\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eMedia\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eWebRTC negotiation API が WebRTC 1.0 仕様に準拠\u003c/li\u003e\n\u003cli\u003ein-band chapter tracks のサポート\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/TextTrack/kind\"\u003ehttps://developer.mozilla.org/en-US/docs/Web/API/TextTrack/kind\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026#x3C;video\u003e\u003c/code\u003e で \u003ccode\u003erequestVideoFrameCallback()\u003c/code\u003e のサポート追加\n\u003cul\u003e\n\u003cli\u003eビデオフレームの表示可能タイミングでのコールバックとメタデータ受け取りが可能になる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePrivacy\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ePrivate Click Measurement (\u003ca href=\"https://webkit.org/blog/11940/pcm-click-fraud-prevention-and-attribution-sent-to-advertiser/\"\u003ehttps://webkit.org/blog/11940/pcm-click-fraud-prevention-and-attribution-sent-to-advertiser/\u003c/a\u003e) 周りで幾つかのアップデート\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSecurity\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eInline Script / Style / eval などでリソースがブロックされた場合のレポートが Web 標準にあわせて更新\u003c/li\u003e\n\u003cli\u003eXSS 対策機能の XSS Auditor サポート削除 (CSP や COEP で代替)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eWKWebView\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eiOS, iPadOS, macOS 上のアプリケーションの場合、FullScreen API 利用の制御が可能になった\u003c/li\u003e\n\u003cli\u003eiPadOS で Media Source Extensions を利用するコンテンツが動作するようになった\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/API/Media_Source_Extensions_API\"\u003ehttps://developer.mozilla.org/ja/docs/Web/API/Media_Source_Extensions_API\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSafari Web Extensions\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eクロスブラウザでの拡張機能サポートに伴う \u003ccode\u003emanifest_version 3\u003c/code\u003e のサポートなど\n\u003cul\u003e\n\u003cli\u003eバックグラウンドスクリプトで \u003ccode\u003eservice_worker\u003c/code\u003e のサポート\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebrowser.scripting\u003c/code\u003e によるスクリプトとスタイルのインジェクション\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebrowser.declarativeNetRequest\u003c/code\u003e を介したネットワークリクエストの動的ルールやセッションルール\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eexternally_connectable:matches\u003c/code\u003e による、Web ページから拡張機能へのメッセージング\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eWeb Inspector\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eCSS Cascade Layer サポート追加に伴い、Web Inspector 上で \u003ccode\u003e@layer\u003c/code\u003e ルールセットが確認可能になった\u003c/li\u003e\n\u003cli\u003eFlexbox および Grid で、視覚的なコントロールの追加\u003c/li\u003e\n\u003cli\u003eStyle パネルでのプロパティや値の変更時の自動補完の強化\u003c/li\u003e\n\u003cli\u003eCSS 表示の改善。未使用の継承値の非表示や、フィルタによる検索、種類でのグループ化など\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e\u003ccode\u003e\u0026#x3C;dialog\u003e\u003c/code\u003e のサポートや \u003ccode\u003e:focus-visible\u003c/code\u003e などは身近な感じがありますね。\u003c/p\u003e\n\u003cp\u003eまた、Web Extensions で manifest_version 3 のサポートが強化されたことで、クロスブラウザ向けのブラウザ拡張で Safari も含めやすくなるかもしれません。\u003c/p\u003e\n","metaData":{"title":"Safari 15.4 リリースノートまとめ | dialog Element や lazy-loading, CSS Cascade Layers サポートなど","author":"mugi","createdAt":"2022-03-25","summary":"New WebKit Features in Safari 15.4 のリリースノートのまとめです","tags":["Releasenote","Browser"],"updatedAt":"2022-03-25"}},{"slug":"release-safari-15","content":"\u003cp\u003e先日 Safari 15 がリリースされました。\n\u003ca href=\"https://webkit.org/blog/11989/new-webkit-features-in-safari-15/\"\u003ehttps://webkit.org/blog/11989/new-webkit-features-in-safari-15/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e影響の大きそうな箇所や、知っておいたほうが良さそうな箇所を中心に紹介します。\u003c/p\u003e\n\u003ch2\u003eHTML\u003c/h2\u003e\n\u003ch3\u003etheme-color\u003c/h3\u003e\n\u003cp\u003emeta タグ上での \u003ccode\u003etheme-color\u003c/code\u003e のサポートが追加されました。\n指定することで、ブラウザのメニューバーやタブバーといった領域のカラーを変更することができます。 \u003ccode\u003eprefers-color-scheme\u003c/code\u003e と併用することで、ダークモード/ライトモードに応じた色の指定もできます。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.apple.com/videos/play/wwdc2021/10029/\"\u003eDesign for Safari 15\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eCSS\u003c/h2\u003e\n\u003ch3\u003e\u003ccode\u003easpect-ratio\u003c/code\u003e プロパティのサポート\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio\"\u003easpect-ratio - CSS: Cascading Style Sheets | MDN\u003c/a\u003e\u003c/p\u003e\n\u003ch3\u003e\u003ccode\u003elab()\u003c/code\u003e \u003ccode\u003elch()\u003c/code\u003e \u003ccode\u003ehwb()\u003c/code\u003e シンタックスのサポート\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://www.w3.org/TR/css-color-4/\"\u003eW3C Color Module Level 4\u003c/a\u003eに沿った新しいカラーシンタックス \u003ccode\u003elab()\u003c/code\u003e \u003ccode\u003elch()\u003c/code\u003e \u003ccode\u003ehwb()\u003c/code\u003e が利用可能になりました。\u003c/p\u003e\n\u003ch3\u003elist-style-type に設定可能な値が追加\u003c/h3\u003e\n\u003cp\u003eli 要素など、リストアイテム要素のマーカーを指定するための \u003ccode\u003elist-style-type\u003c/code\u003e 新たに 12 個の値が設定可能になりました。\u003c/p\u003e\n\u003cp\u003eMDN のデモで値に応じた表示を確認することができます。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-type#result_2\"\u003ehttps://developer.mozilla.org/en-US/docs/Web/CSS/list-style-type#result_2\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eWeb Inspector\u003c/h2\u003e\n\u003cp\u003eCSS Grid に対応したオーバレイ表示が可能になりました。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://webkit.org/blog/11588/introducing-css-grid-inspector/\"\u003ehttps://webkit.org/blog/11588/introducing-css-grid-inspector/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eデバッグ用のブレークポイント周りなどにも改善が施されています。その他の変更点は WWDC2021 の発表動画に含まれます。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.apple.com/videos/play/wwdc2021/10031/\"\u003eDiscover Web Inspector improvements - WWDC21 - Videos - Apple Developer\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eJavaScript and WebAssembly\u003c/h2\u003e\n\u003cp\u003eWorker や ServiceWorker で ES6 Modules のサポートが追加されました。\u003c/p\u003e\n\u003cp\u003eまた、JavaScript エンジンで次の機能がサポートされました。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003etop-level \u003ccode\u003eawait\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eError.cause\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eプライベートクラスメソッド とアクセサ\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eBigInt64Array\u003c/code\u003e および \u003ccode\u003eBigUint64Array\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWebAssembly では次のサポートが追加されました。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003estreaming compilation\u003c/li\u003e\n\u003cli\u003ebulk memory operations\u003c/li\u003e\n\u003cli\u003ereference types\u003c/li\u003e\n\u003cli\u003enon-trapping conversions from \u003ccode\u003efloat\u003c/code\u003e to \u003ccode\u003eint\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/WebAssembly/spec/tree/main/proposals\"\u003eWebAssembly/spec - proposals\u003c/a\u003e\n\u003ca href=\"https://developer.apple.com/videos/play/wwdc2021/10030\"\u003eDevelop advanced web content - WWDC21 - Videos - Apple Developer\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eWeb APIs\u003c/h2\u003e\n\u003ch3\u003eWebGL2 に対応\u003c/h3\u003e\n\u003cp\u003eWebGL2 に対応し、かつ Apple の グラフィック API の Metal 上で動作するようになり、パフォーマンスが向上しました。\u003c/p\u003e\n\u003ch3\u003eWeb Share API Level 2 の実装\u003c/h3\u003e\n\u003cp\u003eWeb Share API Level 2 の実装により、Web ページからアプリへのファイル共有が可能になりました。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.apple.com/videos/play/wwdc2021/10030\"\u003eDevelop advanced web content - WWDC21 - Videos - Apple Developer\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eMedia\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eMediaSession API のサポートの追加\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://developer.apple.com/videos/play/wwdc2021/10189/\"\u003eCoordinate media playback in Safari with Group Activities - WWDC21 - Videos - Apple Developer\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eSecurity and Privacy\u003c/h2\u003e\n\u003ch3\u003e自動 HTTPS アップグレードのサポート\u003c/h3\u003e\n\u003cp\u003ehttp と https の双方が利用可能なページの場合、自動で https を利用するようになります。\u003c/p\u003e\n\u003ch2\u003e所感\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003easpect-ratio\u003c/code\u003e が 主要 4 ブラウザ(Chrome/Safari/Firefox/Edge)すべてで利用可能になりましたね。今後利用するケースが徐々に増えていきそうです。\u003c/p\u003e\n\u003cp\u003e余談ですが、\u003ccode\u003elist-style-type\u003c/code\u003e に \u003ccode\u003ejapanese-formal\u003c/code\u003e を指定すると \u003ccode\u003e壱・弐・参・四・伍…\u003c/code\u003e になるのですね。カッコいいです。\u003c/p\u003e\n","metaData":{"title":"Safari 15 の新機能とかまとめ","author":"mugi","editor":"nakajmg","createdAt":"2021-11-16","summary":"先日 Safari 15 がリリースされました。影響の大きそうな箇所や、知っておいたほうが良さそうな箇所を中心に紹介します。","tags":["Releasenote","Browser"],"updatedAt":"2021-11-16"}}]},"__N_SSG":true},"page":"/members/[name]","query":{"name":"mugi"},"buildId":"CO4eznkXlDDSZXMGOnJzP","assetPrefix":"/frontend-expert","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>